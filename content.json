{"meta":{"title":"小李工作站","subtitle":"小李工作站","description":"","author":"工程小李","url":"https://lilongxin178.github.io","root":"/"},"pages":[{"title":"404","date":"2018-09-30T09:25:30.000Z","updated":"2023-11-24T11:16:27.807Z","comments":true,"path":"404.html","permalink":"https://lilongxin178.github.io/404.html","excerpt":"","text":""},{"title":"about","date":"2023-11-24T11:11:53.000Z","updated":"2023-11-24T11:12:07.187Z","comments":true,"path":"about/index.html","permalink":"https://lilongxin178.github.io/about/index.html","excerpt":"","text":""},{"title":"contact","date":"2023-11-24T11:12:23.000Z","updated":"2023-11-24T11:12:41.803Z","comments":true,"path":"contact/index.html","permalink":"https://lilongxin178.github.io/contact/index.html","excerpt":"","text":""},{"title":"friends","date":"2023-11-24T11:13:30.000Z","updated":"2023-11-24T11:13:40.864Z","comments":true,"path":"friends/index.html","permalink":"https://lilongxin178.github.io/friends/index.html","excerpt":"","text":""},{"title":"categories","date":"2023-11-24T08:52:39.000Z","updated":"2023-11-24T08:53:04.706Z","comments":true,"path":"categories/index.html","permalink":"https://lilongxin178.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2023-11-24T11:11:23.000Z","updated":"2023-11-24T11:11:40.723Z","comments":true,"path":"tags/index.html","permalink":"https://lilongxin178.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"晶振基础知识","slug":"晶振基础知识","date":"2024-08-15T06:00:00.000Z","updated":"2024-10-22T09:06:42.624Z","comments":true,"path":"2024/08/15/晶振基础知识/","permalink":"https://lilongxin178.github.io/2024/08/15/%E6%99%B6%E6%8C%AF%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/","excerpt":"","text":"晶振基础知识晶振振动方式石英晶体单元的振动类型分为弯曲振动，扩张振动，表面切变振动和厚度切变振动。基频和泛音可以在任何类型的谐振器中工作。最常用的是基频，但对于厚度型器件也常用泛音。 PS:晶振基频是指晶体振荡器产生的基本频率，而泛音是晶体振荡器产生的高频谐波。 频率-温度特性​ 定义：频率温度特性是指环境温度在规定的范围内按预定的方式改变时，其输出频率产生的相对变化特性 ​ 石英产品大多作为电路元件用于频率选择和&#x2F;或频率控制，因此器件的频率-温度特性是最重要的参数。这种百万分之一(ppm)级频率-温度特性的稳定性是石英频率器件的另一个优点，是LCR离散分量振荡电路无法在大规模生产中实现的。 晶体谐振器的等效电路 C0:并联电容 C1：动态电容 L1：动态电感 R1：动态电阻 C0并联电容：两个电极间形成的寄生电容。 L1动态等效电感：代表机型振动的惯性。 C1动态等效电容：代表晶振的弹性。 R1动态等效电阻：代表电路的损耗。 谐振频率​ 一般来说，有三对谐振频率，分别为【“串联谐振频率（fs）”，“并联谐振频率（fp）”】，【“谐振频率”（fr），“反谐振”频率（fa）】，【“最大和最小总导纳定位”频率（fm和fn）】 ​ 根据晶振的等效模型，将电阻先忽略不计（由于反馈系统的影响，晶振最终稳定频率不受电阻影响，故此处忽略电阻简化阻抗表达式），即可得到以下的晶振阻抗表达式：$$Z&#x3D;\\frac{\\mathrm{j}}{\\mathrm{w}}\\times\\frac{\\mathrm{w}^2\\times\\mathrm{L}_1\\times\\mathrm{C}_1-1}{(\\mathrm{C}_0+\\mathrm{C}_1)-\\mathrm{w}^2\\times\\mathrm{L}_1\\times\\mathrm{C}_1\\times\\mathrm{C}_0}$$​ 此时可以得出阻抗与频率的关系： ​ fs即为Z&#x3D;0时的串联谐振频率，表达式为：$$\\mathrm{F_{s}}&#x3D;\\frac{1}{2\\pi\\sqrt{L_1C_1}}$$​ 而fp即为Z&#x3D;∞时（分母为0的点）的并联谐振频率，表达式为：$$\\mathrm{F_{p}&#x3D;F_{s}\\sqrt{1+\\frac{C_1}{2C_0}}}$$​ fs和fp之间的区域（图中的阴影区域）是并联谐振的区域。在这一区域晶振工作在并联谐振状态，并且在此区域晶振呈电感特性，从而带来了相当于180 °的相移。相对来说，对于评估晶振性能，其fs和fp更为重要，所以下文也以fs和fp为重点进行术语的介绍及推导。 晶振的各项术语(1)标称频率及其公差或校准精度 ​ 晶体谐振器的频率通常用兆赫(MHz)或千赫(kHz)来指定。正常频率是我们期望从适当匹配的晶体振荡电路中得到的输出频率。在环境温度下(参考25℃)，真实设备的频率与标称频率有一定的偏差。中心频率与标称频率的偏差，作为设备的一个参数，用一个最大值来指定，以百分数(%)或百万分率(ppm)表示。​ 计算公式为:$$频偏&#x3D;【（实际频率-标称频率）&#x2F;标称频率*10^{6}】ppm$$(2)负载电容 ​ 负载电容CL是从谐振器两端观察电路时振荡器所展示的负载。负载电容形式上与谐振器串联或并联。在并联负载情况下CL的存在会影响并联谐振频率，并联谐振频率fL由。公式如下所示：$$f_L&#x3D;f_s\\sqrt{1+C_1&#x2F;2(Co+CL)}$$​ 由于负载电容是以并联的形式连接到晶振上，所以，可计算出上表达式。 （3）频率-温度稳定性 频率-温度稳定性表示的在标准温度环境下(通常25℃)由工作温度变化引起的频率偏差。该参数的曲线体现了频率偏差(单位%或ppm)和工作温度与参考温度(25℃)间偏差的关系。石英器件的温度稳定性取决于切割方式、振动方式和石英毛坯的尺寸。此外，该偏差值与晶体谐振器的工作温度范围、负载电容和驱动功率有关。 （4）等效串联电阻(ESR) 串联支路中出现的电阻R1可以在串联谐振频率下测量，此时C1和L1的影响相互抵消，R1表示晶体单元和封装的机械性损失。 （5）运动电容C1和运动电感L1 C1与L1这两个参数与串联谐振频率fs相关，如图10所示，在谐振器设计和表征中fs是一个非常确定的参数。工业标准中只规定了C1的值，L1可以由下方公式推导得出。与振荡电路中通常使用的电容相比，C1的值非常小，可以由晶片和电极的材料和几何参数来评估。$$L_1&#x3D;\\frac1{4\\pi^2{f_s}^2C_1}$$（6）静态电容Co(在支路中) Co是一个静态电容，无论晶体是否工作都存在，Co的值可以在很低的频率(小于或约1.0 MHz)测得，计算公式如下，其中A为电极面积，d为切片厚度，e为相应晶体切片的介电常数。在实际应用中，Co不仅包括电镀石英裸片的静态电容，还包括导电结合材料的电容和封装外壳本身的电容$$C_0&#x3D;\\varepsilon_{ij}^s.\\frac Ad$$（7）驱动功率 谐振器的驱动功率是以纳瓦、微瓦或毫瓦为单位的功率消耗量。运行功率是保证正常启动并保持稳态振荡的合适功率范围。驱动功率应设置在最低功率，以避免长期运行带来的频率漂移和晶体断裂。一般来说，产品越小，在不损坏石英谐振器长期使用的情况下，驱动器功率应该越低。一般来说，驱动级别从10 uW到100 uW对于大多数应用已经足够好了。 （8）质量因子-Q 作为谐振器，质量因子Q值是一个非常重要的参数。在规格中，指定了空载和有负载情况下的Q值。空载Q，或机械Q，可以表示为，R1是出现在串联支路的电阻。负载值取决于负载电路。$$Q&#x3D;\\frac{2 \\pi f_sL_1}{R_1}&#x3D;\\frac{1}{2 \\pi f_sC_1R_1}$$（9）晶振牵引度 ​ 晶振的牵引度是指工作在正常并联谐振区的晶振频率的变化率。这也用于衡量随负载电容变化而导致的频率变化，负载电容的减少会导致频率的增加，反之负载电容的增加会导致频率的减小。晶振的牵引度表达式如下：$$\\text{Pullability}_{(\\text{PPM&#x2F;pF})}&#x3D;\\frac{\\text{C}_1\\times10^6}{2\\times\\left(\\text{C}0+\\text{C}{\\text{L}}\\right)^2}$$（10）老化 老化是指工作频率在指定时间段内的相对 变化，在指定时间段内以百万分率(ppm)表示。这种频率变化率通常是指数性质的。老化的第一周老化率是最高的，之后缓慢下降。通常情况下，老化率可以由85℃下放置一个月，或25摄氏度下放置一年测量得出。老化速率取决于许多因素:密封方法、完整性、制造工艺、材料类型、操作温度和频率。 （11）存储温度范围 该参数规定了晶体在非工作状态下可以存储或暴露的最低和最高温度。晶体在非工作状态下，长时间处于规定的存储温度范围内，再次在规定的工作温度范围内工作时，晶体的各项参数指标应当符合规格书的规定。 皮尔斯晶体振荡器的计算方式皮尔斯晶体振荡器有低功耗、低成本及良好的稳定性等特点，因此常见于应用中。 $\\begin{aligned}&amp;\\text{Inv: 内部反相放大器。}\\&amp;\\text{Q: 石英或陶瓷晶振。}\\&amp;\\text{RF: 内部反馈电阻。}\\&amp;\\text{RExt: 外部限流电阻,限制反相器输出电流。}\\&amp;\\text{CL1和CL2:两个外部负载电容。}\\&amp;\\text{CS: 寄生电容: PCB所线,OSC IN和OSC OUT管脚之间的效杂散电容}\\end{aligned}$ 皮尔斯晶体振荡器设计 1、反馈电阻RF ​ RF一般来说是内嵌在芯片内的。它的作用是让反相器作为一个放大器来工作。​ Vin和Vout之间增加的反馈电阻使放大器形成反馈，以使其成为闭环的系统，并在工作初期使反相器工作在线性区。该放大器（也可以叫做频率选择器）放大了晶振的正常工作区域内（Fs与Fp之间）的噪声(例如晶振的热噪声)，该噪声从而引发晶振起振（同时由于反馈环路的存在，其不会通过振荡导致输出无限增长）。在某些情况下，起振后去掉反馈电阻RF，振荡器仍可以继续正常工作。 2、负载电容CL ​ 负载电容CL是指连接到晶振上的终端电容。CL值取决于外部电容器CL1和CL2，杂散电容Cs。CL值一般可从芯片手册中查阅到。​ 调整外部电容器CL1和CL2，使振荡电路实际的负载电容等于晶振制造商标定的负载值CL参数（晶振规格书一般会提供），可以获得标定的振荡频率。​ 计算公式如下：$$\\mathrm{C_L&#x3D;\\frac{C_{L1}\\times C_{L2}}{C_{L1}+C_{L2}}+C_s}$$​ 举个栗子：​ 如果晶振规格书手册中CL ＝15pF，并假定Cs &#x3D; 5pF，则匹配电容CL1，CL2有：$$\\mathrm{C_{L}-C_{s}&#x3D;\\frac{C_{L1}\\times C_{L2}}{C_{L1}+C_{L2}}&#x3D;10pF.Thatis:C_{L1}&#x3D;C_{L2}&#x3D;20~pF}$$3、振荡器的增益裕量 ​ 由上述推导，我们可得知该振荡器设计可看作一个闭环的线性系统，根据自动控制原理的理论，闭环的系统的稳定性、增益等受到增益裕量的影响；​ 按照ST的AN2867中的描述，增益裕度应等于：$$gain_{margin}&#x3D;\\frac{g_m}{g_{mcrit}}$$ $$\\mathrm{g_{mcrit}&#x3D;4\\times ESR\\times(2\\pi F)^2\\times(C_0+C_L)^2}$$ ​ 而此处$\\mathrm{g_{m}}$为芯片手册内的值，故，可进行计算得出增益值。 ​ 但ST手册相对来说偏向单片机结构进行设计运算，而在希华和村田的技术文档中，均以负阻的形式进行运算，此时，我们需对晶振的负载电容进行计算：$$R_L&#x3D;R_1\\left(1+C_0&#x2F;C_L\\right)^{2}$$​ ​ 为了在恒定频率下保持稳定的振荡，它必须具有足够的负电阻（|-R|）以补偿晶体的电阻。将电阻“VR”串联到晶体单元中，并确保振荡开始或停止。 电路的近似负电阻是将有效电阻“RL”与振荡开始时或停止时的最大电阻“VR”相加得到的值，在逐渐使VR值变大后。负电阻（-R）的最佳值是R1的3~5倍。 如果负电阻 （-R） 太小，可能会使晶体不稳定。 参考资料： 希华 (yoketant.com.tw) 振荡裕量 测量方法的基础知识 | 晶体谐振器的基础知识 | 村田制作所 (murata.com.cn)","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"小知识","slug":"小知识","permalink":"https://lilongxin178.github.io/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/"}],"author":"工程小李"},{"title":"信号完整性基础（一）","slug":"信号完整性基础（1）","date":"2024-06-28T06:00:00.000Z","updated":"2024-10-26T05:43:01.275Z","comments":true,"path":"2024/06/28/信号完整性基础（1）/","permalink":"https://lilongxin178.github.io/2024/06/28/%E4%BF%A1%E5%8F%B7%E5%AE%8C%E6%95%B4%E6%80%A7%E5%9F%BA%E7%A1%80%EF%BC%881%EF%BC%89/","excerpt":"","text":"信号完整性基础（一）​ 信号完整性理论就是非常典型的建立数学模型来分析和预测电路实际行为的理论。它有两大两大理论基石：麦克斯韦电磁理论和傅里叶变换： 麦克斯韦的电磁理论描述的是电磁场量之间的相互关系，描述了理想阻、容、感元件在电磁场中行为； 傅里叶变换：任何连续周期信号可以由一组适当的正弦曲线组合而成。 时域与频域​ 时域：一般来说，时间是物质存在的一种客观形式，由过去、现在、将来构成的连绵不断的系统，是物质的运动变化的持续性和连续性的表现。我们从时间的角度来看事物的变化，这就是所谓的时域。 1，傅里叶与频域​ 傅里叶变换，表示能将满足一定条件的某个函数表示成三角函数或者它们的积分的线性组合；时域中的任何波形都可由正弦波的组合而成。​ 傅里叶变换将信号成功的从时间维度（时域）转换成了频率维度（频域），提供给我们一个全新的观察角度，能更加容易的去理解和解释发生的现象。 主要是正弦波有如下的四个性质： 时域中的任何波形都可由正弦波的组合，完全且唯一的描述； 任何两个频率不同的正弦波都是正交的，可以将不同的频率分量相互分离开； 正弦波有精确的数学定义； 正弦波及其微分值处处存在，没有上下边界。 ​ 这些性质并不是正弦波所独有，使用正弦波来描述时域信号还有其它好处，它完美的契合了现实电路中的特性和现象： 电路一般用R，L，C组合来表征，这些元件的二阶线性微分方程的解是正弦波； 频域中不会产生新的信息，与时域描述所包含的信息完全相同； 在频域中对一些问题的理解和描述更加容易： 1, 带宽：描述与信号、测量或互连相关的最高有效正弦波频率分量； 2, 阻抗：电源地分布阻抗对电源轨道塌陷问题提供更简单的解释和解决方法；—— 轨道塌陷噪声（Rail Collapse Noise）通常指电源轨上的电压瞬时跌落现象，3, 电磁干扰：产品的电磁兼容问题使用频域更加容易定位解决； 4, 有损传输线损耗分析：串联电阻随频率的平方根增加，介质内并联交流漏电（介质损耗）随频率线性增加。 2，时域到频域的转换​ 正弦波是频域中唯一存在的波形，它在时域中需要标记很多的电压-时间数据；而在频域中它只需用3项描述：频率、幅度和相位。​ 对于有若干频点的实际信号波形，可以通过傅里叶变换转换成频域，这样可以很直观的观察到各个频点频率以及能量大小。 ​ 假设有一个1GHz的理想数字信号波形-方波：信号上升沿为0，占空比为50%；频谱中正弦波的频率是1GHz的整数倍，所有偶次谐波分量幅度都为0，只有奇次谐波有幅度：An &#x3D; 2&#x2F;(nπ)（如下右图傅里叶变换后可以得到该结论）。其中有一个特殊频点：0Hz，它表示了直流偏移分量，其幅度等于信号平均值。如下图所示，由傅里叶变换计算可得1次谐波的信号幅度为0.63V，加上直流偏移分量：0.5V，那么它的幅度会大于理想方波自身的幅度（违反直觉，但从能量的角度能够解释）。​ ——如上右图所示，正常信号波形并非只有奇次谐波能量，偶次谐波上同样存在能量分布（所以EMI也要关注信号的偶次谐波分量）；而如下左图的理想方波（且占空比为50%）的情况下，偶次谐波的能量为0。 3，频域逆变到时域​ 根据傅里叶变换的原理，我们将频域上的所有谐波频率（无限）正弦波叠加起来，就能得到从能量角度来看无限逼近的理想方波；如下图所示，我们每次叠加一部分谐波频率分量，在这个过程的波形中，可以得到如下三个结论： 随着叠加谐波频率越大，信号边沿时间越短（越陡）； 随着叠加谐波频率越大，信号电平幅度越稳定（越接近原始波形电平幅度）； 随着叠加谐波频率越大，越接近理想方波。 ​ 信号边沿时间与叠加的最高谐波频率分量相关，以理想方波频谱为基准，波形最高频率分量越大，10%-90%（或20%~80%）边沿就越短。​ 那么，我们怎么来确定信号最高频率分量？那就必须引出另一重量级概念：带宽。 带宽​ 带宽并非是数据速率，而是指信号不失真情况下的频谱宽度。​ 带宽是指：表示频谱中最高的有效正弦波频率分量值，所有高于带宽的频率都可忽略不计。 ​ 但实际电路中不会存在一个界限：小于某一频点无损通过，而大于某一频点是100%衰减；往往衰减量对相对频率是连续的，一般定义最高有效正弦波频率分量指的是：在信道传递函数的伯德图中下降3dB的频率点，我们称之为该信道的带宽。​ 1，有效带宽0.35&#x2F;tr​ 首先，我们给出一个理想方波上升沿，即阶跃信号。而实际方波仍有上升沿时间，由傅里叶变换可知，其为有限次谐波的方波信号。那么假设，我将阶跃信号通入RC低通滤波器这一系统中，理论上输出的信号Vo应为有限次谐波的方波信号。​ 所以只要建立起滤波器、方波频谱以及滤波后信号波形上升时间的关系，就能得到信号上升时间与带宽的关系。 ​ 如果Vin 是一个0~1V的阶跃信号，则Vout 就是该滤波网络的阶跃响应。根据电路理论可知$$V_{out} &#x3D; 1-\\mathrm{e}^{-\\frac{t}{\\tau_{RC}}}$$​ 其中，τRC &#x3D;RC为该网络的时间常数。阶跃响应如图所示。 ​ 定义Tr 为信号幅度的10%-90%所对应的时间跨度，即10%90%上升时间，则Tr 可以通过如下方式计算得到：$$0.9&#x3D;1-\\mathrm{e}^{-\\frac{t_{90}}{\\tau_{RC}}}\\Rightarrow t_{90}&#x3D;-\\ln0.1\\bullet\\tau_{RC}\\0.1&#x3D;1-\\mathrm{e}^{-\\frac{t_{10}}{\\tau_{RC}}}\\Rightarrow t_{10}&#x3D;-\\ln0.9\\bullet\\tau_{RC}$$​ 进而得到10%90%上升时间与电路时间常数τRC 的关系 ​ $$T_r&#x3D;t_{90}-t_{10}&#x3D;\\tau_{RC}\\cdot\\ln\\frac{0.9}{0.1}&#x3D;2.197 2\\tau_{RC}$$​ 接下来看滤波器的频域特性，RC网络的频域响应可表示为$$H(f)&#x3D;\\frac1{1+\\mathrm{j}2\\pi fRC}&#x3D;\\frac1{1+\\mathrm{j}2\\pi f\\tau_{{RC}}}$$​ 幅度为$$\\left|H(f)\\right|&#x3D;\\frac{1}{\\sqrt{1+\\left(2\\pi f\\tau{{RC}}\\right)^{2}}}$$​ 其频率响应如图所示。在响应幅度的-3dB处，|H（f）|下降为最大值的$\\frac{1}{\\sqrt{2}}$ ，此时有$$\\begin{aligned}2\\pi f\\tau{{RC}} &amp; &#x3D;1\\f{{3dB}} &amp; &#x3D;\\frac{1}{2\\pi\\tau{_{RC}}}\\end{aligned}$$ ​ 代入该式到上文中的公式，可推导出：$$f_{\\mathrm{3dB}}&#x3D;\\frac{1}{2\\pi} \\frac{1}{\\tau_{\\mathrm{RC}}}&#x3D;\\frac{1}{2\\pi} \\frac{2. 197 2}{T_{r}}&#x3D;\\frac{0. 35}{T_{r}}$$​ 由此可得，0.35&#x2F;tr实质上是单极型低通滤波网络的3dB带宽。需要特别说明的是，这种带宽定义方式中，Tr 指的是10%~90%信号上升时间。 2，有效带宽0.5&#x2F;tr​ 定义一个系统带宽，可以使用3dB带宽，也可以使用等效噪声带宽或称为均方差带宽，记为$f_{RMS}$ 。对于单极型低通滤波网络， 0.5&#x2F;tr与等效噪声带宽很接近。如果给定系统的频域传输函数为H（ω），则等效噪声带宽$f_{RMS}$可表示为$$f_{\\mathrm{RMS}}&#x3D;\\frac{1}{2\\pi}\\int_{0}^{\\infty}\\left|\\frac{H(\\omega)}{H_{\\mathrm{max}}}\\right|^{2}\\mathrm{d}\\omega$$​ 其中，Hmax 为H（ω）的最大值。为了弄清楚fRMS 的含义，将定义变形$$2\\pi f_{\\mathrm{RMS}} \\left| H_{\\mathrm{max}} \\right|^{2}&#x3D;\\int_{0}^{\\infty} \\left| H(\\omega) \\right|^{2}\\mathrm{d}\\omega$$​ 等效噪声带宽fRMS 是这样一种频带宽度：如果频谱在该带宽定义的频率范围内幅值不变，保持频域传输函数为H（ω）的最大值Hmax ，则该频带内$|H_{\\max}|^{2}$下所覆盖的矩形面积等于$|H_{\\max}|^{2}$ 在整个频率范围内覆盖的面积， ​ 对于单极型低通滤波网络，3dB带宽f3dB 与等效噪声带宽$f_{RMS}$ 之间有着确定的关系。下面我们通过简单的数学推导找出这种关系。将单极型RC滤波网络的传输函数写成如下形式：$$H(\\omega)&#x3D;\\frac1{1+\\mathrm{j}\\frac\\omega{\\omega_{3\\mathrm{dB}}}}$$ $$\\left|H(\\omega)\\right|&#x3D;\\frac{1}{\\sqrt{1+\\left(\\frac{\\omega}{\\omega_{3\\mathrm{dB}}}\\right)^{2}}}&#x3D;\\frac{\\omega_{3\\mathrm{dB}}}{\\sqrt{\\omega^{2}+\\omega_{3\\mathrm{dB}}^{2}}}$$ ​ 有Hmax &#x3D;1，将该式带入上文$f_{RMS}$计算公式中，得：$$\\begin{aligned}f_{RMS}&amp; &#x3D;\\frac{1}{2\\pi}\\int_{0}^{\\infty}\\frac{\\omega_{3\\mathrm{dB}}^{2}}{\\omega^{2}+\\omega_{3\\mathrm{dB}}^{2}}\\mathrm{d}\\omega&#x3D;\\frac{1}{2\\pi}\\omega_{3\\mathrm{dB}}^{2} \\frac{1}{\\omega_{3\\mathrm{dB}}} \\arctan\\left(\\frac{\\omega}{\\omega_{3\\mathrm{dB}}}\\right) \\bigg|{0}^{\\infty} \\&amp;&#x3D;\\frac{\\omega{3\\mathrm{dB}}}{2\\pi} \\frac\\pi2 \\&amp;&#x3D;\\frac{\\pi}{2}f_{\\mathrm{3dB}}\\end{aligned}$$​ 此时，可得等效噪声带宽与上升时间得关系式：$$f_{\\mathrm{RMS}}&#x3D;\\frac{\\pi}{2}f_{\\mathrm{3dB}}&#x3D;\\frac{\\pi}{2}\\frac{0.35}{T_{r}}&#x3D;\\frac{0.55}{T_{r}}$$​ 可见，信号带宽的定义 0.5&#x2F;tr与单极型低通滤波网络的等效噪声带宽$f_{RMS}$非常接近，相当于等效噪声带宽$f_{RMS}$。如果定义带宽所使用的滤波网络的响应和单极型低通滤波网络不同，那么得到的带宽也不同。 3，其他说法的信号带宽​ 从原则上讲边沿时间和时钟的唯一约束是：边沿时间一定小于周期的50%。但实际设计中，边沿时间一般要求小于时钟周期的10%，为了带宽计算方便（BW &#x3D; 0.35&#x2F;RT），估计边沿时间为时钟周期的7%；​ ——如此计算时钟带宽：BWclock &#x3D; 0.35&#x2F;（0.07*Tclock）&#x3D; 5Fclock，是信号频率的5倍，或则说最高正弦频率是5次谐波。（这可能是方波采集需要10倍频以上得采样时间得原因【奈奎斯特两倍于五次谐波】） 4，互连带宽​ 互连带宽是指：能被互连传输且未造成有效损耗的最高正弦波分量。对于有损传输线来说，导线损耗和介质损耗对高频分量的衰减要大于低频分量的衰减，这种选择性衰减使得互连中传播信号的带宽降低。互连的“有效”最高频率分量指的是：传输线频率分量幅度减小3dB（幅值70%左右）。​ 互连带宽是对互连所能传输信号的最短边沿的度量。​ 假设互连带宽为1GHz，那么它所能传输的最快边沿RT&#x3D;0.35&#x2F;1GHz&#x3D;350ps（本征边沿时间）；如果边沿时间为350ps的信号进入互连，那么输出边沿时间RT²out &#x3D; RT²in + RT²interconnect，，RTout &#x3D; $(\\sqrt{350^2 + 350^2})$ &#x3D; 495ps。​ 如果要使互连对信号边沿时间的影响不超过10%，那么互连的本征上升沿要小于该信号上升沿的50%，也就是说互连的带宽要大于信号带宽的2倍；为传输1GHz带宽的信号，互连带宽至少需要2GHz。 5,测量带宽​ 测量带宽是指：对于在时域工作的测量仪器，它的测量带宽取决于它能输出到被测元件的信号的最快边沿；例如，测量所得快速阶跃边沿时间为52ps，那么边沿带宽为0.35&#x2F;52ps&#x3D;7GHz，这是时域反射计输出端信号的带宽。​ 为保证信号能被正确测量，最好使测量的带宽可以超过信号的带宽（5倍频）。 传输线理论 1，传输线电感​ 仔细观察传输线的电流回路：传输线上的电流只要从源端发出，那么它必然将会回到源端，形成一个的闭环。如下图所示传输线的信号路径（信号电流）与返回路径（返回电流）形成了一个个回路，构成类似电感器的环路结构，这个电感就叫做：回路电感。​ ——并非是信号从源端传播到了终端后，回流才从终端返回到了源端最终形成一个回路；而是信号在不断向前传播的同时，回流在不断地出现；下面章节会详细分析。 （1）传输线电感定义​ 电感：L &#x3D; dφ&#x2F;dI，即在单位变化电流下在导线内部及其周围产生磁通量（磁力线匝数）的变化；再简单一点表述：电感就是导体电流为1A时周围的磁力线匝数；​ 假设有这么一段导线，只有这一段有电流，前后都没电流，也没有回流（这种情况实际不存在），那么它有电感么？比照电感的定义，当这段导线通过1A电流时，周围产生了磁力线，因为只要有电流流过，就会产生围绕着电流的闭合磁力线，差别只在于磁力线匝数的不同（没有那么多圈圈来叠加）。那么，这段导线的电感，我们就称它为：局部自感。​ ——圆杆导线局部自感近似公式：L &#x3D; 5$\\times$Len[ln(2$\\times$Len&#x2F;r)-(3&#x2F;4)]。 ​ 局部自感是局部导线自身的电感，如果有导线a和导线b两条导线相邻，而且导线b中发生电流变化，那么它必然会影响到围绕着导线a的磁力线匝数发生变化，此时所产生的电感就是：局部互感。那么局部自感和局部互感就组成了：局部电感；即电感由：自感和互感组成。​ ——磁力线只要穿越了导线的周边范围，就必然会与导线自身的磁力线叠加或抵消，根据电感公式可知，其磁力线的大小发生变化则电感量必然发生变化。两根圆杆导线局部互感近似公式：L &#x3D; 5$\\times$Len[ln(2$\\times$Len&#x2F;s)-1]。 ​ 传输线在信号传播过程中会形成一个完整的电流回路，其总电感是：回路电感，所以对于回路电感来说，必然由：回路自感和回路互感组成。 （2）传输线电感详解​ 传输线的电流是从源端发出经过信号路径，再从回流路径返回到源端，形成一个电流环路；如下图所示，那么电流环路的电感由这几部分构成： 信号路径自感（La，局部自感）：信号路径本身的电感； 回流路径自感（Lb，局部自感）：回流路径本身的电感； 信号路径和回流路径互感（Lab，局部互感）：如上图所示，信号路径a产生的磁力线会与回流路径b的磁力线相互影响（叠加或抵消），那么它们之间的相互影响就是互感。 ​ 由于回流路径上的电流方向与信号路径相反，用右手定则发现电流相反会减小相邻导线的磁力线匝数，所以此时互感的作用是减小整体电感；因此传输线回路电感：Lloop &#x3D; （La - Lab）+ （Lb - Lab）&#x3D; La + Lb – 2*Lab。互感Lab随信号路径与回流路径间距的减小而增加，随着信号频率增加，为减小Lloop（回路自感），使返回路径尽量靠近信号路径并减小回路面积（返回路径在信号路径正下方），从而增大两条路径之间的局部电感（Lab）。​ 回路互感指的是两条不同传输线之间产生的电感：某一回路中流过单位安培电流时，环绕在另一完整电流回路周围的磁力线匝数；电流方向不同回路互感对回路电感大小的影响不同（电流同向：回路电感&#x3D;回路自感+回路互感；电流反向：回路电感&#x3D;回路自感-回路互感）。​ ——磁力线的圈圈要包围住导线（电流），才能影响导线的电感，如上图中，如果磁力线落在a和b之间，那么是不会影响到导线电感的。 如下为传输线所有的电感定义： 局部电感：其它地方没有电流存在时，环绕在该段导线周围的磁力线匝数。 局部自感：仅在一段导线中有单位安培电流而其他地方无电流存在时，环绕在该段导线自身周围的磁力线匝数。 局部互感：仅在某一段导线中有单位安培电流而其他地方无电流存在时，环绕在另一段导线周围的磁力线匝数。 回路电感：流过单位安培电流时，环绕在整个电流回路周围的磁力线总匝数。 回路自感：完整电流回路中流过单位安培电流时，环绕在该回路周围的磁力线总匝数。 回路互感：某一回路中流过单位安培电流时，环绕在另一完整电流回路周围的磁力线匝数。 有效电感：当整个回路中流过单位安培电流时，环绕在一段导线周围的磁力线总匝数，其中包括源于回路每一部分电流的磁力线。 （3）电感的作用和影响 当周围磁力线匝数发生变化时导体两端会产生感应电动势：V &#x3D; ΔN&#x2F;Δt &#x3D; L$\\times$ΔI&#x2F;Δt &#x3D; L$\\times$dI&#x2F;dt。导线自身电流变化时，它通过自感产生自感电动势，阻止导线自身电流的变化；——所以从原理来说，相当于一个电感器的作用，会阻止导线中电流的变化。 如果有相邻导线，则会通过互感在相邻导线上产生感应电动势，从而形成感应电压噪声。当导线中通过直流电流时，导线中的电流分布是均匀的，计算的磁力线匝数重点关注导线外的磁力线，事实上如下左图的横截面所示导线内部也存在磁力线（上节所述的内电感），是导线自感的一部分；导线内部和外部磁力线圈都会影响自感，我们称它们为：内部自感和外部自感。如下中图所示当电流聚集在导线的中间I1或则分散在边缘I2（I1 &#x3D; I2），它们的自感一样么？如下右图所示，I1和I2的磁力线只是分别围绕在I1和I2的外面，I1和I2电流大小相等，那么在I2圈外呈现的I1和I2的磁力线匝数（电感）相同；但是在导线内部I1存在着相比于I2更多的磁力线匝数（内部自感部分），这些多出来的磁力线匝数就是I1相对于I2更大的电感量。 趋肤效应 ​ 导线外部的磁力线匝数（外部电感）并不会随着频率的变化而变化，但是导线内部磁力线匝数（内部电感）会随着电流的分布而出现变化。随着频率的增加导线的感抗Z&#x3D; jωL也随之增加，而电流总是循着最小阻抗的路径流动，当导线感抗与电阻比值随着频率越高越大时，电流便越趋于沿着导线的外表面流动（此时导线内部电感小，减小感抗），这就是趋肤效应。​ 趋肤效应影响的结果是随信号频率的增大而导线电流趋于分布到导体外表面，影响如下： 导线自感减小，从而减小了传输线的回路电感； 导线电流通过的横截面减小（Z&#x3D;ρ*L&#x2F;A），导线电阻增加，线路损耗增加。 ​ 随着电流频率的增加，电流流向导线的外边缘，大部分电流集中在一个厚度等于趋肤深度导线的趋肤深度δ的环面中： δ &#x3D; √(1&#x2F;σ$\\times$π$\\times$μ$\\times$f)。其中，σ：电导率；μ：磁导率；f：正弦波频率；一般典型的导体都是非铁磁性的，所以μ &#x3D; μ0 &#x3D; 4π*10⁻⁷。​ ——铜线的趋肤深度：δ &#x3D; 66$\\times$√(1&#x2F;f)μm。 ​ 趋肤效应会将电流聚集到导线表面，使得通过导线的实际横截面积减小，那么其必然会增加导线的电阻率（单位长度的电阻大小）。如下图所示，对圆导线的电阻损耗进行分析： 临近效应 ​ 趋肤效应是导线自感所导致的一种现象，那两条导线之间的互感会导致传输线什么样的现象？答案是：邻近效应。 信号路径上电流与回流路径上电流的方向是相反的，回路电感&#x3D;自感-互感； 在高频电流中信号路径与回流路径中的电流分布靠的越近，它们所构成的回路面积就越小（互感越大），从而传输线回路电感就越小。 ——电流分布总是趋于低阻抗的路径流动，如果是直流电流呢？那么电感就毫无作用（Z &#x3D; jωL &#x3D; 0），所以此时电阻占据主要作用，所以电流就会按照最小电阻的路径来流动（电流平均布满整根导线，实现最低电阻）。 涡流 ​ 根据电磁感应原理：在两个相互靠近导体中，一个导体上电流有改变，那么另外一个导体的两端会产生感应电压，同时该感应电压会形成电流；再简单点表述：当其中一个导体电流变化时，另一个导体会产生感应电流，这个感应电流就是涡流。​ 涡流存在于所有的所有的导体结构，但有一种非常特殊的几何结构：电流回路靠近大的导电平面；假设金属平面（可以不是GND或电源）上方有一个线圈，当线圈中有电流变化时，变化的磁力线就会穿过导电平面，并在平面上激起涡流，这些涡流反过来会影响自己产生的磁力线。 ​ 如上右图所示，通过麦克斯韦方程组求解：涡流产生的磁力线结构就像是平面下方的另一电流产生，它与平面的距离和真实电流与平面的距离相等，这个虚构的电流称为：镜像电流。镜像电流与实际电流大小相等，方向相反，而且镜像电流的一些磁力线会环绕在实际电流周围，源于涡流的互磁力线圈将减小导线的总电感，实际上就是减小了线圈的局部电感。​ 在电感下方铺铜皮（GND或其它），是否能减小其正下方导线的影响？首先，铜线以及FR4介质的磁导率约为1，对电感所产生的磁力线无任何作用，磁力线可以轻易穿透铜皮和介质不会产生衰减，对磁力线产生影响的只是与电感距离的大小，离电感越远磁力线密度越小，互感就越小。​ 刚刚分析了铜皮会产生涡流，必然会增加了互感，从而减小了电感的感量。如果是开关电源的电感，那么随着电感感量的减小，输出电源纹波电流会增加。另外，铜皮涡流势必会导致电源&#x2F;GND平面的噪声增加，影响EMI辐射。 2，传输线电容（1）电容的概念​ 电容是两块导体中间夹着一块绝缘体构成的电子元件，实际上任何两个绝缘导体之间都有一定的电容量；​ 如果给两个导体上分别加上正电荷和负电荷，那么两个导体之间会存在电压，那么这一对导体的电容量就是单个导体上存储电荷量和导体之间电压的比值：C &#x3D; dQ&#x2F;dV；两个导体在给定电压下储存电荷越多，电容值就越大。​ 电容中间是绝缘介质材料，两个导体之间不存在直流通路，只有当导体两端电压发生变化时，才会有电流流经电容器：I &#x3D; ΔQ&#x2F;Δt &#x3D; C*dV&#x2F;dt；这个电流是等效电流（并不是真的有电流从电容中间流过）称之为：位移电流；（在导体中自由电荷的运动称之为：传导电流）。当dV&#x2F;dt保持不变时，电容容量越大，流过电容的电流就越大，表现出来的电容阻抗就越小。​ 平行板电容是PCB上的常见电容形式，电容量近似表示为：C &#x3D; ε0 * εr * A&#x2F;d；该式表明一个重要的几何结构特征：导体间距越大，电容量越小；重叠面积越大，电容量越大。 （2）介质介电常数​ 极化的概念，任何物质在电场的作用下都会被极化，如下图所示在外部电场E的作用下，介质内部会产生一个强度为E’的反向电场。由于增加在两个导体上电荷所形成的电场E被介质极化电场E’削弱，所以需要在导体上增加更多的电荷Q才能达到原本的电场强度E0（外在表现为导体间电压），从而增加了电容量；其增加电容量的比例就是相对介电常数：εr &#x3D; E&#x2F;E0 &#x3D; E&#x2F;(E-E’) &#x3D; C&#x2F;C0。 ​ ​ 当电介质受到静电场作用时，往往要经过一段时间（磁豫时间&#x2F;偶极子运动时间）极化强度才能达到其最终值；如果电介质受交变电场作用，而交变电场的改变相当迅速时，极化就会追随不及而滞后，从而导致动态介电常数与静态介电常数之间的不同；当信号频率上升到驰豫极化完全跟不上电场的变化（假设100GHz），只会有瞬时极化发生，此时εr 趋向于 1，且无介质损耗发生； ​ 信号频率变化引起介电常数变化的同时，还会导致介质损耗；由于电介质在电场作用下偶极子会发生移动（从而产生极化），这会导致电场能量的损耗： 随着频率的增加，电场周期变短，短到可以与驰豫时间相比，极化时间逐渐跟不上电场的变化，这时介质损耗也逐渐增加； 同时偶极子运动所产生的极化电流（信号路径与回流路径之间的漏电流&#x2F;电导）也逐渐增加。——这是除了趋肤效应外的另一高频损耗，且跟电介质本身特性强相关。 集总和分布模型​ 对于信号传输来说，其实就是电磁波的传播。所以对于电路长度来说：重要的不是走线电路本身的尺寸（长度），而是电尺寸（电路尺寸&#x2F;波长）。​ 波长代表了电磁波相位改变360°时传播的距离。虽然麦克斯韦的方程组可以解释所有的电现象，但太复杂了不便于应用啊。那是否有方法能够简化的呢？ ​ 有一种近似的方法：采用集总模型和基尔霍夫定律来分析。即当电路最大尺寸为电小尺寸时。那又如何定义电小尺寸呢？​ 只要电路尺寸（PCB走线长度）远小于信号波长就行了；一般来说当电路的最大尺寸（走线长度）小于信号最高频率波长的1&#x2F;10时，就认为是电小尺寸。好，那我们来总结一下：当PCB走线（线缆）长度小于信号最高频率对应的波长1&#x2F;10时，就认为是集总模型，可以用基尔霍夫定律。 ​ 一般情况下，如果连接线长度小于信号激励源频率对应波长的1&#x2F;10，那么我们就假定相移可以忽略不计。在一些特殊情况下，可能要求更高。​ ——对电路设计来说，电尺寸比PCB走线长度（电路尺寸）更重要，因为当走线长度小于波长的1&#x2F;10时，信号经过该距离的传播后的相移可忽略不计，所以此时连接线可认为是电小尺寸。 ​ 计算电尺寸来判断一个电路是否为电小尺寸（L &lt; λ&#x2F;10），如果是电小尺寸，就可以运用比电大尺寸（L &gt; λ&#x2F;10）更简单的集总参数电路模型，采用基尔霍夫电压和电流定律；如果是电大尺寸（分布参数电路模型），那么只能运用麦克斯韦方程组或则用一系列集总参数电路串行来近似。对于分布参数电路模型来说，电磁波的滞后效应不可忽略，沿线传播的电磁波不仅是时间的函数，而且是空间坐标的函数。 传输线1，传输线定义​ 传输线就是：由两条有一定长度的导线组成，把电磁能从电路的一端送到电路另一端的装置。 从传输线的物理结构描述：是由两条有一定长度的导线组成； 两条：从某种意义上来说是对的，因为信号的传输就是通过：信号路径和回流路径，这两条“导线”来实现的；但实际信号传输过程中，特别是回流路径往往并不是简单的一条路径，而是根据其固有物理规律（回路阻抗最小）自行选择的n条回流路径；从另外一层意义上来说：传输线说的就是信号路径与回流路径之间的关系，与其它（电源、地）无关；——之所以是n条，因为信号路径上的信号频率一般不是单一频率（有很多频率分量等等），所以不同频率分量就对应了不同的回流路径，很难确定具体的回流路径。 一定长度：固定长度的导线对于信号A是传输线，可能对信号B来说就只是导线；对于传输线来说，导线长度与信号的边沿时间强相关，它要满足分布系统模（导线长度大于或等于波长），在短线模式或集总系统中的导线不再是传输线（不适用传输线模型的相关理论），而只是导线(可使用基尔霍夫定律解决) 从传输线的功能描述：把电磁能从电路的一端送到电路另一端的装置； （1）电磁能：传输线传输的是电磁波；那么什么是电磁波呢？ 固定的3.3V电平或0V电平是电磁波么？很明显，固定电平并不会产生电磁波，电磁波的传播只发生在信号发生跳变的一瞬间；——固定电平只有固定的电场和磁场，而非交替出现的电磁场（电磁波）。 传输线只传输由3.3V变成0V或则0V变成3.3V的这些信号边沿，固定的电平不是传输线所传播的；所以高速还是低速信号的判断不在于信号本身频率的高低，而在于传输信号边沿的快慢（最高频率分量）。——但是信号本身频率更高，往往意味着边沿跳变更快，它们是有关联的。 （2） 从电路的一端送给电路另一端：电磁能的传输需要从发送端传到接收端，需要保证的是接收端信号能够被正确的接收，而不是要求发出端的信号完整，这是传输线的意义所在。 ——测试信号质量的时候是选择发送端还是接收端呢？明显是接收端，但一不小心测了发送端，发现发送端的信号质量很差，会不会有问题呢？发送端信号质量差是正常的。 2，传输线工作原理​ 实际设计中，回流路径往往是回流地或电源，但我们需要明确地将：回流路径的概念与回流地&#x2F;电源区分开，避免导致概念的混淆。 只有当信号路径相对回流路径有电压跳变时（信号前沿），信号路径上的电流通过互感和电容（信号路径相对于回流路径）流向回流路径（位移电流）；——需再次强调：传输线模型只使用于跳变信号（信号前沿），对于固定电平，传输线模型的电感和电容不起作用（电感短路，电容开路），此时起作用的只是导线的串联电阻。 假设有一个导线从地球延伸到月球，此时传输线延时约为1.2s（约38万公里）：信号电流从地球向月球传输，返回电流从月球向地球传输形成一个电流环路，那么返回电流是信号电流到达月球后，再从月球发送回来的么（总共经过2.4s）？ 当信号电流从地球（源端）发出的瞬间，就开始对传输线电容进行充电：电流从芯片电源-&gt;芯片驱动管脚-&gt;信号路径-&gt;电容-&gt;回流路径-&gt;芯片电源，形成一个完整的回路，即返回电流是跟随信号电流即时产生的； 信号还未传到远处时，它还不知道后面的传输线结构如何，电流已经过返回路径回到源端，仅仅与信号前沿的环境（介电常数和磁导率等）和信号前沿所在的那一小段传输线有关； 一旦信号路径中信号发出，回流一直存在，直到在接收端的回流返回到源端，总共花费时间是：2倍的走线延时（举个栗子：地球与月球之间延时的两倍：2.4s）。 所以可以得到结论 ​ 只有在信号前沿（跳变）处的导线才工作在传输线模式，且信号状态只与信号前沿所处位置有关；​ ——只有信号边沿（特定时间）所占据的那段导线（特定位置）才是传输线；并非导线的任何时刻、任何位置都是传输线。 3，传输线如何回流​ 传输线的回流路径并非一定要是GND平面，那么对于回流平面不是GND平面的情况下是怎样的呢？ ​ 如下图所示，一条带状线（什么是带状线？置于2个平行的地平面（或电源平面）之间的电介质之间的一根传输导线）上层是电源平面，下层是GND平面，那么信号线中传输信号时，它会智能地选择GND平面来作为回流么？ 当信号线上的电平由低（0）到高（1）跳变时，其电流通路如下图所示； （1）首先，我们必须要清楚电流从哪里流出来，必然要流回到哪里去；所以当信号线从0—&gt;1跳变时，这些电流是从哪里来的呢？对于CMOS电平驱动来说，其必然来自于器件的电源管脚VCC； （2）电流从VCC通过MOS管流向信号线，信号线上的电流不断通过信号路径与回流路径之间的电容，要返回到VCC去； （3）但是对于信号来说，它并不清楚上面那层是VCC平面，下面那层是GND平面，所以信号边沿只会根据所处的电路结构来决定回流到VCC平面和GND平面的电流大小； ——所谓的电路结构，是指信号线与VCC之间的距离（寄生电容）和信号线与GND之间的距离（寄生电容）大小。 （4） 两组信号回流路径如下： VCC平面作为回流路径（黄色箭头）：VCC平面-输出器件VCC电源管脚，阻抗非常小； GND平面作为回流路径（绿色箭头）： GND平面-输出信号器件附近的GND平面-去耦电容返-输出器件VCC电源管脚。——相对回流到VCC平面来说，回流到GND平面的回流反而具有更大的阻抗：去耦电容容抗；当然去耦电容容抗对于高速信号来说也是非常小的，一般10uF陶瓷电容器，理想情况下（不考虑寄生电感）在10MHz的容抗是：|Zc| &#x3D; |1&#x2F;jωC | &#x3D; 1&#x2F;2πfC &#x3D; 1.6mΩ；那如果10nF陶瓷电容器（不考虑寄生电感）在100MHz下，容抗也只有160mΩ。所以基本可以忽略不计。 当信号线上的电平由高（1）到低（0）跳变时，其电流通路如下图所示； （1）当信号线从1—&gt;0跳变时，信号线通过下管MOS管驱动到GND，所以信号线上的电流流回到输出器件内再到器件GND管脚； （2）那么从信号线上的电流是从哪里来的呢？由上图可以看出，这些电流是从VCC平面和GND平面（回流路径）中来的；电流通过VCC平面和GND平面上寄生电容流向了信号线； ——为什么GND平面也会有电流流向信号线？因为信号线与GND平面间电容起始状态是充满电（有电压差）的，当信号线瞬间降低到0电平，电容两端必须有电流释放出来（GND-信号线方向）；同理信号线与VCC平面之间寄生电容时没有电压差的，当信号线瞬间降低到0电平时，必须进行充电（VCC-信号线方向）；所以VCC平面和GND平面都有电流流向信号线。 （3） 电流从哪里来，那它必将回到哪里去；所以它们从VCC和GND平面（回流路径）中出来的电流，必将会从输出器件的GND管脚出发，返回到VCC和GND平面（回流路径）中去；——电流必将回到信号路径对应的回流路径位置的VCC和GND平面上，我们可以将它看成一个实体的电容器来理解：举个栗子，从电容器的+端输出电流，必将回到它的-端去。 （4）两组信号回流路径如下： VCC平面作为返回路径（黄色箭头）：从输出器件的GND管脚-去耦电容-输出器件附近VCC平面-VCC电源平面； GND平面作为返回路径（绿色箭头）：从输出器件的GND管脚-GND平面。 ​ 所以，有结论为：从原理上来说：信号的回流路径是GND平面还是VCC平面，是完全等价的。但为什么我们一般都要选择用GND作为回流平面呢？主要原因在于： 在单板上，不同的器件之间的GND一般是同一个，而且会铺有完整的GND平面； 单板上的电源种类有很多，一般不同电源会对电源层进行分割，所以如果以电源平面作为参考，一般情况下会出现回流不连续的情况； 并不是所有的VCC平面都可以作为回流路径的，最好是器件的I&#x2F;O电源，起码是输出器件的电源；但如果不是输出器件的电源，那么回流路径会出现不连续，导致传输线阻抗不连续。 4，传输线的阻抗与时延​ 传输线最重要的两个特征是：1，特征阻抗；2，时延（信号传播速率）。 ​ 我们知道信号在传输线上传播的过程中，其电压&#x2F;电流（阻抗）的特性类似电阻，无损传输线可以很好的近似传输线的特征阻抗和时延特性，计算也相对方便，所以先用该模型进行分析。 （1）传输线阻抗​ 如下图是无损传输线模型，以及在信号传输过程中的电流完整的流动过程，我们用电感L和电容C来描述传输线的回路电感和电容； L在如下拓扑中，指的是回路电感，这是一个等效电感：不是信号路径的局部电感，而是信号路径与回流路径构成的回路电感；所以该电感跟回流路径强相关。当传输线信号路径不变，而回流路径不连续时（例如：信号线的参考GND层被分割，回流路径就要绕远路），传输线的电感会增大； C在如下拓扑中，指的是信号路径相对于回流路径之间的电容。——线与回流地之间的板间电容，其间距是PCB层间距，介电常数是FR-4材料的参数。我们知道无损传输线的阻抗模型等效为：很多组串联在信号路径上的L和并联在信号路径与回流路径之间的C组成；而且电流是从信号路径到回流路径的方向，由此得出传输线的阻抗可以等效为搭接在信号路径与回流路径的一个电阻（并联电阻） ​ 如上图所示，如果传输线的阻抗是搭在信号路径与回流路径之间的电阻，那么这么多电阻并联后应该是Z0&#x2F;n而不是Z0。​ 回到传输线的定义来：信号在传播过程中只有信号前沿的那部分导线才能看成是传输线。 ​ 如下图所示，在信号跳变的左侧是高电平（例如3.3V），右侧是低电平（0V），信号路径与回流路径上的电压差保持不变，没有发生充放电的动作，所以这些地方阻抗是无穷大（导线上的信号是固定电平，则信号路径和回流路径之间电压不会变化，此时电容不会进行充放电，所以电流I &#x3D; 0；而Z &#x3D;U&#x2F;I &#x3D; ∞，相当于断开）；只有处于信号前沿的信号路径与返回路径之间进行着充放电的动作，电容和电感才有了用武之地，成为特征阻抗：Z0。 ​ 所以，有结论为：传输线的阻抗是信号前沿（跳变）处所受到的阻抗，它是一个瞬时的阻抗。所以传输线阻抗也可以看成串接在信号路径上的一个电阻。​ ****传输线阻抗是信号在传输过程中，信号前沿所受到的信号路径与回流路径之间瞬时阻抗****。​ 如果传输线的瞬时阻抗在整条导线上都保持恒定（传输线瞬时阻抗保持一致），那么我们称之为：传输线的特征阻抗。传输线特征阻抗的特点是：它只与介质材料、传输线结构相关，与传输线长度无关。 （2）传输线时延​ 传输线时延指的是：信号在传输线上传播过程中，电场与磁场建立的快慢。​ 信号传输本质上是电磁波的传播，受到介电常数和磁导率的影响，铜线和板材介质相对磁导率是1，不影响信号传播速率，所以信号传播速度主要受到介质介电常数的影响。​ 在同一介质材料（相同介电常数εr）中信号传输速度V &#x3D; 1&#x2F;√(LC)是保持不变的，不会因为导线结构的改变而改变，由于各种情况导致的L或C的改变，可以很好的定性分析对应C和L的变化。 5，有损传输线​ 实际传输线总是存在损耗的，有损传输线的模型如下图所示，除了串联回路电感和并联电容之外，还有串联电阻和并联电导；传输线的损耗主要就来自于这两部分电阻。 串联电阻是指：金属导线本身的电阻，在直流条件下导线本身电阻是非常小（mΩ级别）； ——随着信号频率的增加，由于趋肤效应导致导线电阻增加，造成导线对信号的损耗。 并联电导是指：导线（信号路径）与回流路径之间的漏电流，由于介质材料是绝缘材料，介质本身电阻非常大，所以在直流条件下电阻非常大（漏电流为nA级别），可以忽略不计； ——随着频率的增加，随着电场变化介质中偶极子运动产生了更大的损耗（介质损耗）。 对于传输信号来说，不管是串联电阻还是并联电导都会造成信号高频分量更大的损耗，高频信号分量损耗的大小决定了传输线的传输带宽； 假定εr在频率中保持不变（实际应用中εr会随频率升高而减小），如下图中α为传输线衰减常数，β为相移常数： 在高频时电阻分量远小于感抗，所以传播速度接近无损传输线； 在低频时电阻分量不可忽略，其传播速度小于无损传输线； 所以信号的高频分量的传播速度要大于低频分量的传播速度，会导致信号上升沿先快后慢。 对于高速信号，我们可以有几个方法来降低传输线损耗的问题： 选用低损耗介质（不是低介电常数）； 尽量减小导线长度； 增加导线宽度，但这会影响差分阻抗，影响差分线之间耦合度。 信号的反射​ 传输线信号传输的本质是电磁波信号传播，但是其信号反射原理同光的反射&#x2F;折射完全不同，传输线信号的反射是由于传输线阻抗的变化所导致，而非介质变化引起的。我们知道电磁波的反射会导致其部分能量的损失，所以传输线信号的反射就不可避免的同信号质量联系在一起，我们要尽量避免传输线中间的阻抗不连续点。​ 且传输信号的目的是：让接收端能正确的接收到信号。很明显假如信号发生了反射，那么根据能量守恒原理，入射信号的能量必然会减小，信号幅度必将发生变化。 1，信号为什么反射​ 信号沿传输线传播时，路径上每点都有相应的瞬时阻抗，若瞬时阻抗发生变化（阻抗由原先的50Ω变成60Ω），那么部分信号将沿着与原传播方向相反的方向反射，而另外一部分将继续传播。​ 用物理规则结合数学公式来推导信号反射的原理，当信号沿着传输线从阻抗Z1进入到Z2的边界，此时必须保证在此边界处：V1&#x3D;V2，I1&#x3D;I2；同一点的电压和电流必须保持连续：既然交界处电流相等I1&#x3D;I2，又有I1 &#x3D; V1&#x2F;Z1 ，I2 &#x3D; V2&#x2F;Z2；从而推导出V1&#x2F;Z1 &#x3D; V2&#x2F;Z2，而Z1 ≠Z2，很显然：V1&#x3D;V2，I1&#x3D;I2，I1 &#x3D; V1&#x2F;Z1 ，I2 &#x3D; V2&#x2F;Z2；这四个等式不能同时满足。​ 所以，必须在区域1中产生一个反射回源端的电压，它唯一的目的是吸收入射信号和传输信号不匹配的电压和电流。 ​ 如上图所示，那我们用V入射，V反射，V传输来表示信号在阻抗交界面产生的电压，其对应的电流分别是I入射，I反射，I传输；电流和电压关系需满足：V入射+V反射&#x3D;V传输；I入射-I反射&#x3D;I传输；那么，V入射&#x2F;Z1 - V反射&#x2F;Z1 &#x3D; V传输&#x2F;Z2； 再由 V入射&#x2F;Z1 - V反射&#x2F;Z1 &#x3D; （V入射+V反射）&#x2F;Z2；可得：$$ρ &#x3D; V反射&#x2F;V入射&#x3D;（Z2-Z1）&#x2F;（Z2+Z1）；t &#x3D; V传输&#x2F;V入射&#x3D; 2*Z2&#x2F;（Z2+Z1）。$$​ ——ρ：反射系数；t：传输系数。 ​ 从下图传输线信号传输模型来定性理解阻抗突变导致的反射现象，假设Z0&#x3D;50ohm，Z1&#x3D;100ohm，输入电压V&#x3D;5V；传输线电流在阻抗突变交接前电流是：5V&#x2F;50ohm &#x3D; 100mA；由于传输线上存在电感，电流不能突变，考虑极端情况：100mA全部电流涌入Z1（100ohm），那么此处会产生电压V2 &#x3D; 100ohm*100mA &#x3D; 10V，此时传输（Z1）电压大于入射（Z0）电压5V，那么必将产生一个反射电流I反&#x3D; (5V-10V)&#x2F;50ohm &#x3D; -100mA。而在实际情况中，当电压上升到大于5V后，电感两端产生反向电压，正向流入的电流迅速减小，同时产生反射电流&#x2F;电压，传输电流不会上升到100mA的极限值，最终形成一个平衡。 2，低源端阻抗无匹配传输线​ 假设驱动器内阻为10ohm，无损传输线阻抗为50ohm，终端阻抗∞（开路&#x2F;无匹配）；信号传输的过程如下： 信号从源端发出电压沿着传输线传输，从传输线模型可知此时驱动器内阻与传输线阻抗形成分压关系，V源端1 &#x3D; [50&#x2F;(10+50)]*1V &#x3D; 0.84V； 经过阻抗连续的无损传输线，Td &#x3D; 1ns的延时，信号V源端1无损耗的传播到终端，信号幅度为0.84V； 此时在终端开路，阻抗为∞，传输线阻抗不连续而发生发射，反射系数为：(∞-50)&#x2F;(∞+50) &#x3D; 1，表示全反射；终端电压幅度V终端1 &#x3D; 0.84V+0.84V&#x3D;1.68V，此时有0.84V电压从终端反射回源端； 信号到达源端后，源端阻抗为10ohm，注意反射回源端时这个10ohm是并联在电源轨道上，此时电源等价于回流路径，所以不是分压而是反射；反射系数为：（10-50）&#x2F;（10+50）&#x3D; -0.667，反射电压 V源端反射1 &#x3D; 0.84V*（-0.667）&#x3D; -0.56V， V源端2 &#x3D; 0.84+0.84V–0.56V&#x3D;1.12V； V源端反射1 电压（-0.56V）经传输线再传输到终端，终端全反射，所以终端电压V终端2 &#x3D;1.68V-（0.56V*2）&#x3D; 0.56V； 同理-0.56V（反射电压）再传输回源端，至此形成一个振荡，其振荡频率为传输线延时的4倍；振荡幅度不断衰减直至输出信号电压1V。 下面探讨几个问题 （1）为什么是源端信号最初发出来的信号与特征阻抗是分压关系？ 如下图所示，当一个高电平信号Vo刚刚从器件中发出，它首先是经过了一个串联的内阻Zs；——如果外接了源端串联匹配电阻，那么Zs包括匹配电阻，要求是串联匹配电阻与芯片之间的距离满足集总模型长度（即，走线长度要小于1&#x2F;10的信号波长），这也是为什么源端匹配尽量靠近发送端的原因。 信号传播到传输线上后，受到一个传输线的特征阻抗Z0，我们上一章已经说明了，Z0是信号路径相对于回流路径的阻抗（即如下图），并非如源端的阻抗（内阻和源端匹配）是串在信号路径上的； 现在就是一个非常简单的计算了，V1 &#x3D; Vo*Z0&#x2F;(Zs+Z0)。 （2）第二个问题是：为什么信号在理想传输线的传输过程中不会产生反射呢？ ​ 如下图所示，假设信号在传播过程中，从第2个Z0切换到了第3个Z0，此时传输线上的电流并不会发生变化，即电流一直处于连续状态，所以电压也不会发生变化；​ ——如下示意图中，特征阻抗是分离开的一个个Z0，这只是为了便于理解；实际传输线上的特征阻抗并非是离散的，而是随着信号边沿的传播过程而非常连续的：当信号边沿连续从左往右传播时，一部分传输线结束了充放电（L+C），另一部分则开启了充放电（L+C）。 Hx(ω) &#x3D; exp √{-x[(R(ω) + jωL)*(jωC) ]}，传输线传递函数，包含传输线损耗和延时； T(ω)&#x3D; [2*ZL(ω)]&#x2F;[ZL(ω)+Z0(ω)]，终端传输系数——传输系数，即传输过去的信号幅度比例。 R2(ω) &#x3D; [ZL(ω)-Z0(ω)]&#x2F;[ ZL(ω)-+Z0(ω)]，终端反射函数；终端反射是如何发生的呢？ 如下图所示，当信号传输至终端时，原来传输线上的电流I0 &#x3D; V0&#x2F;Z0，但是ZL &gt; Z0的话：IL &#x3D; V0&#x2F;ZL，此时IL &lt; I0，必然会多出一部分电流没地方去，只能原路返回。——假如ZL为无穷大，那么这些电流没地方流出去，只能全部返回回来，所以此时的电流I &#x3D; 2$\\times$I0，那我们可以根据欧姆定律得到电压V &#x3D; 2$\\times$I0$\\times$Z0 &#x3D; 2$\\times$V0；这是全反射的情况。 R1(ω) &#x3D; [Zs(ω)-Z0(ω)]&#x2F;[ Zs(ω)-+Z0(ω)]，源端反射函数。 如下图所示，当从终端反射回来的信号边沿到达源端，源端阻抗Zs是一端连接至Vcc或GND的； 如果Zs是接到GND（即，输出驱动为低），那么就比较好理解，它在电路结构中的位置等价于特征阻抗Z0和终端阻抗ZL，所以其也是有传输系数和反射系数的； 如果Zs是连接到VCC（即，输出驱动为高），需要摒弃回流是GND的这种错误观念，在信号回流上VCC和GND是等价的，VCC就可以当做GND。 3，短线模式下的传递模型​ 当输入信号的边沿时间足够长（线长&lt;1&#x2F;6 Tr），所有错开振荡部分会混合叠加，不会产生振铃现象，仅当信号上升时间能够与信号在传输线上的延迟差不多甚至更小时（长线），才会出现明显的过冲和振铃。​ 根据如上的理论推导，在短线模式下传输线的损耗和延时都可以忽略不计，且T(ω)&#x3D; R2(ω)+1；可以将传输函数简化：Sshort(ω)&#x3D; [A(ω)$\\times$(R2(ω)+1)]&#x2F;[1-(R2(ω)$\\times$R1(ω)] ，将函数代入源端阻抗Zs，传输线阻抗Z0，终端阻抗ZL计算，Sshort(ω) &#x3D; ZL&#x2F;(ZL+Zs)。得到一个重要的结论：在短线模式下的传输模型是由负载阻抗ZL和源端阻抗Zs构成的简单阻抗分配网络。——源端串联阻抗匹配有用么？当然有用，串阻叠加到Zs上，从而减小接收端信号电压幅度。 4，高源端阻抗无匹配传输线​ 源端阻抗值大，主要体现在源端阻抗分压：A(ω) &#x3D;Z0(ω)&#x2F;[Zs(ω)+Z0(ω)] 和源端反射系数：R1(ω) &#x3D; [Zs(ω)-Z0(ω)]&#x2F;[ Zs(ω)+Z0(ω)]上，而传输到终端后反射系数：R2(ω) &#x3D; [ZL(ω)-Z0(ω)]&#x2F;[ ZL(ω)+Z0(ω)] &#x3D; 1，是全反射（因为理想终端阻抗ZL(ω)是无穷大）。 此时由于Zs（ω）很大导致A(ω)很小，所以高源端阻抗时初始输出的阶跃非常小；假如源端阻抗Zs(ω)&#x3D;1000Ω，特征阻抗Z0(ω) &#x3D; 50Ω，那么源端分压A(ω) &#x3D; 50&#x2F;(1000-50) &#x3D; 1&#x2F;19，如果是3.3V电平信号，那么在经过第一次阻抗分压之后的电压是0.17V。 R1(ω)很大说明信号从终端反射回源端时也产生了较大幅度反射，在确定的时间段内，其最终值等于输入阶跃值；——根据上面的栗子：R1(ω) &#x3D; (1000-50)&#x2F;(1000+50) &#x3D; 950&#x2F;1050 &#x3D; 0.9，注意：反射系数为0.9表示很大的反射（全反射的系数为1），如果反射系数为0表示没有反射，反射系数为-1表示全吸收。如下图所示，我们可以得到这种阶跃非常像RC滤波的响应（缓慢的上升，类似于RC充电），阶跃响应的建立时间段与源阻抗和线上负载电容的乘积相近；由于高源端阻抗无匹配传输线阶跃响应与RC滤波的相似性，可以把传输线的输入看做容性负载，所以在线路匹配设计时，如果串入电阻过大时，现象是：无过冲，但边沿会变缓。 5.中间容性负载传输线​ 容性负载不仅仅表现为接收器的输入电容，而且还表现在类似于容性结构的负载，如芯片引脚较宽的焊盘也类似于一个容性负载，对于低速信号，过孔也可以粗略地看作是一个容性负载。 ​ 当容负载处于传输线中间时，从电容两端看向电路的其他部分，可等效成下图所示的形式。 ​ 如果两侧传输线阻抗都是Z0 &#x3D;50Ω，则信号到达电容时相当于通过一个25Ω电阻对其充电。假设入射电压最大值为U，电容两端电压为$$ V_c &#x3D; U \\left( 1 - e^{-\\frac{t}{\\tau}} \\right)$$​ 下图显示了电容两端的电压和通过电容的电流曲线。曲线形式与传输线末端电容类似，只不过这里的时间常数为$\\tau &#x3D; \\frac{Z_0}{2} C &#x3D; (25 \\times 8) , \\text{ps} &#x3D; 200 , \\text{ps}, ; t &#x3D; 1 , \\text{ns}$时信号到达电容，开始对电容充电，经过τ&#x3D;200ps电容电压上升到632 mV，是其终值电压的63.2%。下图为电容阻抗曲线，电容经过τ·ln2&#x3D;138.6ps后达到等效阻抗25Ω。 6，等间隔容性负载传输线​ 有一种电路模型，与原来的模型相比有相同的电感和电阻，但有不同的电容值；一驱多的DDR&#x2F;Nand Flash 拓扑结构，每片DDR&#x2F;Nand Flash颗粒相当于增加了一个容性负载；我们将这个容性负载值加到现存传输线的单位长度电容上，得到新的传输线模型电容值。​ 如下图所示，此时得到一个重要的结论：等间距多容性负载新模型的传输线阻抗会变小，传输延时会增加，在阻抗匹配和时序设计时要另外考虑。​ ——传输线上信号传播速度和特征阻抗取决于在传输过程中受到感抗和容抗的组合： Z &#x3D; LC，介电常数和磁导率只是这两个参数的另外一种方式的呈现，所以虽然介电常数和磁导率不变，如果还有其它外部条件改变了信号传播过程中的感抗和容抗，那么还是会影响到其传播速度和传输线阻抗。 7，直角转弯传输线​ 当走线是直角时：直角弯曲导线的有效宽度增大了，从而产生了不需要的额外寄生电容，就像是附在传输线上的一个容性负载。有了这个容性负载传输线的瞬时阻抗将会发生变化（产生阻抗不连续点），根据中间容性负载传输线章节所述，在此会产生一个反射，影响信号质量。 ​ 如上图所示，解决传输线直角的问题，有两种解决方案： 将直角做成圆角，是的传输线的宽度保持固定，改善信号反射以及信号上升沿时间的不良影响； 对直角进行斜切（45°），计算上升沿时间常数（如右下图），这个上升时间的值很小，可以满足上升沿大于100ps（差不多对应10GH以内的信号）的高速信号应用。 传输线阻抗匹配要使信号从源端完整的传输到终端，那么有三种方式： 短线模式传输函数：Sshort(ω)&#x3D; ZL&#x2F;(ZL+Zs)； 源端匹配传输函数：S源端 &#x3D; Hx(ω)； 终端匹配传输函数：S终端 &#x3D; A(ω)*Hx(ω)； 1，源端匹配源端匹配的意思是：Zs &#x3D; Z0，即源端串联电阻后使得阻抗等于传输线特征阻抗。那这样有什么好处呢？ 阻抗分压：A(ω) &#x3D; Z0(ω)&#x2F;[ Zs(ω)+Z0(ω)] &#x3D; 1&#x2F;2，信号从源端发出来幅度减半； 假设终端负载阻抗ZL为高阻（即∞），那么可得到终端反射系数：R2(ω) &#x3D; [ZL(ω)-Z0(ω)]&#x2F; [ZL(ω)+Z0(ω)] &#x3D; 1，即全反射，信号幅度是输入到终端信号幅度的2倍，算上源端发出来的1&#x2F;2，刚好是输出的信号幅度； 源端阻抗的反射系数：R1(ω) &#x3D; [Zs(ω)-Z0(ω)]&#x2F; [Zs(ω)+Z0(ω)] &#x3D; 0，即，当信号从终端反射回到源端时，信号被全部吸收；——信号从终端反射回来后，将不会再被反射到终端去，信号传输过程结束。 传输线的传输函数：S源端 &#x3D; A(ω)$\\times$Hx(ω)$\\times$[ R2(ω)+1]；将A(ω)&#x3D;1&#x2F;2， R2(ω)&#x3D;2代入传输线的传输函数；所以得到传输函数：S源端 &#x3D; Hx(ω)。——从信号的传输函数可以看到，终端接收到的信号相比于源端只是传输线本身的衰减，不会由于阻抗不连续而产生过冲等。 关于源端匹配的问题：​ 我们是否需要等待信号传输以及反射流程全部走完（2T），才能发起下次的信号传输？​ 从传输线的定义：传输线传播的只是信号的边沿，即，只有信号边沿所在位置的导线才是传输线；所以一旦信号边沿离开了源端，那么靠近源端的部分导线处于空闲状态，就可以马上发起下一次的信号传输，两者不会相互干涉； ​ 那从终端反射回来的1&#x2F;2幅值信号边沿，是否会影响到下一个传输的信号呢？​ 第二个信号与反射回的信号在相遇时会产生叠加，但是他们传播的方向不同，叠加后会相互穿越，之后还是各自保持原先的信号幅值继续传播。 2，终端匹配（1）终端并联匹配并联匹配如下图所示有如下特点： 假设源端输出阻抗很小(Zs≈0，A(ω)≈1),那么在传输线上是全幅值传播；——源端串联匹配的第一次传输是半幅值，但若Zs很小时，第一次传输的信号基本上就是全幅值。 所有反射波形在终端被并联匹配电阻抑制（R1&#x3D;Z0）；——如上分析，当线路阻抗匹配时，则不会产生反射。 接收端电压 &#x3D; 发送端电压，只有传输线延时。 ​ 从上述分析，终端并联匹配的信号传输模型更简单，传输线上所有位置的信号相等（不会出现半高电平），同时传输线充电常数比源端匹配小一半，简直就是完美的匹配拓扑。但为什么我们在实际应用中，却使用源端匹配更多呢？​ 假设输出LVTTL电平（3.3V），传输线阻抗为50ohm，所以需要在终端匹配：50ohm电阻至GND；那么在输出3.3V高电平时，在50ohm电阻上流过的电流是：3.3V&#x2F;50 &#x3D; 66mA，且终端匹配电阻上消耗功率P &#x3D; 3.3 *0.066&#x3D; 0.22W；这将导致如下3个问题： TTL&#x2F;CMOS管脚输出电流一般支持不了66mA，输出端芯片负载太大； 如果选用陶瓷贴片电阻，则至少需要1206以上封装； 一个信号线匹配需要0.22W，那么100个信号线匹配就要会浪费22W无用损耗。 （2）终端戴维南匹配​ 戴维南匹配（分离式端接匹配），如下图所示； R1和R2电阻比值控制着高低电平驱动电流的相对比例，而且R1和R2电阻值的选择，有三个约束条件： R1和R2并联阻值等于Z0； 输出电流不能大于Iohmax（最大高电平输出电流）； 输出电流不能大于Iolmax（最大低电平输出电流）。 ​ 我们常见的DDR的ADDR&#x2F;CMD线匹配，是戴维南终端匹配；可以从VDDQ电源电压分压终端端接，也可以通过VTT电源电压直接端接到ADDR&#x2F;CMD上。 3，总结我们再来所一个总结； 源端串联匹配特点： 传输线拓扑损耗（匹配电阻损耗）相对并联匹配较小，直流电压无损耗； 传输线最末端的信号是最好的，随着距离末端越远，信号边沿的台阶越明显。 源端串联匹配应用场景： 1驱1传输线拓扑； 1驱N传输线拓扑，走线延时相对信号边沿较短，或则终端负载集中在传输线的末端，其反射信号不足以到之后信号边沿出现明显的台阶； 1驱N传输线拓扑，走线很长，信号速率很低，边沿就算出现较明显的边沿，也不会影响数据的传输；例如：IIC。 终端并联匹配特点： 传输线拓扑损耗（匹配电阻损耗）大； 传输线所有位置的信号等于输出端信号，传输线上不存在反射； 信号上升RC充电延时相对较小； 终端并联匹配电阻必须放在传输线的末端。 终端并联匹配应用场景： 适用1驱N传输线拓扑，信号速率高、摆幅低（较小损耗），对负载分布无要求，适用于单向1驱N的信号；例如：DDR总线ADDR&#x2F;CMD信号； 差分信号（后面章节具体分析）。 ​","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"信号完整性","slug":"信号完整性","permalink":"https://lilongxin178.github.io/tags/%E4%BF%A1%E5%8F%B7%E5%AE%8C%E6%95%B4%E6%80%A7/"}],"author":"工程小李"},{"title":"阻容感基础----电感专题","slug":"阻容感基础----电感专题","date":"2024-06-28T06:00:00.000Z","updated":"2024-10-25T02:13:11.358Z","comments":true,"path":"2024/06/28/阻容感基础----电感专题/","permalink":"https://lilongxin178.github.io/2024/06/28/%E9%98%BB%E5%AE%B9%E6%84%9F%E5%9F%BA%E7%A1%80----%E7%94%B5%E6%84%9F%E4%B8%93%E9%A2%98/","excerpt":"","text":"阻容感基础—-电感专题关于磁场​ 首先，确定一点，电信号（包括电源，数字、模拟等信号）传播的本质是：电磁波的传播。​ 其次，有万能的右手螺旋定则：右手大拇指与四指垂直并在同一平面，四指指向电场（E）的方向，再逐渐握拳指向磁场（H）的方向，那么大拇指指向就是电磁场能量流动（S）的方向； ​ 下面将对电磁场能量流动进行推导演示： ​ 如图电阻器电流为从左向右（电场方向相同）：磁场方向根据右手定则为围绕着电阻器的圆，使用右手螺旋定则：四指指向电场（电流）方向，然后弯曲四指朝外（电阻正上方的磁场方向），那么发现此时电磁能量处处指向电阻，即电阻器周围的能量流动指向电阻。​ 由此，也可以看到：电磁能量的传播方向并不是电流方向。 ​ 并且，也有以下的一些结论： 金属导线是电磁波的波导：电磁波顺着导线在导线附近传递，距离导线越远其电磁波能量越弱； 电流顺着金属导线流动，电流越大则传输的磁场强度越大，那么传播的电磁波能量越大，如果没有导线作为媒介，那么真空或空气很难承载大的电磁波能量。 ​ 通过上述的分析，也就能理解：市电使用220V交流电，虽然电流方向在不断地交变，而电磁能量的传播方向却一直保持不变。 ​ 磁场的本质是什么？先说结论：磁场是由运动电荷或电场的变化而产生的（包括磁铁、电流磁场、电磁波） ​ 已知电流与磁场的关系：电流流过导线时，会在导线周围产生磁场，同时变化的磁场也可以产生电流。所以，可知电流联系着磁场，而电压联系着电场；电流是有磁性的，电压是有电性的。导线由于有电压（电场）会产生电流，而有电流的地方必然会产生磁场，所以有变化电场就理应产生磁场。 1，磁场基本物理定理​ 磁场本身的几个基本物理量：磁场强度H，磁感应强度B，磁通量Φ以及磁导率μ； 安培环路定理：在稳恒磁场中，沿着任何一条闭合回线L，磁场强度H的线积分值恰好等于该闭合回路所包围的电流代数和乘以磁导率。 $$\\oint Hdl&#x3D;\\sum_{i&#x3D;1}^{n}Ii ;\\quad\\oint Bdl&#x3D;\\mu*\\Sigma_{i&#x3D;1}^{n}Ii$$ ​ 安培环路定理需要满足两个条件： 电流及其分布不随时间变化； 假设某时刻电流突然从 0 变为某个值， 由于电磁场传播需要一定时间， 环路上不可能瞬间出现磁场； 空间中不能有变化的电场， 因为变化的电场也会产生磁场，就会改变环路积分的结果。 ​ 通过安培环路定理公式：计算圆电流外平面磁场强度H的大小，并通过H和磁导率μ推出磁感应强度B的大小；如果回路没有包围电流，那么此时磁场强度H为0。 磁路欧姆定律：电和磁之间存在着许多的相似性，在磁路上也存在类似于电路的欧姆定律；磁路欧姆定律用来确定磁路的磁通量Φ（电流I）、磁动势F（电动势V）和磁阻Rm（电阻R）三者之间的关系；作用在磁路上的磁动势F等于磁路内的磁通量Φ乘以磁阻Rm，F &#x3D; Φ * Rm （V &#x3D; I*R）。 铁芯的磁导率比周围空气的磁导率高很多，因此磁通量的绝大部分经过铁芯形成闭合回路，这种人为造成的磁通路径被称为磁路； 如下右图，磁阻的大小与磁路通过的导体的长度l成正比，与导体的横截面积S成反比，比例系数为1&#x2F;μ，即Rm &#x3D; l&#x2F;(μA)（类似电阻R &#x3D; ρ*l&#x2F;A）； 假设右下图为一个均匀密集缠绕的环形通电线圈，其每一匝可看作一个圆形横截面（面积为S），将每匝的圆心连成一个圆（周长为l），则线圈内部的磁感应强度方向沿该圆的切线方向；磁感应强度对该圆上其中一段路径的积分：$\\int Bdl&#x3D;BI$；由于H &#x3D; B&#x2F;μ，并定义：F &#x3D; H*l，可得F&#x2F;Rm＝BS &#x3D; Φ。 基尔霍夫第一定律：电路中任一个节点上，在任一时刻流入节点的电流之和等于流出节点的电流之和；假设进入某节点的电流为正值，离开这节点的电流为负值，则所有涉及这节点的电流的代数和等于零。对于磁路来说：穿出或进入任一闭合面的总磁通量恒等于零（或进入任一闭合面的磁通量恒等于穿出该闭合面的磁通量），即磁通连续性定律。 基尔霍夫第二定律：在任何一个闭合回路中，各元件上的电压降的代数和等于电动势的代数和，即从一点出发绕回路一周回到该点时，各段电压的代数和恒等于零，即∑U&#x3D;0。对于磁路来说：沿任何闭合磁路的总磁动势恒等于各段磁路磁位降的代数和。 ​ 从磁场和磁路的基本物理定律中，可以发现磁路与电路的相通之处。如下表所示，将：磁动势等效为电动势，磁通量等效为电流，磁阻等效为电阻；电路相关的物理定律同样也满足磁路。 如果维持恒定磁通量Φ，那么铁芯中是没有损耗的；即电路中P &#x3D; I²*R不符合磁路应用；——交变的磁通量是会造成磁介质损耗，损耗随磁芯体积、工作频率、磁通密度变化的系数成正比。 没有磁绝缘体，除了铁芯中的磁通之外，还有一部分漏磁通会散布在空气中；——这造成了变压器的漏感必然会存在，漏感也好处也有坏处。 磁导率μ不是一个常数，是磁通密度的函数； 磁路在饱和状态时为非线性，磁通量的叠加原理不适用。 2，电磁感应定律​ 电磁感应定律也叫法拉第电磁感应定律：电磁感应现象是指因磁通量变化产生感应电动势的现象。闭合电路的一部分导体在磁场里做切割磁感线的运动时，导体中就会产生电流，产生的电流称为感应电流，产生的电动势（电压）称为感应电动势。​ 且有：电路中感应电动势的大小，跟穿过这一电路的磁通变化率成正比，若感应电动势为E，则E &#x3D;n*ΔΦ&#x2F;Δt。 ​ 楞次定律：电磁感应电流产生的磁场总要阻碍引起感应电流的磁通量的变化，即磁通量变大，产生的电流有让其有变小的趋势；而磁通量变小，产生的电流有让其变大的趋势（线圈对电流的作用是：来拒去留）。 ​ 应用楞次定律判断感应电流的方向： 首先确定穿过回路的原磁通量的方向以及原磁通量是增加还是减少； 根据楞次定律的涵义，确定回路中感应电流在该回路中产生的磁通的方向；——感应电流磁场要阻碍原磁通量的变化，即：来拒去留。 根据回路电流在回路内部产生磁场的方向的规律(右手螺旋法则)，由感应电流的磁通量方向（增反减同）来确定感应电流的方向； 右手螺旋定则（安培定则）：表示电流和电流激发磁场的磁感线方向之间关系的定则。 ​ 电流、磁场以及力，其实质是能量，其根本的依据是遵循了能量守恒定律；也就是说：如果电磁感应电流方向违背了楞次定律，那么也就违背得了能量守恒定律。 电感器模型理想电感的阻抗为：$$Z_{ideal}&#x3D;j\\omega L\\$$ 和电阻的是一样的，即：$$Z_{real}&#x3D;\\frac{j\\omega L+R}{(1-\\omega^2LC)+j\\omega RC}\\$$从下图可以看出，理想的电感的阻抗是随着频率的增加而变大的。 等效电感的阻抗呈一个倒V型，正好和电容相反，倒V的最高点称为电感的自谐振点。 当系统阻尼R提供的衰减不足时，容抗和感抗相互抵消，能量在LC间来回传递，这就是谐振。 频率低于自谐振频率SRF时，电感感抗随着频率增加而增加。 频率等于自谐振频率SRF时，电感感抗达到最大。 频率高于自谐振频率SRF时，电感感抗随着频率增加而减少。 上图虚线对应电感器的一阶数学模型（理想电感器）：ZL &#x3D; jωL；根据公式可得，电感器感抗随ω的增加而线性增大。 实线对应的电感器二阶数学模型：Z &#x3D; (jωL+R)&#x2F;[(1-ω²LC)+jωRC]，此时电感器不再只是简单的电感特性，根据公式以及电感器二阶阻抗-频率特性图分析，可分为如下三个阶段： 低频阶段，电感L感值对阻抗的影响远大于寄生电容：(1-ω²LC)+ jωRC ≈ 1，所以Z &#x3D; jωL + R，电感器阻抗随ω的增大而线性增加，此时电感器呈现电感特性；——如上右图，低频段阻抗：Z &#x3D; jωL + R；在理论上低频段 DCR占电感器阻抗的比例比较大，所以在更低频率时阻抗曲线呈现水平直线。 随着ω增大到一定值（SRF）时：1 - ω²LC &#x3D; 0，ω &#x3D;1&#x2F;√(C&#x2F;L)，此时电容器阻抗Z &#x3D; (jωL+R)&#x2F; (jωRC) &#x3D; L&#x2F;(RC) – j&#x2F;√(C&#x2F;L)，此时电感器的阻抗Z达到最大值；——此工作频率称为电感器的自谐振频率-SRF；电容器用于电源滤波：需要最小阻抗，而谐振频点的阻抗最小，滤波效果最好；而电感器滤波时，需要利用其感性部分（理想电感阶段），所以需要远离自谐振频点。 ω继续增大：ω＞1&#x2F;√(C&#x2F;L)，此时可以看到寄生电容的影响开始大于电感的影响，所以随ω的增大，阻抗Z线性减小，此时电感器呈现电容特性。——单板电源系统滤波设计中，两个不同容值电容器会产生并联谐振点：大容值电容器的高频电感特性和小容值电容器的低频电容特性，形成了LC谐振，产生电源滤波特定频率的高阻抗区域。 除此之外，有以下一些结论： 电感器感值的越小，低频段阻抗越大；——低频段电感的感值：Z &#x3D; jωL+R，主要由DCR决定，而电感量越大（线圈匝数多），导线越长，DCR则越大；所以一般同封装电感器的电感越大，DCR越大。 电感器感值的越小，自谐振频率越大；——自谐振频率点：ω &#x3D;1&#x2F;√(C&#x2F;L)，电感量越大（线圈匝数多），那么线圈层间电容量就越大；相反：电感量越小，寄生电容量也越小，所以自谐振频率越高。 不同感值的电感器，自谐振频点右侧（高频段）阻抗曲线取决于寄生电容的大小（因为此时电感器呈现容性）。 电感量参数1，电感量​ 电感量是线圈本身固有特性，表示电感线圈储能效率的大小（单位电流储能大小），与电流大小无关；电感量反应了电感器储存磁能的本领，与电感线圈的匝数、几何尺寸、有无磁芯（铁芯）、磁芯的导磁率有关。用公式表示L &#x3D; μN²Ae&#x2F;Le，电感量的单位为亨（H）。具体参数如下图所示。在同等条件下：匝数（N）多电感量大，线圈直径（Ae）大电感量大，有磁芯比没磁芯（μ）电感量大，（Le） 磁路长度。​ 低频应用中呈现电感特性，而在高频特性中则呈现了电容特性（看成是一个电容器），其表现与电容器刚好成对偶关系；所以电感器的电感量与工作频率相关。 ​ 电感量精度是电感量实际值与标称之差除以标称值所得的百分数。如下图所示为行业规范标称的范围： 铁氧体电感：K档和M档；——电感量大，随频率影响大（μ），应用于开关电源电路，电源输入等几MHz以下低频滤波应用。 陶瓷电感：S档，D档，J档，K档。——电感量小，随频率影响小，应用于射频相关百MHz以上高频应用。 2，磁导率​ 磁导率：磁介质中磁感应强度与磁场强度之比；它是表征磁介质导磁性能的物理量：μ &#x3D;B&#x2F;H（B：磁感应强度，H：磁场强度）。​ ——磁导率反应了该材料能够被磁场穿透的程度。 3，电感磁芯损耗​ 电感器磁芯损耗包括：磁滞损耗和涡流损耗，以及剩余损耗。​ 电感磁芯损耗是功率材料的一个最主要的指标，它决定了整机的工作效率、温升、可靠性。 （1）磁滞损耗：当磁芯材料磁化时，转化为磁场的能量有两部分： 转化为势能，即：去掉外磁化电流时磁场能量会返回给电路，这部分能量只是暂时储存在磁芯中； 变为克服摩擦使磁芯发热消耗掉，这部分能量就是磁滞损耗。 （2）涡流损耗：交变电流I产生的磁场B也是变化的，变化的磁场B在磁芯上面产生环形的电场e，所以当电流流过磁芯便产生了损耗，称为涡流损耗。 （3）剩余损耗：由于磁化弛豫效应或磁性滞后效应引起的损耗。磁化弛豫是指在磁化或反磁化的过程中，磁化状态并不是随磁化强度的变化而立即变化到它的最终状态，而是需要一个过程，这个“时间效应”便是引起剩余损耗的原因。 4，直流电阻DCR​ 直流电阻Rdc：又称为DCR，通常指电感器的内阻，是电感器在直流下电阻值。该电阻主要是电感器导线（铜线）上的电阻，体现了电感器在工作时的铜损大小。Pcu &#x3D; I²rms *DCR。​ ——既然电感器有直流电阻DCR，那么就会有电感器的交流电阻，即电感器在交流信号应用中的电阻。那为什么直流电阻和交流电阻不一样呢？其主要源于电感导线的趋肤效应：在高频信号时电流趋于分布在导线的表面（电流实际流过导线横截面的面积变小），导致导线的实际电阻增加。 对于电感器的DCR，需要如下注意点： 同一个系列的电感器的电感量越大，DCR越大；——同一系列电感器电感量越大，则说明线圈匝数越多，铜线越长，那么DCR越大。 设计中电感器的DCR越小越好；——电感器的损耗主要有：磁芯损耗和铜损两部分；DCR影响了电感器的损耗（铜损），从节能、散热等考虑，DCR尽量小。 5，品质因数Q​ 电感器品质因数Q： 电感器储能与能耗的比值，是某一工作频率下感抗XL（XL&#x3D; ωl &#x3D; 2πfL）与其等效损耗电阻的比值；用于区分不同线圈结构的一个物理量。​ ——线圈Q值愈高，回路的损耗愈小；线圈的损耗主要与：导线的直流电阻，骨架的磁芯损耗，屏蔽罩或铁芯引起的涡流损耗，以及趋肤效应等因素有关。 ​ 品质因数Q与测试频率有关，与电感量有关；所以产品样本上对应的Q值均有对应的测试频率； 6，额定电流​ 电感器额定电流：是指电感器允许通过的最大电流；是高频、低频扼流线圈和功率电感器的重要参数。 ​ 对于功率电感器来说，额定电流有两种： 基于自我温度上升的额定电流：以元件的发热量为指标的额定电流，超出该范围时可能会导致元件破损及组件故障；——Irms：指电感器的应用额定电流，也称为温升电流，即产品应用时，表面达到一定温度（例：温升40℃）时所对应的DC电流。 基于电感值的变化率的额定电流：以电感值的下降程度为指标的额定电流，超出该范围时可能会由于纹波电流的增加而导致电路不稳定。——Isat：指磁介质的饱和电流，即电感器感量下降到一定比例（例：30%）时的电流大小。 ​ 如果电路的实际工作电流大于电感器饱和电流，会导致电感器磁芯饱和，存在如下隐患： 造成电流纹波超出后级电路最大允许规格范围，造成电源电路无法正常工作甚至损坏； 电感器额定电流（包括饱和和温升电流）选择余量不足会导致其工作时表面温度过高、整机效率降低、加速电感器本身甚至整机的老化，从而影响设备使用寿命。 ​ 电感分为开磁路和闭磁路两种，对于开磁路类型：随着直流电流的增加到规定电流值为止，呈现比较平坦的电感值，但以规定电流值为界后的电感值急剧下降。相反闭磁路类型：随着直流电流的增加，透磁率的数值逐渐减少，因此电感值缓慢下降。 ​ 屏蔽电感磁路结构为闭磁路结构：闭磁路结构是由磁性材料组成，磁阻抗非常小，代表磁芯为环形磁芯，是闭磁路结构。 ​ 非屏蔽电感磁路结构为开磁路结构：由于磁路组成结构裸露，具有非常明显的气隙，其磁阻比较的大，代表磁芯为U型、EE型磁芯。 由于屏蔽电感和非屏蔽电感磁屏蔽结构不同，在相同电感以及工作电流下，屏蔽电感器的体积要大于非屏蔽电感器；——非屏蔽电感器的磁芯会存在气隙，导致有效磁路长度远大于实际磁路，所以非屏蔽电感器的有效体积：Le*Ae也远大于屏蔽电感器，而电感器的储能容量大小与电感器有效体积成正比，同时由电感储能公式：P &#x3D;(1&#x2F;2)LI²，可得：在同样电感量和工作电流时，电感器的储能是一样的，所以非屏蔽电感器的体积要更小。 屏蔽电感器具有大功率、低电阻、大电流的特点，主要用在对EMC有着高要求的电路中，涉及到信号传输，智能计算等等，例如手机、计算机、高品质音响等等。 7，自谐振频率（SRF）​ 自谐振频率（SRF）：SRF &#x3D; f0 &#x3D; 1&#x2F;[2π√(LC)]，表示了电感器的电感值（Inductance）、感抗（Impedance）与频率的关系、。 频率低于SRF时，电感器阻抗和电感量随频率增加而增加；——一般应用中需尽量保持电感器感量的稳定，所以电感器的工作频率应远离SRF，如下图，工作频率在低于1&#x2F;2 * SRF时电感量基本保持稳定。 频率等于SRF时，电感器阻抗达到最大值；——此时电感器阻抗达到最大，并对外呈现阻性，但并非电感器的Rac和Rdc电阻体现在了阻抗上，而是电感器振荡后能量传播不出去，全部由电感器的寄生电阻所消耗。。 频率高于SRF时，电感器阻抗随频率增加而减小。——高于SRF后电感器对外呈现出电容的特性，阻抗随频率而减小。 ​ 自谐振频率应用过程中的注意点： SRF与材料、电感量有关，一般电感器的电感量越大SRF越小（同时，寄生电容随电感量的增加而增大）； 作为共模&#x2F;差模扼流电感器使用时，让信号的最高频率在电感自谐振频率处，消耗该频点的能量； 作为匹配滤波器使用时，电感器的电感值在信号带宽内应尽可能的恒定，电感的SRF取信号最大频率的10倍（经验值）。 8，临界温度Tc​ 并非在任何温度下，磁性材料都具有磁性；磁性材料具有一个临界温度Tc（即居里温度）：在这个温度以上，由于高温下原子的剧烈热运动，原子磁矩的排列是混乱无序，铁磁物质的磁化强度随温度升高而下降，它确定了磁性器件工作的上限温度。超过居里温度，磁芯的磁导率会大大减小直至消失。 电感器的相关知识1，趋肤效应​ 趋肤效应对PCB高速信号走线距离计算和损耗都有较大的影响，一般在信号完整性中有所提及。趋肤效应对PCB走线或电感器中的不同在于应用的频率不同：PCB走线很扁平，所以发生趋肤效应时的频率就非常高（&gt;10MHz），而电感器铜导线则是圆形线缆，其直径远大于PCB走线，产生趋肤效应时的频率就低很多（几百KHz）。 ​ 趋肤效应，就是随着在导线中信号频率的升高，决定电流分布的阻抗由原来的电阻变成了感抗，导致电流趋于聚集到导体的表面的现象。聚集程度随频率的增加按√f规律加大，所以电流聚集会导致铜导线有效电阻的增加，此时导线对电流表现出来的就是：交流电阻。​ ——当导线中的信号频率增加到一定大小时，导线中心位置将没有电流通过，电流流过导线的实际横截面积减小了，也就是说对该频率信号的电流来说，其导线电阻增加了。 2，气隙磁芯​ 无气隙磁芯的有效磁路长度基本上就是磁芯中心虚圆的周长：Le，有效面积几乎是磁芯的几何截面积：Ae；此时磁阻$\\mathrm{R\\Phi}&#x3D;\\mathrm{Le}&#x2F;(\\mathrm{\\mu c}^{}\\mathrm{Ae})$。如下图所示磁芯有气隙后，磁阻会增加至$\\mathrm{R\\Phi}&#x3D;\\mathrm{Lgc}&#x2F;(\\mathrm{\\mu c}^{}\\mathrm{Ae})$；其中$lgc &#x3D; Le + μr\\times Lg$；μr &#x3D;μc&#x2F;μ0。事实上Lgc是气隙磁芯的有效长度，其远大于无气隙磁芯长度Le。​ 又因为，Lgc &#x3D; Lc +μr$\\times$Lg，即气隙磁芯的有效磁路长度增加了，虽然Lg非常小，但是μr可达几千，所以磁路长度Lgc值基本上取决于μr*Lg。 （1）气隙对磁路长度影响的推导： 根据安培环路定律：磁场强度H的闭环积分等于包围的安匝数：Hc$\\times$Lc + Hg+Lg &#x3D; N*I； 由于B &#x3D; μ$\\times$H，而Φ &#x3D; B$\\times$A，可得：Φ&#x2F;(μc$\\times$Ac) $\\times$Lc +Φ&#x2F;(μ0$\\times$Ac)$\\times$Lg &#x3D; N*I。 ——根据基尔霍夫定律，磁通Φ（相当于电流）在磁路中必须连续，且磁芯与气隙中的Ae相同，所以Φc &#x3D; Φg &#x3D; Φ，Ag &#x3D; Ac；气隙的磁导率为真空磁导率μ0， 计算可得Φ &#x3D; (N$\\times$I)&#x2F;[Lc&#x2F;(μc$\\times$Ac)+Lg&#x2F;(μ0$\\times$Ac)] &#x3D; FΦ&#x2F;RΦ，所以RΦ&#x3D; Rc + Rg &#x3D; Lc&#x2F;(μc$\\times$Ac) + Lg&#x2F;(μ0$\\times$Ac) &#x3D; [1&#x2F;(μ0$\\times$Ac)]$\\times$[(Lc&#x2F;μr)+Lg] &#x3D; [1&#x2F;(Ac$\\times$μ0$\\times$μr)]$\\times$(Lc+ μr$\\times$Lg) &#x3D;Lgc&#x2F;(Ac$\\times$μr)； （2）增加了磁路长度的实际用处： 有气隙磁芯的有效体积从Ae$\\times$Le变成了Ae*Lgc，直观上体积增加了z倍，意味着气隙磁芯体积比实际见到的磁芯物理体积要大的多； 气隙实际上成为了磁芯体积的倍增器，而且只要能产生足够强的磁场，就有希望存储更多的能量。——实际上大部分磁场能量存储在了气隙上。 加气隙后新的有效长度除以加气隙之前的就的有效长度，该比例称为z因数：z &#x3D;Lgc&#x2F;Le &#x3D; (Le+μr$\\times$Lg)&#x2F;Le ≈ μr*Lg&#x2F;Le，其中Le &#x3D; Lg+Lc；所以净磁阻从无气隙磁芯的Re &#x3D; Le&#x2F;(μr$\\times$Ae)增加到了有气隙磁芯的Rgc &#x3D; z$\\times$Le&#x2F;(μr$\\times$Ae)。——假设为μr为1000，气隙长度占磁芯长度的5%，那么有效磁路长度L ≈ 1000$\\times$5% &#x3D; 50，磁路长度增加了50倍，磁阻也增加了50倍。 气隙使得电感器的磁阻增加了，所以磁通密度（磁感应强度）B&#x3D; Φ&#x2F;Ae &#x3D; N$\\times$I&#x2F;(Ae$\\times$RΦ)，从无气隙磁芯时的μc$\\times$N$\\times$I&#x2F;Le降至有气隙磁芯时的μc$\\times$N$\\times$I&#x2F;(z$\\times$Le) （3）比较有气隙磁芯和无气隙磁芯的磁通密度B和磁通强度H： 根据基尔霍夫定律，磁通（相当于电流）在磁路中必须连续，而Φ &#x3D; B$\\times$Ae，磁芯与气隙的Ae相同，并且磁力线穿过不同材料时是连续的，所以Bg &#x3D; Bc &#x3D; B &#x3D;μc$\\times$N$\\times$I&#x2F;Lgc； 由于H &#x3D;B&#x2F;μ，磁芯中的磁导率为μc而气隙中的磁导率为μ0，它们相差μr &#x3D; μc&#x2F;μ0 倍（相对磁导率），所以Hc &#x3D; B&#x2F;μc &#x3D; N$\\times$I&#x2F;Lgc，Hg &#x3D; B&#x2F;μ0 &#x3D; μr*(N$\\times$I&#x2F;Lgc)；气隙磁芯的磁芯与气隙的磁场强度H不同（磁场强度在气隙和磁芯之间不连续，有突变），相差一个相对磁导率系数μr； 对于有气隙的磁芯，相比于同尺寸的无气隙磁芯，其磁通密度B下降了z倍，而且磁芯的磁场强度H也一样。 （4）磁芯气隙如何获得更多的能量储存： 根据电感能量储存的公式ε&#x3D; 1&#x2F;2$\\times$B$\\times$H$\\times$V(体积)，对于无气隙磁芯来说H &#x3D; B&#x2F;μc，那么εe&#x3D; 1&#x2F;2$\\times$B²$\\times$Ve&#x2F;μc； 对于有气隙磁芯来说，需要分为两部分： 气隙部分：εg &#x3D; 1&#x2F;2$\\times$B$\\times$Hg$\\times$V &#x3D; 1&#x2F;2$\\times$(B²$\\times$Ae$\\times$Lg&#x2F;μ0)； 磁芯部分：εc &#x3D; 1&#x2F;2$\\times$B$\\times$Hc$\\times$V &#x3D;1&#x2F;2$\\times$(B²$\\times$Ae$\\times$Lg&#x2F;μc)； 气隙磁芯的总能量储存εgc &#x3D; εg + εc &#x3D;1&#x2F;2$\\times$(B²$\\times$Ae²)$\\times$[Lg&#x2F;(μ0$\\times$Ae) + Lc&#x2F;(μc$\\times$Ae)] &#x3D; 1&#x2F;2$\\times$(B²$\\times$Ae²)* RΦ&#x3D; 1&#x2F;2* RΦ$\\times$Φ²。（Φ&#x3D; BS）。——该磁芯储存能量公式：ε &#x3D; 1&#x2F;2$\\times$Φ²$\\times$ RΦ；类似于电气消耗能量：P &#x3D; I²$\\times$R；因为磁通量与电流等效，而磁阻与电阻的表现类似，但磁阻具有储能能力而无耗能特性。又由于电感器储能量定义：ε &#x3D; 1&#x2F;2$\\times$I²$\\times$L，与ε &#x3D; 1&#x2F;2$\\times$Φ²$\\times$ RΦ结合，可以推导出电感量L &#x3D;(μc$\\times$N²$\\times$Ae)&#x2F;Le。 当磁芯增加气隙时，如果安匝数（N$\\times$I）保持不变（即，磁动势不变），那么气隙磁芯的磁通密度B下降1&#x2F;z，而取决于B²$\\times$z的储存能量也以1&#x2F;z下降，并不能增加能量储存； 如果要使磁通密度B保持不变，即安匝数（N*I）增加z倍，那么能量存储以系数z倍增加。 电感器分类1，磁芯分类（1）磁性材料分类 矩磁材料：具有矩形磁滞回线、剩余磁感强度Br和工作时最大磁感应强度Bm的比值,即Br&#x2F;Bm接近于1；——在两个方向上的剩磁可用于表示计算机二进的“0”和“1”，适合于制成“记忆”元件。 压磁材料：具有压磁效应的材料称为压磁材料，可以用压磁材料制成来感知其磁性（磁导率）变化的传感器，从而检测其内部应力和外部载荷的变化。 硬磁材料又叫永磁材料：是指那些被磁化后能长久保持高磁性，不易失去磁性的材料；其Hc大，Br大，磁滞回线的面积大，损耗大。——例如高碳钢，铝镍钴合金，钛钴合金等，用于制造磁带（录音&#x2F;录像）、磁盘等。 软磁材料具有：磁导率大，易磁化、易退磁，磁饱和强度大，Hc小，B-H磁滞回线面积窄长，磁芯损耗小等特点。——如图所示，包括磁纯铁，铁粉芯，硅钢坡莫合金(Fe，Ni)铁氧体等。软磁材料相对于硬磁材料特点如下图所示。 （2）对于软磁材料，有如下电感器常用材料： 铁氧体（Ferrite）：以Fe2O3为主要成分，有Mn-Zn，Cu-Zn，Ni-Zn等；——其中Mn-Zn（锰-锌）最为常用，具有窄而长的磁滞回线，高磁导率，低矫顽力等特点。 优点：成型容易，成本低，电阻率高，高频损耗较小； 缺点：饱和磁通较低（4000~5000高斯） ，居里温度点较低； 应用：适于10K－500KHz频率，较低功率的应用；常用作高频变压器，小功率的储能电感器等，高磁导率的铁氧体也常用作EMI共模电感。 铁粉芯（Iron Powder）：由铁磁性粉粒与绝缘介质混合压制而成的一种软磁材料，存在分散气隙（效果类似磁芯气隙）；——常用铁粉芯是由碳基铁磁粉及树脂碳基铁磁粉构成。 优点：磁导率随频率和直流电流的变化相对稳定，成本较低； 缺点：磁导率低，高频下损耗高，存在高温老化问题； 应用：因其直流电流叠加性能好，常用于工频或直流中叠加高频成份的滤波和储能电感：PFC电感，INV电感，BUCK电路的储能电感器等。 硅钢片（Silicon Steel）：在纯铁中加入少量的硅（一般在4.5%以下）形成的铁硅系合金。 优点：易于生产，成本低，饱和磁通较高（约12000高斯）。 缺点：电阻率低，高频涡流损耗大。 应用：一般使用频率不大于400Hz，在低频、大功率下最为适用。常用做电力变压器，低频电感，CT等。 铁镍合金（又称坡莫合金或MPP）：坡莫合金常指铁镍系合金，镍含量在30~90%范围内。 优点：磁导率很高，损耗很低，高频性能好； 缺点：成本高； 应用：脉冲变压器，电感铁芯和功能性磁材料。 铁硅铝粉芯（又称Sendust或Kool Mu）：由约9%铝、5%硅、85%铁粉构成。 优点：损耗较低，性价比较优； 缺点：价格比铁粉芯略高； 应用：其直流电流叠加性能较好，损耗较铁粉芯低，可代替铁粉芯作为UPS中PFC的电感器和逆变器的输出滤波电感器。 2，电感器分类​ 根据电感器的结构不同可以分为：绕线型电感器（分：屏蔽和非屏蔽），一体成型电感器，叠层片式电感器以及薄膜电感器。​ 在开关电源领域，一体成型电感器和绕线型电感器占大多数，而叠层片式电感器（包括磁珠）和薄膜电感器主要用于EMI滤波和RF应用。 （1）叠层片式电感器1.MLCI​ MLCI(MultiLayer Chip Inductor)：用铁氧体浆料（软磁铁氧体陶瓷）和导体浆料交替印刷、叠层、烧结，形成闭合磁路；MLCI采用了厚膜多层钝化技术和叠层生产工艺，实现了超小型表面安装（制造工艺同MLCC类似）。叠层片式电感一般尺寸小、便于安装和电路小型化，所以在单板电源滤波电路中应用非常广泛。​ ——其中铁氧体是Fe2O3、NiO、ZnO、CuO等多种氧化物构成陶瓷材料，经烧结的铁氧体硬度高，磁导率高，电阻率高；铁氧体电感器中氧化物比例不同，可获得磁导率不同，使用磁导率不同的铁氧体制成形状尺寸、工作频段不同的电感器，在不同频段并保持较低的能量损耗。 叠层片式电感器的特点： 具有良好的磁屏蔽性，烧结密度高，可靠性高，耐热好，可焊性好，机械强度好；——线圈绕组被封闭在磁体内部，构成封闭磁环回路，所以磁场泄露很小。 合格率低，成本高，电感量较小，Q值较低。 2.叠层片式磁珠​ MLCB(MultiLayer Chip Bead)：叠层片式磁珠是叠层片式电感器的一种，其制作工艺和片感完全相同；主要用于消除存在于传输线路中的高频噪声。磁珠主要原料为铁氧体，高频噪声电流在铁氧体磁芯上产生的高速变化的交变磁场，并在磁芯中产生非常大的涡流损耗。​ 磁珠工作原理：导线中的高频交变电流（高频噪声）产生了变化的磁场，同时变化的磁场又会产生涡流电场（电场与磁场垂直），如果磁芯的电阻较小，就会产生较大的涡流损耗，从而将特定频段的噪声以热能的形式释放掉。 3.叠层片式电感器与磁珠的对比​ 磁珠就器件结构本质来说也是电感器的一种，只是所使用的磁芯材料与电感器有所不同；磁珠更加侧重于对某一频段噪声的吸收，所以磁珠就其功能来说是耗能元件，更类似于电阻器。电感器重点关注的参数是：电感量（L），品质因数（Q），自谐振频率（SRF）；而磁珠关注的参数是：阻抗（Z），电抗（XL），电阻（R）。 4.叠层片式电感器和磁珠的对比差别如下： 电感器的单位是亨特(H)，磁珠的单位是欧姆(ohm)；——假如以100MHz 为标准，比如磁珠标称：600Ω@100MHz，意思就是在100MHz 频率的时候磁珠的阻抗相当于600Ω。 电感器是储能元件，磁珠是能消耗（涡流损耗）元件； 电感器在高频段呈高感抗特性（XL &#x3D; jωL，反射高频信号），低频段呈低阻性（DCR）；磁珠在高频段（&gt;50MHz）呈高阻性，在低频呈低感抗特性； 电感器多用于电源滤波回路，侧重于抑止CE（&lt;30MHz）干扰；磁珠多用于电源以及信号回路高频噪声抑制，主要用于RE（&gt;30MHz）的抑制。——电感器用在LC振荡电路、中低频的滤波电路等，其应用频率范围很少超过50MHz；磁珠用来吸收超高频信号。 5.叠层片式电感器与绕线片式电感器特点对比​ 绕线片式电感器的内部是磁芯+线圈绕组的结构，外部通过塑料外壳保护或直接裸露；绕线片式电感器的磁路是不闭合的，但其寄生电容小，Q值高，稳定性好，常应用于中高频电路。 （2）功率电感器​ 功率电感器分为两类：一类是用于信号系统的RF电感器，另一类是用于电源系统的功率电感器。具有低直流阻抗Rdc，高Q值，大电流的特点 ​ 功率电感更偏向于参考以下几个参数： 电感量L： 电感器的标称感值，由于分布电容的存在，感量会随频率的变化而变化；功率电感器的精度一般为M（±20%）档或者N（±30%）档； 直流电阻DCR： 指产品电极之间所用漆包线的总直流电阻； 饱和电流Isat：指电感器在连续通直流电流的情况下，电感的电感量会下降，一般为电感量下降30%时的电流值规格； 温升电流Irms：指电感器在连续通直流电流的情况下，电感表面的温度会上升，一般按照上升40℃时候的电流值来设定规格； SRF：指由于电感及电感器本身分布电容的相互作用，使电感在某频率下达到谐振，功率电感要求使用在自谐频率以下（1&#x2F;10的SRF）。 1.功率电感器类型 金属合金绕线型(一体成型)电感器：采用绕线和涂布了树脂的金属磁性粉热压而成电感器。金属磁性材料与铁氧体材相比磁导率较低，但具有出色的直流叠加特性（磁饱和强度更大），属于适合大电流的磁芯材料。一体成型电感器磁屏蔽性能很好，漏磁非常小，适合应用于对磁场干扰敏感的电路（模拟信号，高速信号等）。——一体成型的磁芯内部金属磁性粉通过绝缘树脂材料包裹进行绝缘，所以磁性粉之间存在间隙，类似磁芯气隙的作用。 铁氧体绕线型电感器：将导线在铁氧体磁芯外部盘绕成螺旋状。铜导线上涂布了磁性树脂，树脂涂层的目的是减少漏磁通，提高电感磁通量的获取效率和强度；铁氧体的导磁率很高，适合高电感量领域使用。 铁氧体多层型电感器：包括铁氧体材料技术、内部电极形成技术、电路设计技术、叠层技术；依靠磁路间隙形成技术，抑制磁饱和，实现了优异的直流叠加特性。实现需要小型化和薄型化领域的产品线。 ​ 如图所示，对于铁氧体绕线型电感器和金属合金绕线型(一体成型)电感器，根据电感器屏蔽程度的不同，又可以分为如下多种类型：无屏蔽电感器，带磁屏蔽罩电感器，树脂涂层屏蔽电感器，一体成型电感器。 2.一体成型电感器优缺点如下：优点： 通过铁粉模压成型而成，相同封装下散热性能更好，更易实现大的额定电流；——压铸成型的生产工艺方式，更适合批量自动化生产。 不易产生磁饱和，具备出色的直流叠加特性； 相较磁封胶结构、带磁屏蔽以及叠层片式电感器具有更好的磁屏蔽效果； 有很好的温度特性，温度对金属磁性材料导磁率的影响较小。 同样尺寸和L值的一体成型电感在开关电源中损耗更少，效率更高；与铁氧体多层型测试结果相比，约为3% 缺点： 由于其磁芯材料是铁粉合金，所以在长期高温、高湿环境中相对更加容易生锈； 磁芯材料是铁粉外包裹绝缘树脂组成，在高压下可能会击穿包裹铁粉的绝缘层，所以一体成型电感器有额定工作电压的要求。——一体成型电感器需要关注电感器规格资料中最大工作电压的要求，避免电感器在实际应用中过压击穿失效。 （3）薄膜电感器​ 薄膜电感器：一种采用积层结构和真空薄膜工艺制作的电感器；它的特点如下： 可靠性高（高稳定性），易于集成化和片式化； 体积超小（0603&#x2F;0402），电气性能高； 高精度； 高Q值，高SRF。 ​ 适用于移动通信设备小型、轻量化趋势，感值偏差较小以及Q值高的RF电路的耦合和共振。 （4）共模电感器（共模扼流圈）​ 共模电感器(Common mode Choke)：以铁氧体为磁芯的共模干扰抑制器件，它由两个尺寸相同，匝数相同的线圈对称地绕制在同一个铁氧体环形磁芯上，形成一个四端器件，要对于共模信号呈现出大电感具有抑制作用，而对于差模信号呈现出很小的漏电感几乎不起作用。 1.工作原理：​ 流过共模电流时磁环中的磁通相互叠加，从而具有相当大的电感量，对共模电流起到抑制作用，而当两线圈流过差模电流时，磁环中的磁通相互抵消，几乎没有电感量，所以差模电流可以无衰减地通过。 所谓共模信号是两个幅度相等、相位相同的信号；如下图所示，对于共模信号（I1和I2电流大小相等，方向相同），那么I1和I2产生的磁力线的方向相同，且当I1 &#x3D; I2且电流方向相同时，穿过磁芯的磁力线为两倍，对于共模电感器来说，其电感量就为L+M——共模信号一般来自电网，共模信号会影响电路板的正常工作，也会以传导干扰（CE）的形式干扰周围环境。 如下图所示，磁力线方向可以根据万能的右手螺旋法则获得，当共模线圈中流过相同方向电流时，I1和I2所产生的磁力线方向相同（如下右图所示），穿过磁芯的磁力线就会被叠加，对于共模电感其来说其电感量也越大；——Φ &#x3D; BS，共模电流产生的磁通量方向相同，所以磁通量变大，L &#x3D; NΦ&#x2F;I，对于线圈1来说I1电流对应I1+I2&#x3D; 2I1的磁通量，所以电感量加倍了。 所谓差模信号是两个幅度相等、相位相反的信号；如下图所示，对于差模信号（I1和I2电流大小相等，方向相反），那么I1和I2产生的磁力线的方向相反，且当I1 &#x3D; I2且电流反向相反时，穿过磁芯的磁力线为0（两个线圈完全对称），对于共模电感器来说，其电感量就为0。 ——这正是电源输入接口使用共模电感器的原因，电源电流输入和GND电流输出，它们大小相等、方向相反，所以共模电感器对电源正常工作的电流没有任何作用。 共模电感器的模型如下图所示，如果共模信号的频率太高，那么输入和输出线之间的寄生电容将对磁芯产生旁路的作用，从而降低共模电感的有效性。 ——共模电感的应用是有频率限制范围的，只能抑制某频段内的共模噪声。 2.设计原则设计共模电感器时，我们需要考虑符合如下原则： 电路正常工作状态下的额定电流，不会达到共模电感器的磁饱和状态；——一旦达到磁饱和状态，共模电感就失去了对噪声的抑制能力。 高频阻抗足够大（自谐振点要高），且有一定的频宽，且对工作频率信号电流阻抗较小；——如果应用于输入电源的共模噪声滤波，其最高频率为30MHz以下（CE）。 温度系数要小； 直流阻抗（Rdc）要尽量小；——虽然要对共模信号抑制，但对差模信号的损耗要越小越好，例如对于输入电源共模电感器应用，电源和GND线是差模信号，共模电感器的RDC越大，那么损耗越大。 电感值稳定，感应电感量尽量大； 绕阻之间绝缘性能满足安规要求； ——共模电感一般用于对外接口（电源接口、信号接口等），会接触到高压冲击信号，所以其绝缘性能必须满足安规要求，避免共模电感器损坏。 线圈尽可能单层绕制，减小线圈寄生电容，增强线圈对瞬时过压承受能力。——线圈间寄生电容越大，共模电感器越容易通过电容被击穿，大能量浪涌电压穿透共模电感器传递到电路内部，从而起不到共模防护的作用。 （5）磁环​ 磁环是一个环状的导磁体，是电子电路中常用的抗干扰元件，对于高频噪声有很好的抑制作用。一般使用铁氧体材料制成，是损耗式滤波器，主要用于抑制线缆上的传导干扰；其工作原理是：在不同的频率下有不同的阻抗特性：在低频时阻抗很小，当信号频率升高磁环表现的损耗急剧升高。​ ——从对磁环的描述来看，其工作原理与磁珠非常类似：都是利用磁芯涡流损耗，来损耗线路中的高频信号噪声。​ 磁环与其它电感器件有非常明显的不同——它与电路之间没有电气连接，只是一个单纯的磁芯。所以我们也能猜出，磁环并不是用在单板电路中，而是用于设备线缆上：将电源线、信号线（网线&#x2F;电话线&#x2F;DVI线等等）绕在磁环上，避免EMI干扰。 （6）变压器​ 变压器就其本质来说也是一种电感器，利用电磁互感应来变换电路中交流电压、电流和阻抗特性的器件。​ 变压器的原理是：当初级线圈中通有交流电流时，铁芯（或磁芯）中便产生交流磁通，使次级线圈中感应出电压。​ ——根据电磁感应原理，如下图所示，当变压器输入交流电压Vin时，其原边感应电压Vin &#x3D; -N1* dΦ&#x2F;dt，副边感应电压为Vout &#x3D; -N2dΦ&#x2F;dt；由于原边和副边线圈共用1个磁芯（不考虑漏磁），其通过原边和副边的磁通量变化相同，所以Vout &#x3D; -N2$\\times$(-Vin&#x2F;N1) &#x3D; Vin$\\times$N2&#x2F;N1，可得Vout&#x2F;Vin &#x3D; N2&#x2F;N1 &#x3D; n（匝数比）。所以对于理想变压器原理：其绕组匝数比不同最终导致的是各绕组之间的电压比不同，与绕组是否流过电流无关；Pin &#x3D; Pout，Vin * Iin &#x3D; Vout * Iout，所以：Iout&#x2F;Iin &#x3D; Vin&#x2F;Vout &#x3D; N1&#x2F;N2。 ​ 变压器的结构：由铁芯（或磁芯）和线圈组成，线圈有两个或两个以上的绕组，其中接电源的绕组叫初级线圈（原边），其余的绕组叫次级线圈（副边）。变压器的能量转换并非100%，就算是副边空载也一样存在损耗，称之为空载损耗； 1.变压器分类 按冷却方式分类：干式（自冷）变压器、油浸（自冷）变压器、氟化物（蒸发冷却）变压器。 按防潮方式分类：开放式变压器、灌封式变压器、密封式变压器。 按铁芯或线圈结构分类：芯式变压器、壳式变压器、环型变压器、金属箔变压器。——壳式变压器铁芯包围住线圈，形成一个外壳；而芯式变压器铁芯大部分在线圈之中，只有一部分在线圈外作为磁回路。 按电源相数分类：单相变压器、三相变压器、多相变压器。 按用途分类：电源变压器、调压变压器、音频变压器、中频变压器、高频变压器、脉冲变压器。 2.变压器结构变压器主要由：磁芯，骨架，漆包线，胶带，套管，铜皮，绝缘油等构成 磁芯材料的选择依据：1，工作频率范围；2，饱和磁密度（磁感应强度）大小；3，磁芯的损耗。 磁芯形状的选择依据：1，功率密度要求；2，成品高度的限制；3，绕阻的多少；4，漆包线的引出形式。 变压器绕线：主要关注绕线方式以及漆包线的选择 3.变压器参数 额定功率：在规定频率和电压下，变压器长期工作而不超过规定温升的最大输出功率； 额定功率包含部分无功功率，单位为VA，一般在数百VA以下； 额定功率与磁芯体积、绕组导线直径等有关：同样情况下，磁芯体积越大，导线越粗，额定功率也越大。 工作频率：是变压器传输不同频率信号能力的重要参数，变压器磁芯&#x2F;铁芯损耗与频率关系很大，故应根据使用频率来设计和使用，这种频率称工作频率。—— 加在变压器上的电压频率若在其频率范围以外时，可能出现工作时温度过高或不能正常工作等现象。 额定电压：在变压器线圈上所允许施加的最大电压；—— 变压器长期、可靠、稳定运行所能承受的最大工作电压。 额定电流：变压器在额定容量下，长期可靠、稳定运行所允许通过的最大电流。 电压比（K）：指变压器初级电压和次级电压的比值：空载电压比和负载电压比；——理想变压器的电压比跟空载或负载无关，但是实际绕组铜线的损耗（压降）、磁芯损耗以及漏感在空载和负载条件下不同，造成了空载电压比和负载电压比的差别。 效率：指在额定负载的情况下，副边功率P2与原边功率P1比值的百分比：η &#x3D;P1&#x2F;P2；一般变压器的额定功率愈大，效率就愈高。 漏电感：变压器原边绕组中电流产生的磁力线不可能全部都通过副边绕组，而不通过副边绕组的磁力线就叫漏磁通；由于漏磁通而产生的电感，称为漏感。 空载电流：变压器次级开路时，原边仍有一定的电流，这部分电流称为空载电流。空载电流由磁化电流（产生磁通）和铁损电流（由铁芯&#x2F;磁芯损耗引起）组成。对于50Hz电源变压器而言，空载电流基本上等于磁化电流； 空载损耗：指变压器副边开路时，在原边测得功率损耗；主要损耗是铁芯&#x2F;磁芯损耗，其次是空载电流在原边绕组铜阻上产生的损耗（绕组损耗），这部分损耗很小，可以忽略不计。——铁芯&#x2F;磁芯损耗由磁滞损耗和涡流损耗组成；磁滞损耗与导磁材料的磁化曲线面积成正比，与磁通密度的平方成正比；而涡流损耗与磁通密度、导磁材料厚度以及频率的平方成正比；降低空载损耗就要降低磁通密度（B），其结果导致导磁材料的重量增加；或者采用高导磁，低损耗的导磁材料，或者采用厚度更薄的导磁材料。 绝缘电阻：表示变压器各线圈之间、各线圈与铁芯之间的绝缘性能好坏的参数。 绝缘电阻的高低与所使用的绝缘材料的性能、温度高低和潮湿程度有关； 如果电源变压器的绝缘电阻太低，就可能出现一次绕组与二次绕组间的短路，造成电气设备的损坏，外壳带电的危险。——对于电源变压器，绝缘电阻应在10MΩ以上。 （7）网络隔离变压器​ 网络变压器又称为网络隔离变压器，由于以太网是常用对外通信接口，网络变压器的使用也是非常的多，同时其种类也非常多。 1.网络变压器主要有三个作用： 传输数据：把PHY送出来的差分信号用差模耦合的线圈耦合滤波以增强信号，并通过电磁场的转换耦合到不同电平的连接网线的另外一端；——有两部分功能：1，滤除杂波；2，不同电平之间的转换（AC耦合）； 隔离：对网线连接的不同网络设备不同电平进行隔离，防止不同电压（不同参考地或浮地）通过网线传输损坏设备； 浪涌防护：对设备起到一定的共模浪涌防护作用。 电感器应用1，磁珠的应用​ 磁珠主要用于对传导（CE）&#x2F;辐射（RE）干扰的抑制。​ ——电磁干扰（EMI）分为：传导干扰（CE）和辐射干扰（RE），主要差别在于传导干扰（CE）频段集中在30MHz以下，通过电缆为载体传播；辐射干扰（RE）频段在30MHz以上，通过空间辐射方式传播。 信号（data）与噪声（noise）的频率分布不同：一般信号工作于磁珠低频低阻区域，而噪声频段分布在磁珠的高阻区，从而达到有效抑制噪声电平的效果； 如上图所示，对信号进行低通滤波：噪声频率越大则阻抗越大（阻抗来自于磁芯材料的损耗），从而噪声通过后的衰减越大；——一般信号的频率&lt;10MHz，抑制噪声信号的频率&lt;2GHz（高频磁珠可以达到2G~3GHz范围）。 通用磁珠：一般通流能力&lt;0.5A； 尖峰磁珠：用于屏蔽确定频率的强噪声； 大电流磁珠：用于电源电路、大电流电路的噪声屏蔽，一般通流能力&gt;0.5A。 根据不同磁珠的不同特性，磁珠可以应用于不同的硬件电路设计中： 大电流磁珠最常用于DC电源的传导干扰抑制：应用在单板内芯片端电源输入管脚的噪声抑制，需要明确的是这种抑制是双向的：既抑制芯片电源干扰到单板电源，又阻止单板电源干扰到芯片电源管脚。如下图所示，电源上存在高频噪声，其频段为50MHz~250MHz，为了避免芯片受到板级电源平面上的高频噪声干扰，在芯片电源输入管脚端增加磁珠滤波（一般为π型滤波）。 数字电路的干扰抑制：数字信号有丰富的高频谐波，容易产生辐射干扰，通过选择不同型号的磁珠来抑制不同的高频分量；这种硬件设计主要用在对外接口信号线上，防止噪声通过对外接口信号线传播到设备外面，造成RE超标。 一般传导干扰（CE）以差模方式传播，辐射干扰（RE）以共模方式传播，所以采用不同的方式进行抑制；高速数字信号，如USB2.0等，产生的干扰以辐射干扰（RE）噪声为主，可采用共模磁珠抑制，同时也可以改善信号质量。 2，叠层片式电感器的应用​ 叠层片式电感器的选择，须兼顾较小的电感量波动和较高的品质因数Q；中低频片式电感器采用铁氧体材料制作（高磁导率的黑色瓷体），高频片感采用陶瓷材料制作（低磁导率的白色瓷体）。叠层片式电感器由于体型较小，其额定电流（最大工作电流）一般小于0.5A；感量一般在nHuH级别，精度J&#x3D;±5% K&#x3D;±10% M&#x3D;±20%，Q值一般为4070。 ​ 根据前期电感器特性的分析以及电感器实际应用，电感器需要工作在感值较稳定，感抗相对较大（达到良好抑制作用），Q值也相对较大的区域。​ 叠层片式电感器一般用于RF滤波电路，由LC组合构成，同时还有阻抗匹配的功能。工作频率较高时，要求电感器有较高的Q值与极高的L精度，以确保较低的插入损耗。 3，功率电感器&#x2F;变压器的应用 电感器的感值L的大小，主要影响开关电源输出纹波电流∆IL的大小：感值高纹波电流小，感值低则纹波电流大；同时纹波电流决定了磁芯损耗的大小； 功率电感器的额定电，流选择Isat和Irms中较小的值，一旦超过额定电流，电感器性能无法保障，电感器在Buck开关电源中最大电流Imax &#x3D; Io + ∆IL&#x2F;2； DCR是电感器直流电阻值，是电感器在开关电源中损耗的重要组成部分，直流阻抗值越小越好； 屏蔽电感器与非屏蔽电感器对外部的电路影响不同，同时非屏蔽电感器容易受到外部磁性元件或PCB铜皮的影响,所以尽可能使用磁屏蔽封装功率电感器。 4，网络变压器的应用网络变压器的使用，首先需要根据10M、100M、1000M不同的速率来选择合适的变压器。 我们在使用网络变压器时，看到变压器中间抽头的接线方式有很多种，这主要是由所使用PHY芯片的UTP驱动类型决定（参考PHY芯片资料推荐连接方式）： 如果是电流驱动，就需要将网络变压器抽头接至电源；电源具体接多少，取决于PHY芯片的UTP端口电平；电流驱动类型驱动变压器的工作原理。 如果是电压驱动，直接接一个电容到GND即可；其工作原理如下图所示。","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"器件类","slug":"器件类","permalink":"https://lilongxin178.github.io/tags/%E5%99%A8%E4%BB%B6%E7%B1%BB/"}],"author":"工程小李"},{"title":"阻容感基础----电容专题","slug":"阻容感基础----电容专题","date":"2024-06-23T06:00:00.000Z","updated":"2024-10-24T08:21:31.384Z","comments":true,"path":"2024/06/23/阻容感基础----电容专题/","permalink":"https://lilongxin178.github.io/2024/06/23/%E9%98%BB%E5%AE%B9%E6%84%9F%E5%9F%BA%E7%A1%80----%E7%94%B5%E5%AE%B9%E4%B8%93%E9%A2%98/","excerpt":"","text":"阻容感基础—-电容专题理想电容器的阻抗Z公式为：$$Z_{ideal}&#x3D;\\frac1{j\\omega c}&#x3D;\\frac1{j2\\pi fc} \\$$阻抗大小|Z|如下图所示，与频率呈反比，随着频率增大，阻抗减小，由于理想电容器中无损耗，故等效串联电阻(ESR)为零。 电容实际等效模型理想的电容器在实际中是不存在的，电容的实际模型是一个ESR串联一个ESL，再串联一个电容，ESR是等效串联电阻，ESL是等效串联电感，C是理想的电容。 所以上述模型的复阻抗为：$$Z&#x3D;ESR+j2\\pi fESL+\\frac1{j2\\pi fc}&#x3D;ESR+j(2\\pi fESL-\\frac1{2\\pi fc})\\$$ $$2\\pi fESL&lt;&lt;\\frac1{2\\pi fc}$$ 电容器表现为容性；$$2\\pi fESL&gt;&gt;\\frac1{2\\pi fc}$$电容器表现为感性，因此会有一句话叫高频时电容不再是电容，而呈现为电感，这个电感不是说电容变成了电感，而是指此时的电容拥有了与电感类似的特性。$$2\\pi f_{ESL}&#x3D;\\frac1{2\\pi fc}$$此时容抗矢量等于感抗矢量，电容的总阻抗最小，表现为纯电阻特性，此时的f称为电容的自谐振频率。 自谐振频率点是区分电容是容性还是感性的分界点，高于谐振点时，“电容不再是电容”，因此退耦作用将下降。实际电容器都有一定的工作频率范围，在工作频率范围内，电容才具有很好的退耦作用。ESL是电容在高于自谐振频率点之后退耦功能被消弱的根本原因。 下图是实际电容器的频率特性。 电容特性​ 电容是由两个导体构成，其本质是对两个导体在一定电压下存储电荷能力的度量。任何两个导体之间都有一定的电容量，电容量C可以简化定义为：储存在单个导体上电荷量（Q）与导体之间电压（V）的比值，C &#x3D; Q&#x2F;V。​ ——如果两个导体之间没有直流路径（电位不相等），那么它们之间就有电容，其阻抗会随频率的升高而降低，在高频时阻抗非常低；​ 虽然从电容量的定义中表述了电荷量和电压的关系，但这对导体（电容器）的电容量与外部施加的电压并无关系；电容量取决于这对导体的几何结构和导体之间（电场穿过的）介质材料属性：与电容器极板的有效面积、绝缘介质的介电常数成正比，与极板之间的距离成反比：$$C&#x3D;\\varepsilon0*\\varepsilon\\mathrm{r}*\\mathrm{A&#x2F;d}。$$ε0：介质在真空状态下的介电常数( &#x3D;8.85×10-12 F&#x2F;M )； εr：相对介电常数； A：电极面积（m²）； d：介质厚度（m）。 ​ 对于理想电容器来说，两个导体之间是没有直流通路的，只有当导体之间有电压变化时才可能有电流（位移电流）流经电容器：I &#x3D; ΔQ&#x2F; Δt &#x3D; C*dV&#x2F;dt；在给定导体间电压变化率时，电容是：对相同变化率下导体之间形成电流大小的度量。 电容器容值的越小，低频段阻抗越大；——根据电容器阻抗计算公式：Z &#x3D; RE + jω *(Llead- 1&#x2F;ω²C) ≈1&#x2F;jωC，在相同信号频率下（ω相等），C越大阻抗越小（在低频段电容特性占主导作用）。 电容器容值的越小，自谐振频率越大；——自谐振频率点f0 &#x3D; ，假设同材料、封装的电容器Llead值相同：那么C越大，自谐振频率点f0就越小；而且C与f0的关系可以通过公式计算，例如C增大10倍（如上图：0.1uF和0.01uF），那么自谐振频率点f0就相差 &#x3D; 3.16倍。 不同容值的电容器，自谐振频点右侧（高频段）曲线重叠；——如上分析，自谐振频率点后，电容器呈现电感特性：Z &#x3D; RE + jω *(Llead -1&#x2F;ω²C)≈jωLlead，其阻抗曲线斜率取决于寄生电感Llead的大小，而相同材料、封装的电容器寄生电感值非常接近，而呈现在电容器阻抗曲线图中，就是自谐振频率点右侧的阻抗曲线相同。 电容器容值的越小，Rs（ESR）呈上升趋势；——但电容器的ESR更多取决于电容器本身的材料、结构及封装，也同电容的工作频率有关 电容器参数1，电容器容值​ 在硬件电路上使用电容器，我们首先关注的便是电容器容值，但是电容容值C会随环境发生改变，也会随外加电压、工作频率以及测量方法的改变而发生变化。不同种类电容器对不同的环境&#x2F;电应力的表现也不同；​ 例如：​ 陶瓷电容器容值对外加电压的变化很敏感（陶瓷电容：大家都知道了喔？）；​ 铝电解电容器容值随工作频率的影响很大。 2，额定电压​ 电容器额定工作电压：该电容器在电路中能够长期可靠地工作而不被击穿所能承受的最大直流电压。 ​ 当在电容器的两极施加电压之后，电容电介质材料会产生极化，但这些电荷依然受介质本身的束缚而不能自由移动，介质的绝缘性能尚未遭到破坏，只有少数电荷脱离束缚而形成很小的漏电流（这个能量损耗即为“介质损耗”）。如果外加电压不断加强，最后将使极化电荷大量脱离束缚，引起漏电流大大增加，造成介质材料的绝缘性能遭到破坏，使电容器两极短接，从而完全丧失电容器的作用，这种现象称为介质击穿。​ ——电容器的耐压与电容器的结构、介质材料和介质的厚度有关；一般来说，对于结构、介质相同，容量相等的电容器，其耐压值越高，体积也越大。 3，电容器耗散系数​ 电容器耗散系数： DF &#x3D; tan δ(损耗角) &#x3D; ESR &#x2F; Xc &#x3D; (Rs) * (ωC)；是串联等效电阻（ESR）同电容容抗 （1&#x2F;ωC）（测量频率）之比（电容器每周期损耗能量与储存能量之比）；它随测量频率的增加而变大。 4，电容器介质损耗因数​ 介质损耗：是指绝缘材料在电场作用下，由于介质电导和介质极化的滞后效应，在其内部引起的能量损耗。主要分为如下两部分： 电导损耗：又称为漏导损耗；实际电介质并非理想的绝缘体，其在外电场的作用下，总会有一些带电粒子（电子、正离子、负离子）会沿电场方向移动而引起微弱的电流，这种微小电流称为漏导电流，漏导电流流经介质时使介质发热而损耗了电能；这种因电导而引起的介质损耗也称为“漏导损耗”。 极化损耗：在介质发生缓慢极化时（松弛极化、空间电荷极化等），带电粒子在电场力的影响下因克服热运动（位置发生了移动）而引起的能量损耗。 固体介质损耗： （1）无极绝缘材料： 云母：介质损耗很小，主要由电导引起损耗，是理想的电极绝缘材料，但机械性能较差； 陶瓷：电导损耗 + 极化损耗； 玻璃：电导损耗 + 极化损耗，损耗与玻璃成分有关。 （2）有机绝缘材料： 非极性有机绝缘材料：只有电子式极化，损耗取决于电导； 极性有机绝缘材料：电导损耗 + 极化损耗。 5，电容器损耗​ 电容器损耗：在单位时间内电容因发热所消耗的能量叫做损耗； 在直流电场的作用下：电容器的损耗以漏导损耗的形式存在（一般较小）； 在交变电场的作用下：电容的损耗不仅与漏导有关，而且与周期性的极化建立过程有关。 6，寄生电阻​ ESR：来源于导电电极结构的特性和绝缘介质的结构特性，ESR随着频率的变化而变化；当电容器工作在自谐振点频率时：电容的容抗和感抗大小相等（符号相反），等效为一个电阻，该电阻就是ESR。 （1）在低频率范围：电容器阻抗Z与理想电容器相同（与频率呈反向趋势，呈现容性），ESR在低频段取决于电介质极化损耗，呈现极化损耗的频率特性； （2）在自谐振频率点f0附近：阻抗Z受到寄生电感的影响，偏离了理想电容阻抗特性曲线，此时Z为最小值：ESR； （3） 在高频率范围：阻抗Z与理d想电感器相同（与频率呈正向趋势，呈现感性），由于受到趋肤效应的影响（《信号完整性基础》专题具体分析），电极损耗占主导作用，呈上升趋势。 7，寄生电感 ESL（寄生电感）：电容的寄生电感主要取决于电容的结构和管脚封装，产生自电容引脚和电容板的电感； 在低频应用时感抗较小，基本可以不考虑； 频率较高时，就需要考虑这个电感，它能将容抗变成感抗。 8，纹波电流、电压​ 纹波电流和纹波电压：电容器所能耐受纹波电流&#x2F;电压值；它们和ESR 之间的关系密切： Vrms &#x3D; Irms × R。 Vrms ：纹波电压； Irms ：纹波电流； R ：电容ESR。 9，温度特性​ 电容温度系数： 电容器的电容量随温度变化的大小用温度系数（在一定温度范围内，温度每变化1℃，电容量的相对变化值）来表示；温度对不同类型电容器容量影响不同，陶瓷II&#x2F;III类电容温度系数较大，需特别关注。 电容器分类1，陶瓷电容器​ 陶瓷电容器：是以陶瓷材料为介质的电容器的总称。​ 陶瓷介质有非常多的优点：使用温度较高，比容量大，耐潮湿性好，介质损耗较小，电容温度系数可在大范围内选择等。 ​ 根据陶瓷介质的不同进行分类：I类瓷介电容器和II类瓷介电容器。 I类瓷介电容器：主要包括NPO，SL0，COG；其电容容量的稳定性非常好，基本不随温度、电压、时间等变化而变化，但是一般电容量都很小。——这类电容精度高、温度系数小，适合高精度应用场景使用；举个栗子，晶体起震电路中的匹配电容器（pF级），使用的就是NP0&#x2F;COG电容器。 II类瓷介电容：X7R，X5R，Y5U，Y5V；其容量稳定性相对较差，随着温度、电压、时间变化幅度较大，一般用在对容量稳定性要求不高的场合。——这类电容主要优点在于价格便宜，容量大、体积小、寄生电阻&#x2F;电感小，能满足单板上绝大多数的信号隔直、低电压电源滤波&#x2F;耦合等应用需求。 （1）瓷片电容器​ 瓷片电容器：又称为圆片瓷介电容器，是在陶瓷表面涂覆一层金属薄膜，再经高温烧结后作为电极而成的电容器； ​ 瓷片电容器的高频特性比较好，一般在电路中作为耦合、滤波、退藕、震荡电容器使用，其典型作用是消除高频干扰。根据应用场景的不同，瓷片电容器分为：高频瓷介电容和低频瓷介电容；又可分为：高压瓷片电容和低压瓷片电容。 高频瓷介电容器具有小的正电容温度系数特性，主要用于高稳定振荡回路中，作为回路、旁路电容器； 低频瓷介电容器限于在工作频率较低的回路中作旁路或隔直流用，或对稳定性和损耗要求不高的场合； 高压陶瓷电容器应用在大功率、高压领域，要求具有小型、高耐压和频率特性好等特点。 （2）MLCC电容器​ MLCC电容器：多层陶瓷电容器（Multi-Layer Ceramic Capacitor），是由印好电极（内电极）的陶瓷介质膜片以相互错位交替的方式叠合起来，经过一次性高温烧结形成陶瓷芯片，再在芯片的两端封上金属层（外电极）的电容结构。​ 它具有：小型化（0402、0201）、大容量（相对瓷片电容）、低成本、寿命长，高可靠性、低功耗（低ESR）、高频率（低ESL）以及适合贴片安装、优良的耐热、腐蚀性等特点。 根据MLCC电容器所使用的陶瓷粉料的不同可分为如下三大类： 温度补偿类NPO电介质（Ⅰ类）：这类电容器电气性能最稳定，基本不随温度、电压、时间等各种应力而改变，属超稳定型、低损耗电容材料类型，适用在对稳定性、可靠性要求较高的高频、特高频、甚高频电路中。NPO&#x2F;C0G电容器：Negative-Positive-Zero，最常用的具有温度补偿特性的单片陶瓷电容器，以氧化钛（TiO2）为主要成分（介电常数小于150），具有最稳定的性能；或者通过添加少量其他（铁电体）氧化物（CaTiO3或SrTiO3），构成“扩展型”温度补偿陶瓷电容，表现我近似线性的温度系数（介电常数达到500）；——C0G代表电容器的温度系数：C 表示电容温度系数的有效数字为：0 ppm&#x2F;℃；0 表示有效数字的倍乘因数为： -1（10的0次方）；G 表示随温度变化的容差为：±30ppm。 但NPO&#x2F;C0G电容器容值比较小，通常不超过1nF（最大100nF），主要用于谐振电路和滤波，频率可以达到10MHz至30GHz之间。 高介电常数类X7R电介质（Ⅱ类）：也称铁电陶瓷电容器，是一种强电介质，容量比NPO更大，性能比较稳定（相对NP0差），会随温度、电压、时间而改变，但性能变化并不显著，属稳定电容材料类型，使用在隔直、耦合、旁路、滤波电路及可靠性要求较高的中高频电路中；其中Ⅱ类陶瓷电容器又分为稳定级和可用级：X5R、X7R属于Ⅱ类陶瓷的稳定级，Y5V和Z5U等属于可用级；X:低温极限；7：高温极限；R：电容变化范围；X7R表示：温度在-55℃到+125℃时其容量变化为15%（电容器容量变化非线性）；（具体如下图所示） （3）电容啸叫​ MLCC电容器发生啸叫主要是由陶瓷的压电效应引起的，MLCC电容器由于其特殊的结构，当施加在两端的电场变换时，可以引起成比例的机械应力的变化，此为逆压电效应，当振动频率落入人耳听觉范围内时，就会产生噪音，即所谓的“啸叫”。正压电效应相反，是受到力的作用，产生电场的过程。 正压电效应：对具有压电特性的介质材料施加机械压力的作用而变形时，其内部会产生极化现象，同时在两个相对表面上出现正负相反的电荷，其电荷密度与外机械力成正比；当外力去掉后，它又会恢复到不带电的状态； 逆压电效应：当在电介质的极化方向上施加电场，这些电介质也会发生变形，电场去掉后，电介质的变形随之消失。 MLCC设计制造陶瓷介质材料主要：顺电介质和铁电介质两大类； I类顺电介质（NPO&#x2F;C0G）伸缩形变很小，不会产生啸叫声； II类铁电介质（X7R&#x2F;X5R）具有强烈的压电效应，会产生明显噪声：X7R&#x2F;X5R类中高容量电容器，会产生明显的啸叫（开关电源、高频电源等应用），频率在20Hz~20kHz之间便能被人耳感知到； ​ 解决啸叫问题，有如下几种方案： 将出现啸叫的电容器更换为NP0&#x2F;钽电容&#x2F;薄膜电容等； 调整电路去除交变电压或调整频率移出人耳范围（20Hz~20KHz）； 优化PCB布局及PCB板规格，降低啸叫水平。 2，电解质电容器​ 电解质电容器：用铝、钽、铌、钛等阀金属表面采用阳极氧化法生成一层氧化物作为介质层，以电解质作为阴极构成的电容器。 按电解质的状态可分为：液态电解电容器，固态电解质电容器。 按阀金属材料可分为：铝、钽、铌等电解电容器。 按阳极呈现状态可分为：箔式卷绕型，烧结型电解电容器。 按特性可分为：通用型、宽温型、长寿命型、无极性型（背靠背电容器）、低漏电流型、低阻抗（ESR）型、高频特低阻抗型和耐高纹波型 （1）铝电解电容​ 铝电解电容器：以铝金属箔为阳极，介质是在阳极金属箔表面上形成的阀金属氧化膜（AL2O3），阴极为多孔性电解纸所吸附的工作电解质（液体或固体）​ ——根据C&#x3D;εr*A&#x2F;d，电解电容器介质非常薄（金属氧化物，d很小，nm~um级别），同时通过卷绕式将电容两极面积做的非常大（A很大），所以电容量可以做的非常大。​ 铝电解电容器电容量大、价格便宜、性能优异，在市场占有率非常高，通用铝电解电容主要是卷绕型铝容器。 ​ 铝电解电容器有如下特点： 介质层：铝氧化膜AL2O3具有单向导电性，所以铝电解电容有正负极之分。 高电场强度：利用化学方法在腐蚀过的阳极铝箔表面生成一层极薄（0.01~1um）的铝氧化膜作为电解电容器介电质，与铝箔阳极结合成为一体； 阴极是电解质：根据其物理状态分为：液体电解质和固体电解质；为了使电容器的阴极与外部电路相连接，必须从结构上加一阴极引出板（阴极箔）成为一完整的结构。 ​ 液态铝电解电容器主要参数： 额定电压：电容器在额定温度范围内所允许的连续工作最大直流电压或脉冲电压峰值。 浪涌电压：短时间内电容可以承受的最大电压值，一般为：1.15x额定电压。 电容量(uF)及误差(%)：液态铝电解电容器一般电容标称误差为20%； （1）电容量与外加电压强度成反比，大约电压提高1倍，电容量下降1~3倍；（2）电容量与环境温度成正比，需关注低温应用下容值的变化；（3）电容量与工作频率成反比； ESR：电容器等效串联电阻，ESR会影响到产品的功率损耗，高频特性以及滤波效果； （1）ESR随温度的升高，ESR减小，在温度高的环境有利于功耗减小；（2）ESR随频率的增加也逐渐减小。 额定纹波电流：在规定频率下最大允许交流电流的有效值，该电流下电容器可在规定下的上限温度下连续工作；——最大允许纹波电流的大小与环境温度，电容表面积，耗散因数（ESR），以及交流电频率相关；纹波电流产生的热量是影响使用寿命的重要因数，超过铝电解电容器的额定纹波电流，导致电容器温度太高而大大减小寿命甚至被烧坏。 损耗：用损耗角正切表示，在规定频率的正弦电压下：P有&#x2F;P无；——电解电容器的损耗：在直流电压下主要为漏导损耗，在交流电压下为漏导损耗和介质极化损耗；电容器因为消耗能量而发热。 温度范围：电容器设计所确定的能够连续工作的环境温度范围。——热应力对液态铝电解电容寿命有决定性作用，器件资料给出的寿命为额定温度条件下的最小工作寿命；工作温度每下降10℃寿命增加2倍。 （2）聚合物（Polymer）电容器​ 固体电解质：导电聚合物（PEDT），在导电性、热稳定性，化学稳定性方面均有明显的优势，是目前可选用的综合性能最好的固体电解质。 ​ 聚合物（Polymer）电解电容器的特点： 聚合物铝&#x2F;钽电解电容器通过以多层铝&#x2F;钽箔结构为阳极、固体导电聚合物为阴极实现低ESR、低阻抗和高静电容量； 具有无偏压特性和稳定的温度特性，在纹波吸收、滤波和瞬态响应方面具有优异性能，堪称各类应用的理想之选； Polymer电容器可以无降额使用（理论上，正常使用降额90%）； 退化机理主要是由于高分子有机体在高温下会分解导致导电率下降，半永久失效。 ​ 不同形态的聚合物电容器：贴片型聚合物铝&#x2F;钽电解电容器，卷型聚合物铝电解电容器，卷型聚合物铝混合型电容器。​ ——聚合物电容器除了传统卷型之外，还更加容易被制造成贴片型电容器，外形类似二氧化锰钽电容器，其最大的优点是：小型化、大容量、低ESR&#x2F;ESL。 ​ 聚合物固态铝&#x2F;钽电解电容器的参数及特性比较： ​ 聚合物固态铝电容器（MLPC：片式叠层铝电解电容器）相比聚合物固态钽电容器，有更低的ESR和更大的容量；聚合物固态铝电解电容特点如下： 高频低阻抗：在100K~1MHz的宽频范围内都具有很低的阻抗，特别适合作为滤波电容器去除电路的开关电源纹波、音频噪声等； 优良的温度特性：ESR在-55c~105c温度范围内几乎保持不变；特别适合低温恶劣条件下电子设备； 高温长寿命：聚合物没有液态电解液易挥发现象，寿命更长：寿命遵循工作温度每下降20℃，寿命增加10倍（液态电解电容每下降10℃，寿命增加2倍）； 高额定纹波电流：由于更低的ESR，允许通过较大纹波电流（P&#x3D;I2xR）； 安全高可靠：由于采用固体电解质，不会出现电容电解液漏液，干枯，爆浆等事故（如上“聚合物电解电容特点”所述）；由于产品内部结构凝聚固定，产品的抗震性好，可靠性高。 （3）聚合物混合铝电容器​ 聚合物混合铝电解电容器：在电解质中融合了导电性聚合物和电解液，兼备导电性聚合物和电解液的特点：有大静电容量、低LC（Leakage Current）、大纹波电流、低ESR、耐湿性优、高可靠性的优点；但是聚合物混合铝电容的温度寿命与液态铝电解电容一样，工作温度每下降10℃寿命增加2倍。 （4）钽电解电容器（Mn02）​ 钽电解电容器：电解电容器的一种，由充当阳极的钽金属制成，由一层充当电介质的氧化物覆盖，并被导电阴极包围。​ 相同体积下同样结构的钽电容相比铝电解电容：容量更大，耐压较小。钽电容跟聚合物钽电容结构差不多，不同的是阴极把导电聚合物换成MnO2。 钽电解电容价格高：是相同容量陶瓷电容器的10倍以上； 钽电解电容器的失效模式：大多为强发热、发光（爆炸，具体原因如“聚合物电容器”节所述），容易引起火灾； 大容量低耐压钽电解电容的替代产品：高分子聚合物固体铝&#x2F;钽电解电容器； 钽电解电容器在大容量、小封装、低ESR的应用场景仍然有优势。 （5）铌电解电容器（没见到过，没用过）​ 铌电解电容器：与钽电解电容器类似，用铌及其氧化物代替钽；铌氧化物（五氧化二铌）的介电常数比钽氧化物（五氧化二钽）更高，性能更加稳定，可靠性更高；主要用于：小体积、大容量、低耐压、低ESR应用场景的电容器产品。 3，薄膜电容器​ 薄膜电容器：是以金属箔当电极，将其和聚乙酯，聚丙烯，聚苯乙烯或聚碳酸酯等塑料薄膜从两端重叠后，卷绕成圆筒状构造的电容器。薄膜电容器被大量使用在模拟电路上。尤其是在信号交连的部分，必须使用频率特性良好，介质损失极低的电容器，才能确保信号在传送时，不致于有太大的失真发生。 按薄膜种类分类：聚乙酯电容（Mylar电容），聚丙烯电容（PP电容&#x2F;CBB），聚苯乙烯电容（PS电容）和聚碳酸酯电容； （1）pp与ps电容器是众多薄膜电容中性能最好，也是所有薄膜电容中价钱最贵的电容器；（2）聚酯（PET）薄膜电容的介电常数较高，体积小，容量大，稳定性较好，适宜做旁路电容。 按电极分类：金属箔薄膜电容（Film&#x2F;Foil）和金属化薄膜电容（Metallized Film）。 （1）金属箔薄膜电容器：直接在塑料膜上加一层薄金属箔，通常是铝箔，作为电极； ——制造工艺相对简单，而且耐电流强度高，无自愈能力，峰值耐压查。（2）金属化薄膜电容器：是在塑料薄膜上以真空蒸镀上一层很薄的金属以做为电极。 ——电极厚度薄（相同体积叠层更多，容量更大），耐压能力强，但耐电流能力差。 薄膜电容器相对陶瓷电容器和电解电容器： 更低的频率损耗，介质吸收（Dielectric absorption）效应更小； 更高的电容精度（可与NPO相比，但电容量更大）； 随外加电压、频率及环境温度的稳定性非常高，无直流偏压损耗，无压电效应（啸叫）； 非常好的耐热及机械应力冲击能力；——不易被外部热和机械应力而损坏，大封装（&gt;1206）陶瓷电容器对机械应力非常敏感。 具有自我恢复（自愈）功能，开路的失效模式（陶瓷和电解电容是短路），可靠性更高。 4，其他电容器（1）纸介质电容器​ 纸介电容器：是由介质厚度很薄的纸作为介质，铝箔作为电极，经掩绕成圆柱形，再经过浸渍用外壳封装或环氧树脂灌封组成的电容器。 ​ 纸质电容器主要应用于直流及低频电路，有如下特点： 成本低，电容量范围宽 ， 工作电压高 ； 热稳定性较差(电容量稳定性不高)， 工作温度低，易吸潮、老化，高频损耗（tgδ）较大。 （2）云母电容器​ 云母电容器：在云母片上喷涂银层或用金属箔做电极板，极板和云母一层一层叠合后，再压铸在胶木粉或封固在环氧树脂中制成（结构类似MLCC）。 ​ 云母电容特点： 介质损耗小、耐压高、绝缘电阻大、温度系数小（耐热性好）； 寄生电感小、频率特性稳定，不易老化，适用高频电路； 体积大、容量小，价格贵。 （3）玻璃釉电容器​ 玻璃釉电容器：介质是玻璃釉粉加压制成的薄片。玻璃釉电容特点： 介质介电常数大、体积小、损耗小，耐温性和抗湿性较好； 适合半导体电路和小型电子仪器中的交、直流电路或脉冲电路使用。 （4）涤纶电容器​ 涤纶电容器：是指用两片金属箔做电极，夹在极薄绝缘介质中，卷成圆柱形或者扁柱形芯子，介质是涤纶。有如下特点特点： 额定工作电压大：金属化涤纶电容器工作电压可达上万伏； 电容量范围宽：从几皮法到几百微法； 介电常数较高、体积小、容量大，稳定性好，工作温度可达120~130℃； 损耗角正切值较大，一般用于直流及脉动电路中，不宜在高频电路中使用。 电容器应用1，滤波器​ 滤波：是指滤除不需要频率的波形，滤波器的类型有低通、高通、带通、带阻。 ​ 滤波电容：是安装在整流电路两端用以降低交流脉动波纹系数，从而提升高效平滑直流输出的一种储能器件。无源滤波电路分为好多种，主要是结合其它器件（电阻、磁珠、电感），构成L型、T型以及π型滤波器，对特定频段电源噪声进行滤波。滤波电路的原理主要根据滤波电路中：电容阻抗：Xc &#x3D; 1&#x2F;jωC &#x3D; 1&#x2F;sC，电感阻抗：XL &#x3D; jωL &#x3D; sL的组合计算出组合电路对不同频率的阻抗，实现滤波的功能。 2，电子电力&#x2F;开关电源​ 我们平时用到的各种类型电容器，大多数用在了电源上。​ 电容器是一种储能元件，与电感结合形成的功率滤波电路能够使开关电源&#x2F;电力电子中的功率信号变为平滑的直流信号。 3，储能、旁路和去耦​ 储能电容器：用在电源输入口或大功率器件旁边，为减少因功率器件突然工作产生时，开关电源响应速度不够，而带来电压波动。 ​ 旁路电容器：接在靠近器件的电源与地之间，产生一个交流分路，除去器件端电源不需要的能量。 通常电解电容器或大容量陶瓷电容器比较适合作旁路电容； 电容值取决于PCB 板上的瞬态电流需求，一般在10uF 至470μF 范围内； 旁路电容器是为本地器件提供能量的储能器件，使稳压器的输出均匀化，旁路电容器被充电的同时向器件进行放电； 为尽量减少电源回路对地阻抗，旁路电容器尽量靠近负载器件的供电电源管脚和地管脚。 ​ 去耦电容器： 根据电容器的实际效果来命名，一般接在器件电源管脚和地之间，起到滤除芯片电源管脚高频噪声的作用。 主要用于滤除&#x2F;减少外部电源平面输入到器件电源管脚端的高频噪声，使得输入器件的电源稳定； 有源器件在工作时产生高频的开关噪声，去耦电容器将噪声接到地（对地低阻抗），滤除&#x2F;减少器件的开关噪声传播到单板电源平面上； 空间中存在的电磁波会干扰到芯片工作的稳定性，去耦电容器能够很好的滤除这些干扰。 4，信号隔直&#x2F;耦合​ 隔直&#x2F;耦合电容：利用电容“隔直通交”的性质，使用串联电容器来耦合信号。需要根据频率和负载电阻来选择，隔直电容和负载电阻构成了分压网络，作为高通滤波器。","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"器件类","slug":"器件类","permalink":"https://lilongxin178.github.io/tags/%E5%99%A8%E4%BB%B6%E7%B1%BB/"}],"author":"工程小李"},{"title":"阻容感基础----电阻专题","slug":"阻容感基础-电阻专题","date":"2024-06-20T06:00:00.000Z","updated":"2024-10-23T08:57:49.147Z","comments":true,"path":"2024/06/20/阻容感基础-电阻专题/","permalink":"https://lilongxin178.github.io/2024/06/20/%E9%98%BB%E5%AE%B9%E6%84%9F%E5%9F%BA%E7%A1%80-%E7%94%B5%E9%98%BB%E4%B8%93%E9%A2%98/","excerpt":"","text":"阻容感基础—-电阻专题前言基础关于虚数先看这样一个表达式x² &#x3D; 1，它有两个解：1和-1；那么若有方程x² &#x3D; -1呢？其在实数范围内无解，那将其进行简单的数学变换，将x² &#x3D; -1，改写成1* x* x &#x3D; -1。那么此时，x便成为了一个“步骤”，从1经过两次变换变为了-1。唉，那是不是可以将从1到-1这个过程看成角度的变换。 那么在如下图中包含两个正交轴的坐标系上，就能够实现1到-1的转变。如下左图所示，构成的正交坐标平面称为“复平面”，其横轴为实数（Real dimension），纵轴为虚数（Imaginary dimension），并将x² &#x3D; -1的解用字母i表示，其特指逆时针旋转90°。那如果要顺时针旋转90°呢？那就乘以-i；而且乘以两次-i，结果同乘以两次i一样，都得到了-1。 对于阻、容、感的阻抗，我们知道电阻：R是实数部分（能量消耗），而容抗：Xc&#x3D;1jωC，和感抗XL&#x3D;jωL是虚数部分（能量的虚消耗，就是没有能量消耗，能量只是做着储存&#x2F;释放的工作），所以阻抗同样可以用复数平面来表示，任何器件阻抗都能写成实部与虚部之和：Z &#x3D; R +j*Im （公式中的“j”即虚数“i”）；对于容抗来说是顺时针旋转90°，感抗是逆时针旋转了90°（电容与电感的阻抗特性对偶）。 我们将阻抗R用幅值和相角进行重构： 阻抗的幅值：|Z| &#x3D; √(R²+I²m) （复数的模） 阻抗的相角： &#x3D; tan⁻¹(Im&#x2F;R) rad （复数的幅角） 通过对上述阻抗幅值的公式，可从理论上得到电容器自谐振时（由于Xc &#x3D; -XL，那么Im &#x3D; 0）的阻抗为电容器的ESR。 电子电路物理参数​ 电子电路学有4个基本物理量：电压V，磁通量φ，电流I，电量Q；而这4个物理量构成了电路的理论基础，我们平时所使用的阻、容、感器件特性均从这些基本量中推理得到。由电磁学理论可知V &amp; φ和Q &amp; I之间的如下关系： 根据麦克斯韦方程组的第三方程-法拉第定律：曲面磁通量的变化率等于感应生成电场的环流（记住：磁场跟电流是强相关的）；简单表述即：感应电场等于单位时间磁通量的变化，即： V&#x3D;dφ&#x2F;dt或dφ&#x3D;V*dt。 电磁学上将：单位时间（t）内通过导体任一横截面的电量（q）叫做电流强度（I），即I&#x3D;dq&#x2F;dt；或dq&#x3D;i*dt。 电阻：从本质来说是载流子（自由电子是载流子的一种，当然在半导体中，空穴也是另外一种载流子）在受电场作用而位移过程中受到的阻力。 ——在理想情况下，电场力作用于自由电子，使电子朝电场的反向加速运动，根据牛顿第二定律，自由电子应当一直被加速（只要时间足够长，就可以将电子速度达到接近光速），电流随时间持续增大；但实际上电流到达一个定值后就不会再增大，说明存在一个“摩擦力”反抗着电子的加速；而“摩擦力”主要来自于晶体晶格的热振动，晶体中的杂质、位错、点缺陷会使电子受到散射，而散射事件使得电子失去动能并改变运动方向，从而失去前进方向上的速度分量，这就是金属有电阻的原因。 ——对于横截面恒定材料的电阻R &#x3D; ρ*Len&#x2F;A，R：电阻值； ρ：体电阻率；Len：材料长度；A：材料横截面积。后续在“电阻器原理专题”中详细讲解。 电容：由两个导体构成，任何两个导体之间都有一定的电容量，其本质是对两个导体在一定电压下存储电荷能力的度量；在一定电压下，能够存储的电荷越多，则这对导体的电容量就越大。 ——只要是两个不短路的导体，且加电压后会有电荷积累，那么它们之间就会有电容；一定要记住这个条件，后面不同电容的出现方式会超出想象，这是唯一遵循的准则。后续在“电容器原理” 以及“信号完整性基础专题”中详细讲解。 ——C&#x3D;ε0εrA&#x2F;d，C：电容量；ε0：真空介电常数；εr：相对介电常数；A：电极面积；d：电极距离。 电感必须需要一个有一个的圈圈么？其实并非如此，判断标准有点抽象？抽象就对了： 1，电感周围会形成闭合磁力线圈。 2，电感量是导体电流1A时周围的磁力线匝数（Wb）。 3，周围磁力线匝数改变时导体两端产生感应电压（感应电动势）。——电感器涉及到了电场与磁场能量的转换，理解上更加复杂一点，后续“电感器原理”分析。 ——任何有电流流过的导体都有电感（自感），与导体的几何结构及磁导率强相关；电感将是我们后续大部分专题中的绝对主角，同学们需要学会欣赏它的精彩演绎，从而有更深入的认知。后续在“电感器原理”以及“信号完整性基础专题”中详细讲解。 电容要发挥其作用，就必须电极两端的电荷数量（电势差）发生变化，如果电容两个电极电荷数量不变（电极两端电压保持不变），那么电容就相当于一根导线。 同理，电感要产生作用，必须流过电感的电流发生变化，如果电流没有变化，那么电感也相当于是一根导线。 理想电阻器、电容器、电感器的特性我们已经知道了电阻器是阻碍电流通过的作用；而根据能量守恒定律，电阻器将电能转化为了热能；如果用一个字来描述电阻器的特性，那就是：阻（肉盾）。在电阻器的两端加电压会产生一定的电流，而这部分电能（I2*R）被电阻所消耗，所以大手一挥给它定个性吧：电阻器是一种耗能元件。 我们通过两种电压模式来观察电阻器的特性：直流电压和交流电压； 在直流电压条件下，通过电阻器的电流是恒定的。 在交流电压条件下，通过电阻器的电流跟随着电压变化而变化，而电阻器阻值保持不变（理想电阻器不随电压&#x2F;电流而变化），所以电压和电流保持线性关系：I&#x3D;V&#x2F;R。 2，理想电容器电容器是一种储能元件，将能量以静电场能（电场能量）的形式进行储存。理想电容器两端电压不能突变，我们同样通过两种电压模式来看电容器的特性：直流电压和交流电压； 在电容器两端加直流电压（中间串有电阻R）时： 1，上电瞬间，电容器在电路中呈现低阻抗状态，对电容器进行快速（大电流）充电，电容器两端等效于短路； 2，随后电容器两端电压非线性（指数曲线）增加，RC充电时间常数为τ &#x3D; R*C；——RC充电时间常数时电容器两端电压达到0.63倍外加电压。 3，电容器两端电压等于外加直流电压（理论上电容器两端电压永远小于外加直流电压，即永远充不满），此时流经电容器的电流为 0，电容器等效于开路； 4，此时电源释放的电能，以静电场能的形式（电容器两端增加电荷）储存在电容里。 在电容器两端加交流电压，电流相位超前电压相位90°。 电容器阻抗Xc&#x3D;1&#x2F; jωC；通过电容器阻抗的计算，我们知道电容器阻抗与电容器容值及信号频率成反比，从而直观的得到电容器实际应用：大电容器用于“隔直通交”，而小电容器用于“通高阻低”。 3，理想电感器电感器也是一种储能元件，它并不消耗电场能量，而是将电场能量转换成磁场能量，以磁场能量形式储存起来；流经理想电感器电流不能突变，通过电感的电流会产生自感电动势，其变化趋势与外加电压变化的方向相反（负反馈）。 通过两种电压模式来看电感器的特性：直流电压和交流电压； 在电感器两端加直流电压（中间串有电阻R）时： 上电瞬间，电感器产生强大自感电动势与外加电压相等（后续在“电感器原理”中再来具体扯一扯这一特性）、方向相反，在电路中呈高阻抗状态（断路）；随着电流增加速率慢慢减小，自感电动势也随之减小；直到电流趋于稳定时，自感电动势为0，电感器在电路中相当于短路；此时电源释放的能量完全转化为电感器的磁场能量。在电感器两端加交流电压，自感电动势落后于电流相位90°，外加电压超前于电流相位90°，自感电动势与外加交流电压相位完全相反；电感器阻抗XL&#x3D;jωL；通过电感器阻抗的计算，我们知道了电感器阻抗与电感器感值及信号频率成正比，从而直观的得到电感器的应用：大电感器用于“通直阻交”，小电感器用于“通低阻高”，与电容器刚好相反。 关于阻抗​ 电阻器是耗能元件而电容器和电感器是储能元件。所以电阻是真实的消耗电场能量：阻抗的实数部分，而电容和电感是假的电磁能量“消耗”：是阻抗的虚数部分。所以我们将阻抗Z的实部称为：电阻，虚部称为：电抗。电阻对直流电的阻碍作用我们称为电阻；电容的对交流电的阻碍作用（电抗）称为：容抗；电感的对交流电的阻碍作用（电抗）称为：感抗。当然，我们可以将电阻、容抗、感抗统统都称为阻抗。 电阻器模型1，电阻器理想模型​ 电阻器是电子系统中最常用的元件，对于理想电阻器来说，其频响特性应该是对于所有的频率下的电阻值都不变，而且相角为0°。$$Z&#x3D;R\\angle0^{\\circ}$$ 2，电阻器实际模型​ 然而实际电阻器在高频时的阻值必然会偏离其理想阻值，因为真实的电阻器必然不会只有电阻特性本身，而是由电阻、复杂的寄生电容和寄生电感所组成；虽然寄生电容值和寄生电感都非常小，但在高频时具有明显的电感或电容效应（即电感或电容对电阻器的阻抗影响较大）。实际模型如下： ​ 根据上图可得电阻的实际等效阻抗为：$$Z_{real}&#x3D;\\frac{(j\\omega L+R)*\\frac{1}{j\\omega C}}{(j\\omega L+R)+\\frac{1}{j\\omega C}}$$​ 化简可得：$$Z_{real}&#x3D;\\frac{j\\omega L+R}{(1-\\omega^2LC)+j\\omega RC} \\$$​ 实际电阻器的阻抗和频率曲线，有两个节点，分别为$$f1&#x3D;\\frac1{2\\pi RC} \\f2&#x3D;\\frac1{2\\pi \\sqrt{LC}} \\$$​ 在频率小于f1时，呈现电阻特性，在f1和f2之间，呈现电容减少阻抗，频率大于f2时，呈现电感增加阻抗的特性。 f1和f2分别对应RC滤波器的截止频率点和容抗和感抗相等时的频率点。 ​ 寄生电容和寄生电感与电阻器本身的器件结构、封装、尺寸等都有很大的关系，如果想要尽量减小寄生电容、电感，最好使用小封装、贴片的电阻器。​ 在大多数数字电路中，我们可以将金属厚膜贴片电阻器（例如常用的0402封装电阻器）看成一个“理想电阻器”来应用 3，电阻器特性及参数（1）电阻率​ 材料 “体阻率” 的概念：是材料的固有特性，用来表示材料电阻特性的物理量，反映了材料对电流阻碍作用的属性。 与材料尺寸无关。——它表明的是这种物质本身的导电特性，但这并不是说不会受到环境的影响，例如温度。 材料导电性能越差，其体阻率越高。那我们如何通过电阻率来计算电阻值呢？对于横截面恒定材料的电阻值，可以用如下公式计算：R &#x3D; ρ*Len&#x2F;A；R：电阻值； ρ：体电阻率；Len：材料长度；A：材料横截面积。对电阻的另一个描述是电导，它描述了导体导电性能的物理量，即对于某一种导体允许电流通过它的容易性的量度。它是电阻的倒数G&#x3D;1&#x2F;R，单位是S（西门子）。相应的也就有电导率：用来描述物质中电荷流动难易程度的参数；用字母σ表示，σ&#x3D;1&#x2F;ρ，单位是：S&#x2F;m。——电阻表现的是材料对电流导通的阻力，而电导表现的是材料对电流的导通容易性； （2）电阻温度系数​ 电阻温度系数（Temperature Coefficient of Resistance）：表示电阻当温度改变1℃时，电阻值的相对变化，单位为ppm&#x2F;℃；​ 平均电阻温度系数定义式：TCR(平均)&#x3D; [(R2-R1)&#x2F;R1]*[1&#x2F;(T2-T1)]。 （3）电阻额定功率​ 电阻额定功率：该参数体现了电阻器的散热能力，与电阻器的封装、尺寸相关；如下为片状电阻的尺寸及对应封装功耗。 稳态功率降额：在相应工作温度下的降额，即器件符合曲线所规定的环境温度下功率的降额，采用P&#x3D;V²&#x2F;R公式进行计算；是器件长期稳定的工作条件 瞬态功耗降额：电阻器脉冲功耗和稳态功率的转换曲线不同，需要查询转换曲线，将瞬态功率转换为稳态功率，然后在此基础上降额。 （4）额定电压​ 额定电压：电阻器的工作电压一般有两个，需要选择其小值作为电路实际工作电压； 由阻值和额定功率换算出的电压。——该电压由电阻器封装的最大散热功耗（例如：0402封装，1&#x2F;16w功耗）决定：最大连续工作电压和最大脉冲电压。 电阻器的封装耐压。——该电压由电阻器封装所能承受的最大击穿电压决定。 （5）老化系数​ 老化系数：电阻器在额定功率的长期负荷下，阻值相对变化的百分数，表示电阻器寿命长短的参数。 （6）电压系数​ 电压系数：在规定的电压范围内，电压每变化1V，电阻器阻值的相对变化量。 （7）噪声​ 噪声：产生于电阻器中的一种不规则的电压起伏，包括热噪声和电流噪声两部分。 热噪声：由于导体内部不规则的电子自由运动，使导体任意两点的电压不规则变化，属于电阻器的本征噪声。 电流噪声：来源于电阻器内部结构不连续性和非完整性，与电阻器类型有非常大关系。 4，电阻器分类从不同角度，可以对电阻器的种类作不同划分，如下图所示： （1）按用途分类（这种分类方式侧重于电阻的实际电路设计应用） 通用型：适应一般技术要求的电阻，功率在0.06W-1W之间，阻值在1Ω-22MΩ之间，允许误差为1%~10%之间；——应用于一般的数、模电路：分压、阻抗匹配、上下拉等应用。 精密型：高精密度及高稳定性（低温漂：低至2ppm&#x2F;℃）电阻，功率一般不大于2W；阻值在0.01Ω~20MΩ之间，允许误差小至0.01%；相对普通电阻有更高的精度、长期稳定性、温度系数小的特性；­——应用于精密仪器：医疗、量测、电信设备等，汽车电子电路，高精度电压采样电路，电源电流&#x2F;功耗监测（金属箔电阻器）电路等。 功率型：又被称为发热电阻&#x2F;负荷电阻，在电路中主要起到降压和限流的作用，通常具有较高额定功率，功率可达3KW以上；主要分为三类：线绕功率电阻，膜式功率电阻，实心陶瓷电阻；——应用于为大电源电路提供假负载，检测电源输出能力。 高压型：能够承受瞬间的高温、高压冲击，通常用于高压装置中，功率可达100W，额定电压可达100kV，标称值可达lGΩ；通常由玻璃釉膜和合成炭膜制成；——应用于高压装置中用作分压器和吸收器，也可供整流滤波电容器的放电和熄弧用。 高频型：自身电感量非常小，常被称为无感电阻，阻值一般小于1KΩ，功率范围宽，最大可达1W；在射频和微波电路中应用的主要是薄膜贴片式电阻 （2）按特殊用途分类，这些器件对外呈现电阻的特性，但不属于一般电阻的应用： 热敏电阻：一种传感器电阻，其电阻值随着温度的变化而改变；分为NTC（负温度系数）和PTC（正温度系数）；——主要应用于对外通信接口的电路防护（例如：POTS），温度监测等； 压敏电阻：具有非线性伏安特性的电阻器件，主要用于在电路承受过压时进行电压钳位（电源电路防护），吸收多余的电流以保护敏感器件（VDR）； 光敏电阻：利用半导体光电效应制成的一种电阻值随入射光强弱而改变的电阻器；——主要用于光控调光，光控开关等； 力敏电阻：利用半导体材料的压力电阻效应制成的，能将机械力转换为电信号的特殊元件（即电阻值随外加力大小而改变）； ——用于各种矩力计、半导体传声器及各种压力传感器中。 磁敏电阻：一种对磁敏感、具有磁阻效应（利用半导体的磁阻效应制造的，常用InSb材料加工而成）的电阻元件；——阻值随穿过其磁通量密度的变化而变化，用于磁场强度、漏磁、制磁的检测。 湿敏电阻：利用湿敏材料吸收空气中的水分而导致本身电阻值发生变化这一原理而制成。——基片上覆盖一层用感湿材料制成的膜，当空气中的水蒸气吸附在感湿膜上时，元件的电阻率和电阻值都发生变化，利用这一特性测量湿度。 气敏电阻： 一种半导体敏感器件，利用气体的吸附而使半导体本身的电导率发生变化的机理来进行检测。 5，片状电阻器​ 大多数字电路设计中使用的是片状电阻，它有非常明显的优点，足以在大多数硬件电路设计中成为“理想”电阻器：外观尺寸均匀且小型化（寄生电容、电感小），耐潮湿，耐高温（环境适应性好），可靠度高，精度高且温度系数与阻值公差小等等。 ​ 片状电阻器按生产工艺，可分为：厚膜（Thick Film）和薄膜（Thin Film）两种。 （1）薄膜电阻器的特点如下所示： 材料相对更均匀（便于电阻值的设计），制造工艺更加可控，它还可以通过光刻或者激光修正，产生图案增加电阻路径并校准电阻值，所以薄膜电阻阻值可以做到0.1%甚至0.01%； 可选用非常低温度系数（TCR）的导电材料，使得电阻器阻值随温度变化非常小，阻值稳定可靠； 一般应用于精密应用：各类仪器仪表，医疗器械，电源，电力设备，电子数码产品等。 （2）厚膜电阻器的特点如下所示： 厚膜电阻通过合金导电材料和绝缘体材料混合的糊状物质，印刷到陶瓷基板上烧制而成；其烧制成后的导电材料类似玻璃，难于切割控制阻值；所以厚膜电阻一般精度较差：10%，5%，1%是常见精度； 厚膜电阻导电材料为粑状物质，其温度系数(TCR)上很难控制，一般较大；——TCR（ppm&#x2F;℃）是一个不容忽视的微小参数，1%的普通电阻的TCR系数在几千ppm&#x2F;°C范围内，整体阻值的变化与电阻的材料、实际功率以及物理尺寸相关。 但是厚膜电阻成本非常低，迄今为止电气和电子设备中使用最多的电阻器。 ——单板上常用的0402&#x2F;0603&#x2F;0805&#x2F;1206等封装贴片电阻器，一般都是厚膜电阻 （3）薄膜电阻与厚膜电阻对比 薄膜电阻器相对于厚膜电阻器的电阻层更加均匀，容易制作高精度、稳定的电阻； 薄膜电阻器的电阻层有其最佳厚度的要求，如果薄膜电阻的电阻层太薄则更容易被氧化，并严重影响其温度系数（TCR）；——薄膜电阻器对电阻层厚度的要求严重影响了薄膜电阻的阻值范围，且大阻值薄膜电阻的退化率也非常高。 厚膜电阻依靠玻璃基体中金属粒子间的接触形成电阻，这些触点构成完整电阻；——工作中的热应变会中断接触，阻值会随着时间和温度持续增加，其稳定性较差。 厚膜电阻结构中成串的电荷运动，粒状结构使厚膜电阻产生较高的电流噪声，相同尺寸下，电阻值越高（金属成分越少），噪声越高，稳定性越差；——因为厚膜电阻中的自由电子受到电场力的作用下，在运动过程中碰撞的概率（杂质颗粒多）远大于薄膜电阻，所以电子运动更加杂乱，噪声更大。 厚膜电阻结构中的玻璃成分在电阻加工过程中形成玻璃相保护层，因此厚膜电阻的抗湿性高于薄膜电阻，更不容易被氧化。 ​ 薄膜电阻一般是作为精密型电阻和高频型电阻的选择。而厚膜电阻器价格便宜，小型化，寄生电感&#x2F;电容相对小，足以满足一般的数字电路硬件设计中对于电阻器的要求。 6，金属膜电阻器​ 金属箔电阻器的各个方面表现来看，它都是目前最接近完美的电阻器，或则说是在众多电阻器中最像“电阻器”的电阻器，是理想的精密电阻器。 ​ 金属箔电阻：通过真空熔炼形成镍铬合金，然后通过滚碾的方式制作成金属箔，再将金属箔黏合在氧化铝陶瓷基底上，再通过光刻工艺来控制金属箔的形状，从而控制电阻大小的电阻器。 特点： 高精度：调阻分辨率可达0.0005%（5ppm）； 低功率系数（PCR）：对电阻施加额定功率，阻值变化单位为ppm&#x2F;W； 低TCR：极低温度漂移（0.2ppm&#x2F;c）； 高负载寿命稳定性：50ppm； 低噪声：金属箔电阻器产生的噪音最小，电流通过金属合金的内部微粒边界导通电路；微粒间的电流路径经过一个或者更多的金属晶体包括多层，更长的路径穿过分界线，减少了噪音产生的几率； 低寄生电感&#x2F;电容： 在平面形电阻中，电阻路径图案有意设计成为平行的几何直线以抵消电抗：蛇形平面电阻阻值路径如右下图所示 ，邻近反方向电流的互感减小了线路电感，也减小了电容。 、 7，绕线电阻器​ 绕线电阻器：是将合金（例如：镍铬&#x2F;锰铜合金）导线绕在氧化铝的陶瓷基板上，用圈圈的圈数来控制电阻值大小的电阻器；其表面通常涂有保护漆或则玻璃釉。 优点： 高精度：容差小至0.005%，可以用作精密电阻； 小电流噪声：合金材料本身是均匀、细致的晶体； 低TCR：合金材料的温度系数（TCR）很小；——铜的电阻温度系数非常大（约4000ppm&#x2F;℃），其它纯金属的电阻温度系数都非常大，只有几款金属合金温度系数小、电阻率大，才适合做线绕电阻（具体数据参考上章）。 大功率：电阻散热性能好，体积做大后外加散热器，功率能做的很高； 工作稳定、可靠性高，能承受高温工作环境（可达300℃）。 缺点： 由于采用绕线方式，所以寄生电感和电容都相对较大，不能应用于高频电路中； 相对片状电阻器更大的体积以及封装； 电阻器阻值范围受限，一般不超过100KΩ。 8，膜式电阻（1）碳膜电阻​ 碳膜电阻器：采用高温真空镀膜技术将碳紧密附在瓷棒表面形成碳膜，然后加适当接头切割，并在其表面涂上环氧树脂密封保护而成的，通过碳膜的厚度和碳浓度可以控制电阻的大小。 特点： 工艺相对碳合成电阻（采用碳棒）更加复杂一点，精度更高：±5%，±2%；——为了更加精确的控制电阻，在碳膜上加工出螺旋沟槽，螺旋越多电阻越大；最后加金属引线，树脂封装成型。 阻值范围广（2.1Ω~10MΩ）、极限电压较高、功率范围宽（可达10W）； 有极好的长期稳定性，电压的改变对阻值的影响极小，且具有负温度系数； 电阻原料价格低，制作容易，生产成本低，碳膜电阻价格便宜，但体积较大； 由于碳质材料本身的原因，温度特性相对较差。 （2）金属膜电阻器​ 金属膜电阻器：利用真空沉积技术在白陶瓷棒上形成一层镍铬合金镀膜，然后在镀膜上加工出螺旋沟槽来精确控制电阻。 优点： 精度高达0.1%（精密电阻），同时由于制造简单，可以随意的调整材料成分与镀膜厚度，电阻范围很宽（1Ω~10MΩ），可以做E192系列；——E192系列有192种数字，E192系列的电阻格误差很小，有192个基本数，有0.5%，0.2%，0.1% 共3种精度；看到这种规格的精度，就知道价格就不低了，多用于对精度有较高要求的场合。 电压稳定性好，温度特性（TCR，约100ppm&#x2F;℃）好；——采用高稳定性的特种合金作为电阻材料（翻译一下：这是合金材料本身的特性，跟其它没毛关系），经过真空加热、蒸发获得，具有较好的耐热性，各项性能稳定。 耐热性好，额定工作温度为70℃，最高工作温度达155℃； 采用高热传导瓷心，散热能力强，功率负荷大，最高可达25W； 工作频率范围宽，噪音小，可以应用于高频电路中（高频电阻）； 在相同功率下，体积相对碳膜更小，约为碳膜电阻的一半，但成本更高； 应用非常广泛，适用于交流、直流及脉冲电路。 （3）玻璃釉电阻器​ 玻璃釉电阻器：是由金属银、铑、钌等金属氧化物和玻璃釉粘合剂混合成浆料，涂复在陶瓷骨架体上，经高温烧结而成。 金属玻璃釉电阻器特点： 耐高温，耐湿性好，稳定性好； 噪声小，高频特性好； 温度系数小； 阻值范围大，阻值范围为4.7Ω~200 MΩ； 额定功率有1&#x2F;8 W、l&#x2F;4 W、l&#x2F;2 W、1 w、2 W，大功率有 500 W； 耐高压，最高电压高达50KV。 9，电阻器应用 在相同电压下，使用不同阻值的电阻器可以得到不同的电流：I &#x3D; U&#x2F;R； 在相同电流下，使用不同阻值的电阻器可以得到不同的电压：U &#x3D; I*R。 ​ 我们根据U&#x3D;I*R公式可以看到：在实际应用中电阻器必须通过其电压降或电流大小，才能体现其作用，而“电阻”特性本身并不能参与信息处理、传输、存储。 电阻器应用： 保持信号状态稳定：上&#x2F;下拉应用； 限制线路电流大小：限流应用； 调整线路信号质量（例如：匹配特征阻抗）：线路匹配应用； 电源电路中监测功耗：电流监测应用。 （1）上拉&#x2F;下拉应用​ 上拉&#x2F;下拉：是将不确定的信号通过一个电阻器钳位在高&#x2F;低电平，电阻器同时起限流作用；上&#x2F;下拉电阻器的基本原理是：提供被上下拉的电路一定的电流驱动能力。 上拉是对电路注入电流，即拉电流； 下拉是对电路输出电流，即灌电流。 ​ 电阻器的上拉&#x2F;下拉应用非常广泛，在不同硬件电路设计中，其作用也有所不同： 保证器件输入管脚状态的稳定： 边沿触发的输入管脚，如果器件内部没有内置上&#x2F;下拉电阻，需外接上&#x2F;下拉电阻器，使维持管脚不被误触发；——例如中断、复位等可能为边沿触发的重要信号，必须保证其在工作期间的状态稳定。 有些应用场合不希望出现高阻状态，可以通过上拉&#x2F;下拉电阻器的方式使处于稳定状态；——一些器件在上&#x2F;下电瞬间的输出不受控（高阻），为保证输入器件管脚的稳定，外接上&#x2F;下拉保证其正确状态；例如输入MOS管G极的信号，如果是高阻状态，则G极电荷积聚可能导致MOS管误导通。 确保端口常态时有确定电平，例如：检测低电平的输入管脚，接上拉电阻器，使其常态就为高电平（适用一般设计原则）；——端口上&#x2F;下拉的默认状态是否为管脚触发状态，取决于其应用需求，例如：单板上某个器件的启动有特定要求，初始默认要一直处于复位状态（假设低电平复位），那么其复位信号需下拉。 解决总线驱动能力不足：上拉电阻提升管脚输出拉电流，下拉电阻提升管脚输出灌电流大小；——例如，有些单片机的高电平驱动能力不足（一般器件管脚的低电平驱动电流大于高电平驱动电流），需要增加上拉电阻。 悬空输入管脚比较容易受外界的电磁干扰（天线）， 外部上&#x2F;下拉可以提高总线的抗电磁干扰能力。 ​ 2.用于输出&#x2F;输出信号电平的转换或匹配： 电平匹配：输出、输入信号不同电平之间的转换；——（1）TTL电平输出驱动CMOS电平管脚，由于高电平电压判断不同，需要上拉电阻器用于提升驱动电压； （2）不同差分电平（LVPEC,HSTL等）的共模电压有差别，采用AC耦合后再输入端电阻上&#x2F;下拉分压得到满足输入共模电压要求的电平。 用于传输线终端匹配（例：戴维南匹配）。 ​ 3.用于对CMOS结构器件输入管脚的保护： 保护CMOS结构输入管脚内的保护二极管，防止保护二极管过流损坏； ——有些器件输入管脚内置保护二极管，防止输入信号电压超出管脚允许电压范围后破坏输入管脚内部结构，上下拉电阻有一定的分流能力，利于信号电平的稳定。 COMS结构输入管脚中不用的管脚不能悬空，一般接上&#x2F;下拉电阻降低输入阻抗，提供泄荷通道，防止静电造成损坏。 ——由于CMOS结构管脚的输入阻抗非常大，积聚在管脚上的电荷不容易泄放，容易损坏输入管脚。 ​ 4.上拉电阻为OD&#x2F;OC门提供驱动电流： 根据IIC总线协议，上拉电阻的取值和I2C总线的频率及负载电容有关，电阻的大小对时序有一定影响，对信号的上升时间和下降时间也有影响； 电阻计算公式：Rmin＝{Vdd(min)-0.4V}&#x2F;3mA；Rmax &#x3D; (T&#x2F;0.874) *C。 取值原则 从节约功耗及芯片的灌电流能力考虑：电阻值应当足够大； ——电阻大，电流小，损耗小。 从确保足够的驱动电流考虑应：电阻值当足够小； ——电阻小，电流大，驱动能力大。 过大的上拉电阻阻值，可能会使边沿变平缓（例如OD&#x2F;OC门，靠上拉提供驱动电流）。 综合考虑以上三点原则，一般在数字电路的上&#x2F;下拉电阻设计中选取：1k到10k之间。 （2）限流运用 LED点灯电路：电阻器用于限制发光二极管的电流，控制发光量； 三极管&#x2F;MOS管电路，电阻用于控制三极管&#x2F;MOS管所处的工作状态。 按键、开关电路：串接电阻器用于限制电容器短路瞬间时的大电流冲击，避免电容器损坏和产生过冲脉冲； ESD防护电路：人容易触碰到的板内器件，可插拔连接器（单端信号线），面板接口（复位按键，指示灯等）等，这些位置更容易由接触而引入ESD，导致器件损坏，串接大电阻（百欧姆级别）用于ESD防护； 开关电源脉冲尖峰吸收电路（RCD）：MOS管开关瞬间存在电压尖峰，RCD电路用来吸收漏感能量，减缓电压尖峰。 （3）0Ω电阻使用 模拟地与数字地单点接地：如果将模拟地和数字地大面积直接相连，会导致数模之间的互相干扰；单点接地有很多种方式：阻、容、感（包括磁珠），单过孔，金属化机械孔等等，它们有不同的优缺点，根据实际需求进行设计； 磁珠连接：带阻限波器，抑制某一频段（高频段）的噪声，预先评估噪声频点，并选择合适磁珠； 电容连接：隔直通交流，没有直流通路，会累计电荷造成浮地； 电感连接：抑制低频段噪声干扰； 0Ω连接：相当于很窄的电流通路（类似单点接地），能够有效地限制环路电流，使噪声得到抑制。 为调试方便或电路兼容设计需求； 作跳线使用；例如：IIC控制器二选一电路； 匹配电路中参数不确定，用0Ω替代，调试后再替换； PCB布线时走线困难，用0Ω跳过； 方便调试； 用于电流回路平面不连续时的跨接： 替代跳线座&#x2F;拨码开关：使用选焊确定不同单板&#x2F;应用场景的不同配置，避免拨码开关&#x2F;跳线帽的失效风险。 （4）其它应用 降压应用：电流经过电阻器时必然会产生电压降，电阻值越大，电压降越大（U&#x3D;I*R）； 放大器的负载电阻：应用了电阻器的降压作用； 电阻器R1和R2构成一个分压器：经过这两个电阻的电流I相等。 RC滤波网络：一种特殊的分压器。 电源电流监测应用：采用精密大功率电阻（例如：金属箔电阻器）串接在电源电路上，缓启动芯片监测电阻两端电压，从而监控电源功率； 提供负载电路：一些开关电源&#x2F;LDO有最小工作负载的要求，此时在电源输出端增加并接电阻，用于提升电源模块工作的稳定性（与LDO整体传递函数有关，一般可选用电容ESR充当负载）； 传输线阻抗匹配应用：传输线阻抗匹配电阻是一种非常普遍的应用；一般分为：源端串联匹配和终端并联匹配两种，示意图如下所示。 10，电阻器失效机理 开路（主要失效）：主要失效机理为电阻膜烧毁或大面积脱落（电应力），基体断裂、引线帽与电阻体脱落（机械应力）； 阻值漂移超规范（次要失效）：电阻膜有缺陷或退化，基体有可动钠离子，保护涂层不良； 引线断裂：电阻体焊接工艺缺陷，焊点污染，引线机械应力损伤； 短路：银的迁移，电晕放电。","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"器件类","slug":"器件类","permalink":"https://lilongxin178.github.io/tags/%E5%99%A8%E4%BB%B6%E7%B1%BB/"}],"author":"工程小李"},{"title":"锁相环结构及原理探究","slug":"锁相环结构及原理探究","date":"2024-04-13T06:00:00.000Z","updated":"2024-10-27T07:28:58.255Z","comments":true,"path":"2024/04/13/锁相环结构及原理探究/","permalink":"https://lilongxin178.github.io/2024/04/13/%E9%94%81%E7%9B%B8%E7%8E%AF%E7%BB%93%E6%9E%84%E5%8F%8A%E5%8E%9F%E7%90%86%E6%8E%A2%E7%A9%B6/","excerpt":"","text":"锁相环结构及原理探究一、锁相环基本工作原理及常见PLL1.1锁相环基本工作原理PLL 的起始部分是稳定晶体参考频率， XTAL。它被 R 计数器分频到较低频率。这一经分频后的频率被称为比较频率（Fcomp），并输入到鉴相器。鉴频鉴相器输出电流，其直流均值与比较频率和经 N 分频器后的输出频率的相位差成比例。这个比例常数为 KФ，它就是电荷泵能流出或吸入电流的幅度。理论上，这一项除以 2π 是正确的，但没有必要在本书所有公式中这样做，因为它会被 VCO 中带来的 2π 所抵消。所以， KФ 单位是 m A &#x2F; (2π 弧)。将鉴相器输出的直流均值电流乘以环路滤波器阻抗 Z(s)，就得到 VCO（压控振荡器）输入电压。 VCO是电压到频率的转换器，具有比例系数 KVCO 。环路滤波器是低通滤波器，通常用分离器件实现。 环路滤波器随应用而各异。 调谐电压调节 VCO的输出相位。这样 VCO 的输出相位经 N 分频后就与比较频率相位相等。因为相位是频率的积分，所以也就意味着， VCO 的输出频率经 N 分频后与比较频率相等。输出频率可由下式表达：$$F_{out}&#x3D;\\frac{N}{R}*XTAL$$ 1.2常见PLL类型第一个 PLL 集成芯片大约出现在 1965 年，是一个纯粹的模拟器件。采用一个模拟乘法器(四象限乘法器)作为鉴相器;环路滤波器用无源或者有源 RC 滤波器实现，利用大家熟知的压控振荡器 VCO产生 PLL的输出信号。今天,我们称这种类型的 PLL为“线性PLL”(LPLL)。在接下来的几年里,PLL 缓慢而稳定地转移到数字领域。大约在 1970年出现了第一个数字 PLL(DPLL),实际上,它是一个混合器件,仅仅鉴相器采用数字电路实现，即使用一个 EXOR门或者一个JK 触发器,剩下的模块仍然是模拟电路。几年以后,发明了“全数字”PLL(ADPLL)。ADPLL毫无例外地全部由数字功能模块组成，因此不包含任何无源元件,如电阻和电容等。类似滤波器,PLL 也可以用软件实现。在这种情况下,PLL 的功能不再用一些专用的硬件实现，而是用计算机程序完成。我们称这种 PLL为SPLL ​ 总结:线性PLL（LPLL）、数字PLL（DPLL)、全数字PLL（ADPLL）、程控PLL（SPLL） ​ 二、PLL各组件组成及其传递函数​ 我们把PLL分成几个子模块，分别是PD（PFD+CP）、环路滤波器（Loop Filter，LPF）、VCO和分频器Divider。首先推导各子模块的传递函数。 2.1 PD（PFD+CP）（带有电荷泵输出的鉴相器）​ PD的输入是参考时钟和反馈时钟的相位差，输出是CP的电流Icp。实际上，PLL的锁定过程中，PD并不是一个连续的模型，CP的电流仅在有相位差的时间段内会打开，因此它是一个离散的信号。但是为了简化计算，我们构建PLL线性模型中，把PD看作一个连续输出电流信号的模块。为了保证这个结论近似成立，必须要有一定的条件约束。这个条件就是：PLL环路的响应要远小于参考时钟的频率，也就是说环路带宽要小于1&#x2F;10~1&#x2F;15的参考时钟频率。 PD的函数图像如上图所示，在-2π~2π的区间内，都有相位差和Icp的线性关系，其斜率为，即PD的传递函数：$$K_{PD}&#x3D;\\frac{I_{cp}}{2\\pi}$$ 鉴相器种类总结：1.模拟乘法器鉴相 2.EXOR（异或门）鉴相 3.JK触发器鉴相 4.PFD鉴相器 PFD鉴相器： 2.2 LPF（环形滤波器）LPF是由电阻电容构成的，输入为CP的电流Icp，输出为控制VCO的电压Vctrl，传递函数Z(s)的推导比较容易。下图列出了一阶、二阶、三阶环路滤波器的电路图。 由上图可知，一阶环路滤波器的传递函数为：$$Z(s)&#x3D;\\frac{1+RC_1s}{C_1s}$$二阶环路滤波器的传递函数为：$$Z(s)&#x3D;\\frac{s+\\frac{1}{RC_1}}{C_2s(s+\\frac{1}{R(C_1|C_2))})}$$三阶环路滤波器的传递函数为：$$Z(s)&#x3D;\\frac{\\frac{1}{C_{3}s}}{\\frac{1}{C_{3}s}+R_{3}}\\times[(\\frac{1}{C_{1}s}+R)\\parallel\\frac{1}{C_{2}s}\\parallel(\\frac{1}{C_{3}s}+R_{3})]$$ 2.3 VCO&#x2F;CCO（受控振荡源） VCO是PLL的核心模块，主要分为Ring-VCO和LC-VCO两大类，有很多巧妙复杂的具体电路结构，但在PLL线性模型中，我们把它看成一个理想的积分器，其输出频率随输入电压线性变化，即： $$\\omega_{out}&#x3D;\\omega_0+K_{VCO}\\cdot V_{ctrl}$$其中斜率为Kvco。VCO的输入为LPF的输出电压Vctrl，输出为相位，上述公式两侧对时间进行积分（忽略），即： $$\\int\\omega_{out}dt&#x3D;K_{VCO}\\cdot\\int V_{ctrl}dt$$频率对时间的积分为相位，整理可得其传递函数为： $$\\frac{\\phi_{out}}{V_{ctrl}}&#x3D;\\frac{K_{VCO}}{s}$$因为 VCO是一个模拟电路,它的参数(比如$\\omega_{0}$）易受到器件偏差温度漂移和老化等问题的影响。大多数 VCO的数据中都会标明的温度系数通常是以 ppm&#x2F;C 为单位给出。 2.4 Divider（分频器） 分频器的模型比较简单，其输入为VCO的输出相位，输出为反馈时钟相位，传递函数为$$\\frac{\\phi_{div}}{\\phi_{out}}&#x3D;\\frac{1}{N}$$​ 若 VCO频率较高， 用纯 CMOS 计数器则难以处理较高频率。 为避免这种困境， 常用预分频器将 VCO频率分频到较低频率区处理。预分频器常由二的幂次方来分频，这样易于实现。常用的预分频器件有：单模、双模、四模预分频器。其中，双模预分频器最为常用。 2.5 PLL的环路增益、闭环传递函数根据我们上述推导的PLL各模块的传递函数，我们可以很容易的写出PLL的环路增益、闭环传递函数（LPF以二阶为例），分别是： 有传递函数：$$H_(s)&#x3D;K_{PD}\\cdot Z(s)\\cdot\\frac{K_{VCO}}{s}&#x3D;\\frac{K_{PD}\\cdot K_{VCO}\\cdot(s+\\frac{1}{RC_{1}})}{C_{2}s^{2}(s+\\frac{1}{R(C_{1}|C_{2}))})}$$环路增益即环路上PD、LPF、VCO和Divider传递函数的乘积： $$H_{loop}(s)&#x3D;\\frac{K_{PD}\\cdot Z(s)\\cdot K_{VCO}}{N\\cdot s}&#x3D;\\frac{K_{PD}\\cdot K_{VCO}\\cdot(s+\\frac{1}{RC_1})}{N\\cdot C_2s^2(s+\\frac{1}{R(C_1|C_2))})}$$闭环传递函数即： $$H_{close}(s)&#x3D;\\frac{H_{open}(s)}{1+H_{loop}(s)}&#x3D;\\frac{\\frac{K_{PD}\\cdot K_{VCO}}{C_{2}\\cdot}\\cdot(s+\\frac{1}{RC_{1}})}{s^{3}+\\frac{1}{R(C_{1}|C_{2})}\\cdot s^{2}+\\frac{K_{PD}\\cdot K_{VCO}}{N\\cdot C_{2}}\\cdot s+\\frac{K_{PD}\\cdot K_{VCO}}{N\\cdot R\\cdot C_{1}\\cdot C_{2}}}$$ 2.6 PLL各模块的噪声对PLL输出相位噪声的贡献输入参考时钟的输出噪声为相位噪声；PD的输出噪声为CP的电流噪声；LPF的输出噪声为Vctrl上的电压噪声；VCO的输出噪声为相位噪声；Divider的输出噪声为相位噪声。各模块的输出噪声到PLL输出端的传递函数，即各模块的输出端到PLL输出端的开环增益，除以1加环路增益，各模块的传递函数及其噪声到PLL输出端的传递函数总结如下表： 可以看出输入参考时钟、PD和Divider的噪声为低通特性，LPF的噪声为带通特性，VCO的噪声为高通特性。 值得注意的是，这里没有讨论PD的输出噪声对PLL的影响，我的理解是，因为在PLL锁定或者近似锁定的情况下，相位差占整个周期的比例很小，也就是说，每个周期内，只有很小比例的时间CP会开启并引入电流噪声，因此可以忽略。 对于不同模块引入的噪声，除了在设计上降低其本身的噪声外，也可以通过PLL系统参数的调整来抑制噪声，如下图所示。减小PLL的环路带宽，可以抑制低通的带内噪声，如输入参考时钟的噪声、CP的噪声和Divider的噪声；增大PLL的环路带宽，可以抑制高通的带外噪声，即VCO的噪声。当然，通过减小（增大）带宽，来抑制带内（带外）噪声，势必也会导致带外（带内）的噪声贡献增大。 这里有一个重要的结论：PLL的相位噪声，等于各模块输出噪声乘以其到PLL输出端的传递函数的平方加和。如下： $$\\varphi_{n,all}&#x3D;\\varphi_{n,ref}(N\\cdot\\frac{L\\left(s\\right)}{1+L\\left(s\\right)})^{2}+i_{n,rp}^{2}(\\frac{N}{K_{PD}}\\cdot\\frac{L\\left(s\\right)}{1+L\\left(s\\right)})^{2}+v_{n,ctri}^{2}(\\frac{K_{VCO}}{s}\\cdot\\frac{1}{1+L\\left(s\\right)})^{2}+\\varphi_{n,rco}(\\frac{1}{1+L\\left(s\\right)})^{2}+\\varphi_{n,div}(-N\\cdot\\frac{L\\left(s\\right)}{1+L\\left(s\\right)})^{2}$$这里有一个有意思的点，如果CP的电流噪声较大，应该如何优化呢？正常来说电流噪声与电流值成正比，因此减小Icp可以降低CP本身的电流噪声，但是可以看到，其到PLL输出端的传递函数中，Kpd在分母上，并且是平方关系，一约分的话，还有一个Icp在分母上，也就是说，尽管减小Icp降低了CP本身的电流噪声，但是却导致对PLL输出端的噪声贡献增大。正确的方法应该是增大Icp。当然，考虑到实际情况Icp打开的时间占比很短，这个噪声的贡献实际应该很小。 三、 PLL关键参数3.1 PLL参数设计时需要考虑的参数因子 1.参考(或输人)信号 $u_1(t)$2.参考信号的角频率$\\omega_{1}$3.VCO 的输出信号 $u_2(t)$4.一 输出信号的角频率 $\\omega_{2}$5.鉴相器的输出信号 $u_{\\mathrm{d}}(t)$6.环路滤波器的输出信号 $u_{\\mathrm{f}}(t)$7.相位误差 $\\theta$8.定义为信号 $u_{\\mathrm{i}}(t)$ 和信号 $u_{2}(t)$之间的相位差 重要参数（用以确定锁相环稳定性）： 1.环路带宽（应在输入频率的1&#x2F;10—1&#x2F;15左右） 2.阻尼系数 3.固有频率（自然频率） 3.2 PLL重要参数推导已知：$$H_{close}(s)&#x3D;\\frac{H_{open}(s)}{1+H_{loop}(s)}&#x3D;\\frac{\\frac{K_{PD}\\cdot K_{VCO}}{C_{2}\\cdot}\\cdot(s+\\frac{1}{RC_{1}})}{s^{3}+\\frac{1}{R(C_{1}|C_{2})}\\cdot s^{2}+\\frac{K_{PD}\\cdot K_{VCO}}{N\\cdot C_{2}}\\cdot s+\\frac{K_{PD}\\cdot K_{VCO}}{N\\cdot R\\cdot C_{1}\\cdot C_{2}}}$$将该传递函数分母写成归一化形式（电路及控制理论） 分母：$$s^{2}+2\\zeta\\omega_{\\mathrm{n}}s+\\omega_{\\mathrm{n}}^{2}$$ 所以有$$H(s)&#x3D;\\frac{2s\\zeta\\omega_\\mathrm{n}+\\omega_\\mathrm{n}^2}{s^2+2s\\zeta\\omega_\\mathrm{n}+\\omega_\\mathrm{n}^2}$$ 此时有固有频率及阻尼系数为：$$\\omega_{n}&#x3D;\\sqrt{\\frac{K_{loop}}{N}},\\xi&#x3D;\\frac{\\omega_{n}}{2\\cdot\\omega_{Z}}$$及环路带宽：$$\\omega_{3dB}&#x3D;\\omega_n\\cdot\\sqrt{a+\\sqrt{a^2+1}},a&#x3D;2\\xi^2+1-\\frac{\\omega_n\\cdot N}{K_{PD}\\cdot K_{VCO}}\\cdot(4\\xi-\\frac{\\omega_n\\cdot N}{K_{PD}\\cdot K_{VCO}})$$为保证环路的稳定和快速锁定，阻尼系数取值范围一般为0.5~1，如下图，取值过大或者过小，都会在时域上引起震荡。","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"小知识","slug":"小知识","permalink":"https://lilongxin178.github.io/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/"}],"author":"工程小李"},{"title":"LDO工作原理简单探讨","slug":"LDO工作原理简单探讨","date":"2024-01-20T06:00:00.000Z","updated":"2024-10-27T07:37:21.185Z","comments":true,"path":"2024/01/20/LDO工作原理简单探讨/","permalink":"https://lilongxin178.github.io/2024/01/20/LDO%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%E7%AE%80%E5%8D%95%E6%8E%A2%E8%AE%A8/","excerpt":"","text":"LDO工作原理简单探讨一、LDO介绍​ LDO英文名：low dropout regulator，低压差线性稳压器。​ 电源的分类有很多种，比如开关电源、逆变电源、交流电源等等。在移动端消费类电子产品中，常用的有DCDC电源和LDO电源两种，DCDC的优点是效率高，但是噪声大；LDO正相反，它是效率低，噪声小。​ 这两种电源具体在什么场景下使用不能一概而论，通常而言，对于噪声不太敏感的数字电路多可以优先考虑DCDC，而对于模拟电路，由于对噪声比较敏感，可以优先考虑LDO，但在大部分系统中，我们为了获得较好的电源效率以及稳定的电源系统，在进行设计时我们常常将两款电源系统进行混合使用。 二、LDO模型及工作原理探讨先列举出我们可能较为常见的一些LDO模型三极管型LDO： PMOS型LDO： NMOS型LDO： ​ 此时，我们发现三种结构大同小异，只有在管子的选择上略有不同，那么我们就将其分成两种结构（三极管结构、MOS管结构）进行分析。 三极管型原理推导：​ 我们对三极管型的结构进行剖析，首先，我们能看到由电阻R和二极管Dz组成的稳定电压源（Vref），以及R1、R2、R3组成的分压网络，以及RL所代表的输出负载电阻。那么此时三级管以及运放所组成的应该是什么呢？​ 我们回到LDO的名字上，为什么要叫低压线性稳压器，那我在此先进行简单的猜测，暂且认为LDO是线性的一种元件（暂定）。​ 那么运放在此处又是什么作用呢？有正有负，又没有反馈用的电阻，那么它是不是比较器呢，我们都知道运放开环使用就是比较器嘛。但是仔细想想，好像无法将此处的运放当作比较器来使用。运算放大器的开环增益普遍在80dB以上，并且我们在实际使用LDO时都知道我们的输出会有“纹波”，假设纹波5mV，经过分压网络后有2mV，此时运算放大器以80dB的开环增益计算，输出最高都可以达到20V。一般来说，哪怕运放输出电压轨足够高，可以令输出最高达到20V，但此时三极管或者MOS管在大部分时间是处于导通状态的，那导通了就与我们上面的假设背道而驰了，并且我们知道开关电源正因为管子做开关使用，在导通和截止两个状态变换，那此时这种状态显然也不是LDO该有的工作状态，那我就只能将运放用法进行变换。​ 那我们给它加上反馈呢?加上反馈后，我们可以得到以下结构： ​ 此处反馈所使用的是复阻抗，具体为何下文在进行解释。​ 当加入反馈后，运放便由比较器变成了误差放大器，那么此时我们就可以更简单的去分析LDO的原理了。再上一张图： ​ ​ 由于运算放大器在开环增益足够大且具有负反馈电路的工作条件下，会具有虚短的特性，所以当误差放大器在系统稳定时，有：$$VFB&#x3D;Vref$$​ 此时，误差放大器有一稳定输出Vc&#x2F;Vb，此时三极管在Vb的作用下，有：$$Ie&#x3D;Ib*β$$ 负载变化时，有两种情况：1.当负载变大时​ 负载变大时，RL变小，此时由于电流IL不变，Vout随之下降，误差放大器同相反相之间产生误差，输出Vc+∆Vc,此时三极管基极电压增加，Ib增加，Ie增加，电流增加后，由于$$Vout&#x3D;RL*IL$$​ 所以，Vout会逐渐上升直到稳定到输出值 2.当负载变小时​ 负载变小时，RL变大，此时由于电流IL不变，Vout随之上升，误差放大器同相反相之间产生误差，输出Vc-∆Vc,此时三极管基极电压下降，Ib减小，Ie减小，电流减小后，由于$$Vout&#x3D;RL*IL$$​ 所以，Vout会逐渐下降直到稳定到输出值 ​ 负载变化调整输出的过程，也可以看作电路系统反馈稳定的过程，通过反馈环路的设计以达到一个稳定的输出环境。 三极管型LDO中三极管的工作区​ 可以看到，在上述推导中进行了合理假设，并验证了假设的理论可能性。​ 三极管在上述的探讨中，Ib与Ie始终具有着倍数关系，我们知道这种状态是三极管的放大区。​ 以下是三极管的工作区特点，以及输出特性曲线，以便理解对比。 (1)截止区：三极管工作在截止状态，当发射结电压Ube小于0.6—0.7V的导通电压，发射结没有导通集电结处于反向偏置，没有放大作用。(2)放大区：三极管的发射极加正向电压，集电极加反向电压导通后，Ib控制Ic，Ic与Ib近似于线性关系，在基极加上一个小信号电流，引起集电极大的信号电流输出。(3)饱和区：当三极管的集电结电流IC增大到一定程度时，再增大Ib，Ic也不会增大，超出了放大区，进入了饱和区。饱和时，Ic最大，集电极和发射之间的内阻最小，电压Uce只有0.1V~0.3V，Uce&lt;ube，发射结和集电结均处于正向电压。三极管没有放大作用，集电极和发射极相当于短路，常与截止配合于开关电路。 三级管型LDO简单仿真 MOS管型LDO原理推导：​ MOS管型LDO与三极管型LDO的差别在于它所使用的管子不同。在结构相同的条件下，可直接替换管子进行分析。 MOS管的漏源电流工作区特性​ 在拉扎维中，对MOS管的讨论在三极管区和饱和区。 ​ 此时电流公式为：$$I_D&#x3D;\\mu\\cdot\\frac{\\epsilon_{ox}}{t_{ox}}\\cdot\\frac WL\\cdot\\left[(V_{GS}-V_{TH})\\cdot V_{DS}-\\frac12V_{DS}^2\\right]$$ ​ 此时电流公式为：$$I_D&#x3D;\\frac12\\beta\\frac W{L^{\\prime}}(V_{GS}-V_{TH})^2$$​ 由上图可以发现两个工作区的漏源电流公式只有VGS一个变量，那么从这里就可以看出MOS管的LDO原理依旧是依靠误差放大器所带来的电压变化引起功率输出级的电流变化。 MOS管型LDO中MOS管的工作区​ 从上文中的MOS管漏源电流公式以及电流输出图像，可以看出MOS管的漏源电流输出并不像三极管的电流输出机制。​ MOS管的工作区需要从VGS和VDS两个方面进行分析，MOS管型的LDO可能会工作在三极管区或者饱和区。但为了达到一个较为良好的工作环境（低压降）设计师常常将工作区设置在饱和区中，只有在特殊条件下LDO才会工作在三极管区。​ 压降小时工作在线性区，损耗由导通电阻和电流决定；压降大时工作在饱和区，损耗由压降和电流决定，工作在饱和区时，环路性能比线性区好，但压降损耗增大。​ 线性区由于其增益比饱和区小，所以环路相对较差。但在补偿的条件下现在的确已经可以控制，并正常使用。 MOS管型LDO简单仿真 三、LDO输出公式推导 ​ 如图，将mos管到输出负载电阻部分的传递函数设为H(S),再将误差放大器的反馈环的传递函数设为G(s)，那么，此时系统整体传递函数流程图为： ​ 但在该系统中，当Vin为定值时，可以暂且不以Vin为系统输入。那么我们可以看到此时Q1处MOS管三个引脚，D为Vin(定值)，S为Vout（输出），那么我们只能从G级看起，将Vc作为新的输入。​ 那么此时有新的传递函数，为： ​ 又已知：$$Vc(s)&#x3D;Verr(s)×G(s)$$​ $$Verr(s)&#x3D;Vref(s)-\\alpha Vout(s) 此处\\alpha为电阻分压系数$$​ 那么加以转换，可得到新的系统传递函数为（此处Zout可看作MOS管漏源电阻）： ​ ​ 那么，此时的闭环输出公式为：$$V_{\\mathrm{out}}(s)&#x3D;\\frac{V_{\\mathrm{ref}}(s)}{\\alpha}\\frac{G(s)H(s)}{1+G(s)H(s)}-\\frac{Z_{\\mathrm{out},0\\mathrm{l}}(s)}{1+G(s)H(s)}I_{\\mathrm{out}}(s)$$​ 显然可得，当开环增益G(s)H(s)足够大时，有公式为：$$V_{\\mathrm{out}}&#x3D;\\frac{V_{\\mathrm{ref}}}\\alpha$$","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"小知识","slug":"小知识","permalink":"https://lilongxin178.github.io/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/"}],"author":"工程小李"},{"title":"TI——C2000芯片自动代码生成及示例（二）——从机ADC采集配置及主机串口采集","slug":"TI——C2000芯片自动代码生成及示例（二）——从机ADC采集配置及主机串口采集","date":"2024-01-10T06:00:00.000Z","updated":"2024-02-25T12:55:24.100Z","comments":true,"path":"2024/01/10/TI——C2000芯片自动代码生成及示例（二）——从机ADC采集配置及主机串口采集/","permalink":"https://lilongxin178.github.io/2024/01/10/TI%E2%80%94%E2%80%94C2000%E8%8A%AF%E7%89%87%E8%87%AA%E5%8A%A8%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%8F%8A%E7%A4%BA%E4%BE%8B%EF%BC%88%E4%BA%8C%EF%BC%89%E2%80%94%E2%80%94%E4%BB%8E%E6%9C%BAADC%E9%87%87%E9%9B%86%E9%85%8D%E7%BD%AE%E5%8F%8A%E4%B8%BB%E6%9C%BA%E4%B8%B2%E5%8F%A3%E9%87%87%E9%9B%86/","excerpt":"","text":"TI——C2000芯片自动代码生成及示例（二）——从机ADC采集配置及主机串口采集一、搭建从机向主机发送ADC采集数据的代码模型（1）代码模型功能​ 该代码模型先由ADC进行电压采集，再进行数据的判断。在1.65V及以上，闪烁F280049评估版上的LED5，反之闪烁LED4。 （2）添加所需模块，以及部分模块设置1.添加一个ADC模块，其参数按默认设置2.添加一个SCITransmit模块，其参数按默认设置3.添加两个CompareToConstant模块,按照下图的参数进行配置 4.添加一个Rate Transition模块 5.添加两个 Digital Output 模块（配置LED所在的GPIO进行翻转） 6.完成从机（F280049）板载程序的代码模型 ​ 最后进行下载即可。 二、通过使用SCI模块在主机（Simulink）上显示ADC模块所采集到的数据（1）主机模型功能​ 该代码模型由SCI Setup模块和SCI Receive模块进行数据的采集，并对采集回的数据进行处理对电压进行计算并输出在Scope模块上。 （2）搭建主机模型1.添加模块与参数设置(1)添加一个 Host&#x2F;SCI Setup 模块（由于从机SCI未进行设置，此处可直接使用默认设置）。PS:如果用户的C2000 LaunchPad XL实验板的串口号不是1-4，请先行将串口号修改为1-4，然后才能进行下面的工作。 (2)添加一个 Host&#x2F;SCI Receive 模块。 (3)添加一个 Gain 模块（因为电压轨为3.3V，ADC为12位为4096，故参数设为3.3&#x2F;4096） （4）主机模型 （5）进行保存，点击运行​ 可以看到开发板在接入3.3V时，LED5闪烁。当ADC引脚接入GND时，LED4闪烁。 ​ 使用上位机进行数据检测，当接入3.3V时 ​ 从结果看，SCI通信与ADC检测均无误。 附录串口号修改1.打开设备管理器 2.右击你需要修改串口号的设备，点击属性 3.在“端口设置”中选择“高级” 4.进行修改并确认","categories":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/categories/DSP%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/tags/DSP%E8%AE%BE%E8%AE%A1/"},{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"}],"author":"工程小李"},{"title":"ADC、DAC的理论信噪比计算","slug":"ADC、DAC的理论信噪比计算","date":"2024-01-03T06:00:00.000Z","updated":"2024-10-27T07:34:45.390Z","comments":true,"path":"2024/01/03/ADC、DAC的理论信噪比计算/","permalink":"https://lilongxin178.github.io/2024/01/03/ADC%E3%80%81DAC%E7%9A%84%E7%90%86%E8%AE%BA%E4%BF%A1%E5%99%AA%E6%AF%94%E8%AE%A1%E7%AE%97/","excerpt":"","text":"ADC、DAC的理论信噪比计算一、量化噪声模型以及转换器理论信噪比公式推导​ 理想转换器对信号进行数字化时，最大误差为±½ LSB，如图的一个理想N位ADC的传递函数所示。对于任何横跨数个LSB的交流信号，其量化误差可以通过一个峰峰值幅度为q (一个LSB的权重)的非相关锯齿波形来近似计算。对该近似法还可以从另一个角度来看 待，即实际量化误差发生在±1&#x2F;2* q范围内任意一点的概率相等。虽然这种分析不是百分之百 精确，但对大多数应用是足够准确的。 ​ 有一种更详细地显示了量化误差与时间关系的图像。 ​ 同样，一个简单的锯齿波形就能提供足够准 确的分析模型。锯齿误差的计算公式如下：$$\\mathrm{e(t)&#x3D;st,-q&#x2F;2s&lt;t&lt;+q&#x2F;2s}$$​ e(t)的均方值可以表示为：$$\\overline{\\mathrm{e}^2(t)}&#x3D;\\frac{\\mathrm{s}}{\\mathrm{q}}{\\int_{-\\mathrm{q}&#x2F;2\\mathrm{s}}^{+\\mathrm{q}&#x2F;2\\mathrm{s}}(\\mathrm{s}t)}^2\\mathrm{dt}$$​ 进行简单的积分和简化可得：$$\\overline{\\mathrm{e}^2(t)}&#x3D;\\frac{\\mathrm{q}^2}{12}.$$​ 因此，均方根量化误差为：$$均方根量化噪声&#x3D;\\sqrt{\\mathrm{e}^2(t)}&#x3D;\\frac{\\mathrm{q}}{\\sqrt{12}}$$​ 锯齿误差波形产生的谐波远远超过DC至f s &#x2F;2的奈奎斯特带宽，然而，所有这些高阶谐波必 须折回(混叠)到奈奎斯特带宽并相加，产生q&#x2F;√12的均方根噪声。 ​ 量化噪声近似于高斯分布，几乎均匀地分布于从DC至 f s &#x2F;2的奈奎斯特带宽。这里假设量化噪声与输入信号不相关。在某些条件下，当采样时钟和信号通过谐波相关时，量化噪声将与输入信号相关，能量集中在信号的谐波中，但均方 根值仍然约为q&#x2F;√12。理论信噪比现在可以通过一个满量程输入正弦波来计算：$$满量程输入正弦波&#x3D;\\mathrm{v(t)&#x3D;\\frac{q2^N}2\\sin(2\\pi ft)}$$​ 因此，输入信号的均方根值为：$$满量程输入的均方根值&#x3D;\\frac{\\mathrm{q}2^{\\mathrm{N}}}{2\\sqrt{2}}$$​ 因此，理想N位转换器的均方根信噪比为：$$\\mathrm{SNR}&#x3D;20\\log_{10}\\frac{\\text{rms value of FS input}}{\\text{rms value of quantization noise}}$$ $$\\mathrm{SNR&#x3D;20\\log_{10}\\left[\\frac{q2^N&#x2F;2\\sqrt{2}}{q&#x2F;\\sqrt{12}}\\right]&#x3D;20\\log_{10}2^N+20\\log_{10}\\sqrt{\\frac32}}$$ $$\\mathrm{SNR}&#x3D;6.02\\mathrm{N}+1.76\\mathrm{dB}$$ ​ 虽然量化噪声的实际频谱相当复杂，难以分析，但推导出的简化分析对大多数应用足够准确。然而，必须再次强调，均方根量化噪声是在DC至fs&#x2F;2的完整 奈奎斯特带宽范围内进行测量。 二、峰峰值分辨率与有效分辨率​ 低带宽、高分辨率ADC的分辨率为16位或24位。但是，器件的有效位数受噪声限制，而噪声则取决于输出字速率和所用的增益设置。有些公司规定使用有效分辨率来表示该参数。 ​ 下图显示模拟输入接地时从一个Σ-Δ型ADC获得的典型直方图。理想情况下，对于这一固定的直流模拟输入，输出码应为0。但是，由于噪声影响，恒定模拟输入存在一个码字分布。此噪声包括ADC内部的热噪声和模数转换过程引起的量化噪声。 ​ 码字分布一般为高斯分布。均方根噪声是通过从该直方图产生的曲线计算出的，曲线的宽度决定均方根噪声。高斯曲线的分布是从负无穷大到正无穷大。然而，99.99%的码 字出现在6.6倍均方根噪声范围内。因此，峰峰值噪声为均方根噪声的6.6倍。 ​ 数据手册一般使用均方根噪声。噪声取决于所用的滤波器 频率和增益设置。通常，当模拟输入范围缩小时，均方根噪声也会变小。但是，由于满量程模拟输入信号也被减 小，因此有效位数降低。 ​ 假设当模拟输入范围为+2.56 V且，均方根噪声等于1.25μV。根据该数据计算信噪比：$$(20\\mathrm{log}((6.6\\times1.25\\text{E-6})&#x2F;(2.56\\times2))&#x3D;-115.85\\mathrm dB$$​ 据此计算峰峰值分辨率：$$115.85&#x3D;6.02\\mathrm{N}+1.76&#x3D;&gt;\\mathrm{N}&#x3D;(115.85-1.76)&#x2F;6.02&#x3D;19\\mathrm Bits$$​ 因此，在上述条件下，19个MSB中无闪烁位。 有些公司规定使用有效分辨率，而不是峰峰值分辨率。有效分辨率是通过均方根噪声而非峰值噪声计算出的。使用均方根噪声计算信噪比：$$(20\\mathrm{log}((1.25\\text{Е-}6)&#x2F;(2.56\\times2))&#x3D;-132.25\\mathrm dB$$​ 据此计算有效分辨率：$$\\begin{aligned}132.25&amp;&#x3D;6.02\\mathrm{N}+1.76&#x3D;&gt;\\\\\\mathrm{N}&amp;&#x3D;(132.25-1.76)&#x2F;6.02&#x3D;21.7\\mathrm Bits \\end{aligned}$$​ 因此，有效分辨率 &#x3D; 峰峰值分辨率 + 2.7位。 评估ADC时，应当认识到有效分辨率与峰峰值分辨率的计算方法 不同，有效分辨率比峰峰值分辨率大2.7位。此外，有效分辨率没 有突出闪烁位数，峰峰值分辨率则指出了不闪烁的位数，因而能 更好地表示性能。 ​ 对于一个ADC，其有效分辨率比峰峰值分辨 率高2.7位。因此，对于有效分辨率为22位的器件，其无闪烁分辨率为22 – 2.7 &#x3D; 19.3位。要了解器件对于一项应用的真正性能，必须确定所规定的是峰峰值分辨率还是有效分辨率。","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"小知识","slug":"小知识","permalink":"https://lilongxin178.github.io/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/"}],"author":"工程小李"},{"title":"TI——C2000芯片自动代码生成及示例（一）","slug":"TI——C2000芯片自动代码生成及示例（一）","date":"2023-12-23T06:00:00.000Z","updated":"2024-02-18T07:54:26.122Z","comments":true,"path":"2023/12/23/TI——C2000芯片自动代码生成及示例（一）/","permalink":"https://lilongxin178.github.io/2023/12/23/TI%E2%80%94%E2%80%94C2000%E8%8A%AF%E7%89%87%E8%87%AA%E5%8A%A8%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%8F%8A%E7%A4%BA%E4%BE%8B%EF%BC%88%E4%B8%80%EF%BC%89/","excerpt":"","text":"TI——C2000芯片自动代码生成及示例（一）一、简介​ 本文在配置完代码生成环境的基础上，以TI——TMS320F280049芯片为例，介绍建立模型、生成C代码，最后将代码烧写到芯片当中的详细操作过程，以及在使用中的常见问题解决方案。 二、操作流程及配置使用（1）新建工程及模型参数设置1.打开Simulink进行新建工程。 2.点击MODELING（建模）下的Model Settings（或快捷键Ctrl+E）打开模型参数配置页面： 3.由于芯片中运行的程序为离散信号，故将求解器中的步长类型设置为定步长，求解算法为离散模式，此处可设置步长时间为0.01s。 4.在Hardware Implementation（硬件实现）当中选择硬件型号。下拉可见在C2000系列各芯片型号，此处选择280049作为配置的芯片系列。 5.在Code Generation（代码生成）的Report（报告）处勾选Create Code generation report（创建代码生成报告）和 Open report automatically（自动生成报告），代码生成的过程中将自动生成报告。（其余选项非必选项，可依据需要进行勾选） （2）搭建F280049的GPIO点灯程序​ 1.打开库浏览器 2.搜索C2000，并寻找F280049型号芯片（或者你所使用的芯片型号） 3.双击打开该模块库，可以对其外设进行图形化设计。 4.在这里我们使用的是GPIO对LED进行控制，所以，可选择GPIO将其拖至Simulink的图纸上。 5.对GPIO配置完成后，给其一不断变换的常数，使其GPIO输出电平反转。 6.保存至工作文件夹 （3）代码生成（CCS下载和Simulink直接下载）1.在模型搭建完成后，在HARDWARE界面点击Build（快捷键Ctrl+B），自动生成C代码 2.在Diagnostic Viewer中出现Build process completed successfully证明代码已自动生成。 且此时，代码生成的报告也将出现。 3.此时，如果需要进行下载，可使用两种方式（MATLAB直接下载或者CCS进行下载） 先对此处进行检查，确认该处下载器配置文件存在（若没有可以进入CCS重新配置保存，并导入此处）。 4.然后依旧在刚才的界面进行下载，使用这个按键进行下载（Simulink直接下载) 4.打开CCS导入你所在的工作文件夹为CCS工程。（CCS下载） 导入工程后，使用CCXML文件进行下载。 三、过程中遇到的问题及注意事项注意事项：​ 1.MATLAB所有文件夹不要放置在存在中文的路径中。 ​ 2.工作文件夹尽可能不要选择C盘，可能会存在某些文件由于权限不足无法打开的情况。 ​ 3.Powershell的环境变量配置。（如果在编译时出现“代码生成文件不存在”的错误，且报错信息中存在“Powershell不是内部命令也不是外部命令”的话，极大可能为此处报错） ​ 4.也可能遇到CCS导入工程失败的问题。 解决方案：​ 1、2：改变工作文件夹的位置 ​ 3.在环境变量path后添加powershell的路径（C:\\Windows\\System32\\WindowsPowerShell\\v1.0） . 4.CCS无法导入遇到下图情况： ​ （1）找到工程文件下面给的.cproject文件。​ （2）利用记事本或者能打开的工具打开，有一行文字格式为这样的注释 1&lt;tool id=&quot;xxxx&quot; name=&quot;xxx&quot; superClass=&quot;xxxxx&quot;/&gt; 删除此行。 （3)重新启动软件在此导入即可导入成功。","categories":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/categories/DSP%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/tags/DSP%E8%AE%BE%E8%AE%A1/"},{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"}],"author":"工程小李"},{"title":"Stateflow 建模基础（1）","slug":"Stateflow 建模基础（1）","date":"2023-12-14T06:00:00.000Z","updated":"2024-02-13T04:20:32.278Z","comments":true,"path":"2023/12/14/Stateflow 建模基础（1）/","permalink":"https://lilongxin178.github.io/2023/12/14/Stateflow%20%E5%BB%BA%E6%A8%A1%E5%9F%BA%E7%A1%80%EF%BC%881%EF%BC%89/","excerpt":"","text":"Stateflow基础（1）一、简介及Stateflow的特点1.简介​ Stateflow是有限状态机(Finite State Machine，FSM)的图形实现工具，它可以用于解决事件驱动系统中复杂的逻辑问题。Stateflow 通过开发 FSM 和流程图的设计环境扩展Simulink的功能，在系统中可以用图形化的工具来实现各个状态之间的迁移。​ Stateflow 图表采用图形建模的方式构建层次化的、并行工作的状态和它们之间由事件驱动的逻辑迁移关系。Stateflow 在传统状态图的基础上扩展了控制流、MATLAB 函数、图形函数、真值表、临时运算符、直接事件广播，并可以集成用户自编 C 代码，而且通过Stateflow Coder 可以为 Stateflow 状态图模型自动生成C代码。 2.特点Stateflow的主要特点如下: (1)提供层次化、可并行的、具有明确执行语义的建模语言元素，并以自然易懂的形式来描述复杂逻辑系统。 (2)使用流程图定义图形化函数，使用 MATLAB 函数进行编程操作，使用真值表完成表格形式的处理。 (3)采用临时逻辑调度状态迁移与事件 (4)支持Mealy和Moore有限状态机。 (5)可集成用户自定义输人输出变量的C代码 (6)支持向量、矩阵、总线信号和定点数据类型。 (7)可进行静态模型检查，包括病态定义的真值表。 (8)可动态检测迁移冲突、死循环、状态不一致、数据范围错误和溢出问题 (9)仿真进行中以动画显示状态图的运行并记录数据，以便于对系统的理解和调试。 (10)集成了一个调试器，采用图形化断点进行单步调试，在调试时浏览其中的数据 二、构造并运行Stateflow图（设计过零比较器）1.打开 Stateflow 编辑器​ Stateflow 编辑器是一个图形环境，用于设计状态转移图、流程图、状态转移表和真值表。 要建立周期性或连续时间 Simulink 算法的条件、基于事件和基于时间的逻辑模型，请使用 [sfnew] 函数创建一个可在 Simulink 模型中作为模块进行仿真的 Stateflow 图。在 MATLAB 命令提示符处，输入： 1sfnew rectify % 在simulink中创建一个仿真图表 Simulink 创建一个名为 rectify 的模型，其中包含一个空的 Stateflow Chart 模块。要打开 Stateflow 编辑器，请双击图模块。 要为 MATLAB 应用程序设计可重用的状态机和时序逻辑，请使用 edit 函数创建可作为 MATLAB 对象执行的独立 Stateflow 图。在 MATLAB 命令提示符处，输入： 1edit rectify.sfx % 创建图表执行作为Matlab对象 如果文件 rectify.sfx 不存在，Stateflow 编辑器将创建名为 rectify 的空图。 ​ Stateflow 编辑器的主要组件是图画布、对象选项板和符号窗格。 图画布是一个绘图区域，可以在其中通过组合状态、转移和其他图形元素来创建图。 在画布的左侧有一个对象选项板，其中显示了一组可向图中添加图形元素的工具。 在画布的右侧有一个符号窗格，您可以用它向图添加新的数据、事件和消息并解析任何未定义或未使用的符号。 PS:在构造 Stateflow 图后，您可以将其内容复制到另一个具有不同执行模式的图中。例如，您可以构造在 MATLAB 中执行的图，并将其内容复制到在 Simulink 中进行仿真的图中。 2.添加状态和转移 在对象选项板中，点击状态图标并将指针移至图画布。将出现具有默认转移的状态。要放置该状态，请点击画布上的某个位置。在文本提示中，输入状态名称 On 和状态动作 y = x。 添加另一个状态。右键点击并拖动 On 状态。蓝色图形提示可以帮助您水平或垂直对齐状态。新状态的名称变为 Off。双击该状态并将状态动作修改为 y = 0。 重新对齐两个状态并在两个状态之间的空白处停留片刻出现蓝色转移提示指示进行连接。 双击每个转移并输入适当的转移条件 x&lt;t0 或 x&gt;=t0。条件出现在方括号内。（选择添加转移表达式） 5.结果如下图： 3.解析未定义的符号​ 在执行图之前，必须定义图中使用的每个符号并指定其作用域（例如，输入数据、输出数据或局部数据）。 ​ （1）打开符号窗格。​ （2）在符号窗格中，点击解析未定义的符号 ​ （3）由于阈值 t0 在仿真过程中不会更改，因此将其作用域更改为常量数据。在类型列中，点击 t0 旁边的数据类型图标，然后选择常量数据。​ （4）设置阈值 t0 的值。在值列中，点击 t0 旁边的空白输入框，并输入值 0。​ （5）保存Stateflow 图。 4.进行仿真​ （1）要返回到 Simulink 编辑器，请在画布顶部的浏览器栏中点击 Simulink 模型的名称：rectify。如果浏览器栏不可见，请点击对象选项板顶部的隐藏&#x2F;显示资源管理器栏图标 。 ​ （2）执行以下操作以将信源添加到模型中： 从 Simulink Sources 库中，添加一个 Sine Wave (Simulink) 模块。 双击 Sine Wave 模块并将采样时间设置为 0.2。 将 Sine Wave 模块的输出连接到 Stateflow 图的输入。 将信号标记为 x。 ​ （3）添加一个示波器。 ​ （4）保存 Simulink 模型。 ​ （5）开始仿真。 ​ 可以看到此处小于0的数据被滤除了。","categories":[{"name":"MATLAB学习","slug":"MATLAB学习","permalink":"https://lilongxin178.github.io/categories/MATLAB%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"MATLAB学习","slug":"MATLAB学习","permalink":"https://lilongxin178.github.io/tags/MATLAB%E5%AD%A6%E4%B9%A0/"}],"author":"工程小李"},{"title":"Simulink建模基础（2）","slug":"Simulink建模基础（2）","date":"2023-12-12T06:00:00.000Z","updated":"2024-02-08T05:55:51.657Z","comments":true,"path":"2023/12/12/Simulink建模基础（2）/","permalink":"https://lilongxin178.github.io/2023/12/12/Simulink%E5%BB%BA%E6%A8%A1%E5%9F%BA%E7%A1%80%EF%BC%882%EF%BC%89/","excerpt":"","text":"Simulink建模基础（2）三、数学表达式模型搭建技巧​ 本节对公式：$$y(t)&#x3D;A*e^{-t\\over a}+{K\\over\\alpha}e^{-t\\over a}\\int_0^tx(\\tau)e^{t\\over a}d\\tau+{\\beta\\over\\alpha}e^{-t\\over a}\\int_0^tx(\\tau^2)e^{t\\over a}d\\tau$$的数学表达式进行建模。 1.先将结构进行剖析分解（1）将系统划分为几个子系统$$y(t)&#x3D;Function1+Function2+Function3$$ ​ 所以，有$$Function1&#x3D;A*e^{-t\\over a}$$ $$Function2&#x3D;{K\\over\\alpha}e^{-t\\over a}\\int_0^tx(\\tau)e^{t\\over a}d\\tau$$ $$Function3&#x3D;{\\beta\\over\\alpha}e^{-t\\over a}\\int_0^tx(\\tau^2)e^{t\\over a}d\\tau$$ （2）此时再将子系统划分为各个小块。如：$$Function1&#x3D;block1+block2$$ $$Function2 &#x3D; block2 * block3 * block4$$ $$Function3&#x3D; block2 *block5 *block6$$ ​ 所以可得出$$block1&#x3D;A$$ $$block2&#x3D;e^{-t\\over a}$$ $$block3&#x3D;{K\\over\\alpha}$$ $$block4&#x3D;\\int_0^tx(\\tau)e^{t\\over a}d\\tau$$ $$block5&#x3D;{\\beta\\over\\alpha}$$ $$block6&#x3D;e^{-t\\over a}\\int_0^tx(\\tau^2)e^{t\\over a}d\\tau$$ 2.开始进行建模（1）创建上文所使用的六个模块​ 如图，先创建Function1： ​ 再创建Function2，以及Function3 （2）建立子系统 ​ 将三个子系统建立完成后： ​ （3）进行三个子系统的连接 3.模型仿真及测试（1）添加测试用例及显示设备​ 添加一个正弦信号模块作为测试用例并按默认设置。 ​ 添加一个示波器模块作为显示设备。 ​ 双击该模块，在打开后界面的左上角，点击“视图”-&gt;”配置属性”，打开下图界面。 ​ 设置完成后，为下图样式： （2）对参数进行设置​ 1.按照上文参数设置，对该建模内未定义的参数进行定义并赋值。 ​ 2.设置仿真停止时间 ​ 3.设置求解器类型（变步长）；并选择ode23的求解器。 ​ 4.进行仿真 四、Simulink仿真的各种波形显示方式1.普通示波器Scope ​ 调用方式：库浏览器中搜索Scope，拖出使用即可。 2.Dashboard Scope示波器（1）添加Dashboard Scope模块,即在模型的空白处单击选中该模型然后键人“dash”接着选中Dashboard Scope （2）连接Dashboard Scope模块即双击 Dashboard Scope模块，打开模块参数对话框接着选中需要显示的信号，这些信号将出现在模块参数对话框中。 3.仿真数据检查器（Data Inspector）​ 为了在一个页面中显示多个信号的波形，或对某个&#x2F;多个信号的多次测试进行记录，以优化模型中的参数等可使用 Data Inspector。如同时观察x(t)、y(t)、Functionl、Function2和Function3等信号。 ​ （1）右击需要的信号选择“记录所选信号” ​ （2）将所需信号全部按上述操作进行处理 ​ （3）找到已经选择的信号，再次右击打开仿真数据检查器。 ​ （4）对信号在此进行简单的归位排序，以便查看。 ​ （5）记录多次仿真结果。利用该记录功能可对比在不同参数条件下的输出波形，从而选择模型中更符合实际的参数。 4.逻辑分析仪(Logic Analyzer)。​ 对于选中的信号可以一次性将其波形显示出来，特别适用于逻辑关系比较明显的系统其操作方法为:选择 Logic Analyzer 选项即可打开逻辑分析仪对话框。","categories":[{"name":"MATLAB学习","slug":"MATLAB学习","permalink":"https://lilongxin178.github.io/categories/MATLAB%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"MATLAB学习","slug":"MATLAB学习","permalink":"https://lilongxin178.github.io/tags/MATLAB%E5%AD%A6%E4%B9%A0/"}],"author":"工程小李"},{"title":"Simulink建模基础（1）","slug":"Simulink建模基础（1）","date":"2023-12-11T06:00:00.000Z","updated":"2024-02-06T06:17:34.082Z","comments":true,"path":"2023/12/11/Simulink建模基础（1）/","permalink":"https://lilongxin178.github.io/2023/12/11/Simulink%E5%BB%BA%E6%A8%A1%E5%9F%BA%E7%A1%80%EF%BC%881%EF%BC%89/","excerpt":"","text":"Simulink建模基础（1）一、简介​ Simulink是动态和嵌人式等系统的建模与仿真工具，也是模型设计的基础。对于机电航空航天、信号处理、自动控制、通信、音视频处理等众多领域，Simulink 提供了交互式可视化开发环境和可定制的模块库，对系统进行建模、仿真与调试等;并可实现与 Stateflow有限状态机的无缝连接，扩展对复杂系统的建模能力。​ 通过Simulink模块库自带的1000多个预定义模块基本上可快速地创建基于MCU器件应用的系统模型。运用层次化建模、数据管理、子系统定制等手段，即使是复杂的嵌入式MCU应用系统，也能轻松地完成简明精确的模型描述。 ​ 主要内容： ​ Simulink基本操作 Simulink模块库简介 Simulink建模新方法介绍 物理建模简介 二、Simulink基本操作2.1模块库和编辑窗口2.1.1 打开Simulink的起始页​ 在MATLAB的命令行窗口中输人Simulink指令或单击MATLAB工具栏上的Simulink图标，可打开Simulink的起始页。 2.1.2 打开模型编辑窗口​ 创建一个新的模型，首先要打开一个模型编辑窗口。可以通过单击“Simulink的起始页”上所需要的模板，这里选择空白模型(Blank Model)来打开编辑窗口。 2.1.3 打开Simulink库浏览器查看Simulink模块库中包含的子库​ 单击图3.2工具栏上的“库浏览器”图标，可查看Simulink 模块库所包含的子库。 2.2 建模示例2.2.1 有物理含义或微分方程创建模型 1.求解负载电阻R上消耗功率的数学表达式​ 根据欧姆定律，该电路的电流i可表示为：$$i&#x3D;{V_S\\over R_s+R_L}$$​ 则负载电阻R上消耗的功率为$$P&#x3D;i^2*R_L$$ 2.搭建Simulink 模型(1)模型所需模块分析​ 该模型可由3个 Constant 常数模块、1个Add 加法模块、1个 Divide 除法模块1个Product乘法模块1个Math Function 数学函数模块和1个Display 显示模块来表达。 (2)创建一个Simulink模型。​ D单击工具栏上的图标打开Simulink起始页新建一个空白的Simulink模型并另存为自己的工作文件夹中。​ 从Simulink 模块库(Commonly Used Blocks、Math Operations 和 Sinks)中添加Constant模块、Add模块、Divide模块、Math Function模块、Product 模块和 Display模块等。 (3)搭建好的模型 2.3参数设置1.在“建模”中选择“模型数据编辑器”，此时界面下方出现如下编辑器： 2.选择Parameters,选中你要定义的变量位置，点击┇按钮 3.按照下图进行数据的创建： 4.在该界面进行参数的设置 5.回到matlab中的工作区，发现新增了添加的变量，将他们全部选中，右键，另存为Matlab格式文件，保存6.进入保存好的Matlab文件，得到如图所示的配置文件。 ​ 在这里可以对每个参数的值，类型等进行修改。 7.在文件的最前方，定义每一个变量的值，然后将值赋给每一个对应变量.Value，如图所示。 8.点击运行，这样就把sumlink中的值就同步修改了，以后再修改就可以直接使用文件来修改相应变量的值了 9.选择模型属性，在回调选项中的PreLoadFcn的模型预加载中输入.m文件名,这样每次直接运行simlink文件时，会自动加载一次.m文件 2.4 模型仿真​ 先对模型中各参数进行赋值，赋值后在simulink中，点击工具栏中的开始图标进行仿真。结果如下：","categories":[{"name":"MATLAB学习","slug":"MATLAB学习","permalink":"https://lilongxin178.github.io/categories/MATLAB%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"MATLAB学习","slug":"MATLAB学习","permalink":"https://lilongxin178.github.io/tags/MATLAB%E5%AD%A6%E4%B9%A0/"}],"author":"工程小李"},{"title":"Matlab2022a离线安装Embedded Coder Support Package TI C2000","slug":"Matlab2022a离线安装Embedded Coder Support Package TI C2000","date":"2023-12-10T06:00:00.000Z","updated":"2024-01-31T06:31:54.964Z","comments":true,"path":"2023/12/10/Matlab2022a离线安装Embedded Coder Support Package TI C2000/","permalink":"https://lilongxin178.github.io/2023/12/10/Matlab2022a%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85Embedded%20Coder%20Support%20Package%20TI%20C2000/","excerpt":"","text":"Matlab2022a离线安装Embedded Coder Support Package TI C2000一、了解Embedded Coder Support Package TI C2000​ 德州仪器 （TI） C2000 处理器的嵌入式编码器®支持包使您能够在 TI C2000™ MCU 上运行 Simulink® 模型。Embedded Coder 会自动为您的算法和设备驱动程序模块生成 C 代码，这些代码可直接在目标硬件上运行。该支持包可用于不同控制应用（包括电机控制和电源转换）的快速原型制作和生产工作流程。 ​ 内容 从 Simulink 模型生成代码并部署到 TI C2000 硬件 用于 ADC、PWM、SPI、I2C、串行、SDFM、CAN、硬件中断、eCAP、QEP、比较器、DAC 等的设备驱动程序模块。 支持多核处理器 支持控制律加速器 （CLA） 具有处理器在环 （PIL）、监控和调谐（外部模式）、SD 卡记录和实时分析的验证功能 IQMath 的代码替换库 电机控制和功率转换应用实例 ​ 我们可以看到该工具性能十分强大，下面我们来对其进行离线安装。 二、离线安装Embedded Coder Support Package TI C20001、首先安装好R2022a，安装目录不要空格（当然别的版本使用应该也没有问题）。2、安装TI开发套件及SDK 3.下载supportsoftwaredownloader_r2022b_win64.exe4.安装并进入登录界面登录（没有的话直接去Matlab官网申请）5.选择自己安装的Matlab版本 6.选择自己需要安装的支持包 7.选择默认安装路径 8.下载完成后会自动打开以下文件夹 9.打开readme，并复制当前文件夹路径​ readme此处为Windows系统安装方式。 10.按照readme的方式进行安装​ win+r打开cmd命令行 ​ 先进入自己matlab默认安装文件夹–&gt;例如D:\\MATLAB\\R2022a\\bin\\win64 ​ 再使用readme中的名令打开supportsoftware.exe，进入安装。 11.跟着系统提示安装即可。12.安装完成后，找到MATLAB附加功能管理器， 13.选择自己需要的支持包 逐步安装即可 13.打开一个示例并生成代码 14.打开CCS进行编译 ​ 编译成功","categories":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/categories/DSP%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/tags/DSP%E8%AE%BE%E8%AE%A1/"},{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"}],"author":"工程小李"},{"title":"TMS320F280049C主控的DSP入门设计（学习笔记二）  TMS280049C评估板下载设置及流程","slug":"TMS320F280049C主控的DSP入门设计（学习笔记二）  TMS280049C评估板下载设置及流程","date":"2023-12-02T06:00:00.000Z","updated":"2024-01-13T13:00:44.335Z","comments":true,"path":"2023/12/02/TMS320F280049C主控的DSP入门设计（学习笔记二）  TMS280049C评估板下载设置及流程/","permalink":"https://lilongxin178.github.io/2023/12/02/TMS320F280049C%E4%B8%BB%E6%8E%A7%E7%9A%84DSP%E5%85%A5%E9%97%A8%E8%AE%BE%E8%AE%A1%EF%BC%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BA%8C%EF%BC%89%20%20TMS280049C%E8%AF%84%E4%BC%B0%E6%9D%BF%E4%B8%8B%E8%BD%BD%E8%AE%BE%E7%BD%AE%E5%8F%8A%E6%B5%81%E7%A8%8B/","excerpt":"","text":"TMS320F280049C主控的DSP入门设计（学习笔记二） TMS280049C评估板下载设置及流程一、仿真器配置​ 对于280049C，其官方的LaunchPad开发板使用了XDS110仿真器的两线调试模式，而官方的ControlCard使用的是XDS100V2仿真器，开发时需要注意区分，并分别设置。本文以采用两线制调试的XDS110仿真器为例进行设置。​ 右键点击工程名，选择New—&gt;TargetConfiguration File，File name取名任意，这里可取名为LaunchPad.ccxml，点击Finish。 ​ 点击第三步的操作，进入如下图界面，选择JTAG_2_PIN调试模式。 二、配置FLASH执行​ 当代码调试完毕后，需将代码烧录到FLASH中进行固化，使其掉电程序依旧储存在FLASH中。使DSP可以脱离仿真器运行。 1.修改至FLASH模式 然后重复与RAM中执行类似的配置，具体包括以下几步： 添加索引路径 添加数学库文件路径 启用FPU和TMU 定义_LAUNCHXL_F280049C 文件管理 2.声明_FLASH和code_start为了使程序正确的从flash启动，编程时通常有一些特殊的代码需要运行(通常TI都已经在库函数中提供)。为了确保这些代码能够正确编译，执行本步骤。 3.添加cmd文件​ 将FLASH相关的cmd加进来。 三、程序烧写与仿真1.连接仿真器（对于TMS280049C直接使用电脑供电即可） 点击View—&gt;Target Configurations,进入以下界面： 右键单击Target Configurations窗口中工程目录下的“TMS320F28035.ccxml”文件（名称是你刚才新建.ccxml文件时的名称)，并选择“Launch Selected Configuration” 、 这时CCS会自动进入Debug模式 点击快捷菜单栏的“Connect Target”按下 按钮呈现为按下状态，并且调试按钮都点亮，则仿真器连接成功 2.程序烧写 在仿真器连接成功后，点击快捷菜单栏的“Load”按钮，装载程序 在弹出的“Load Program”对话框中，点击“Browse project” 在弹出的对话框中，展开你的工程文件夹，选择“Debug”文件夹下的“xxxx.out”文件，点击“OK” 点击“Load Program”对话框的“OK” 这时出现擦写进度条，等进度条完成就烧写成功啦！ 3.在线仿真 程序烧写完成后，点击“Resume”按钮可在线运行程序 若要添加断点（即让程序运行到某处停下），在对应程序行的左侧列双击，出现小圆点即可。","categories":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/categories/DSP%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/tags/DSP%E8%AE%BE%E8%AE%A1/"},{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"}],"author":"工程小李"},{"title":"TMS320F280049C主控的DSP入门设计（学习笔记一）  搭建可移植的CCS工程","slug":"TMS320F280049C主控的DSP入门设计（学习笔记一）  搭建可移植的CCS工程","date":"2023-12-01T06:00:00.000Z","updated":"2024-01-12T13:02:45.048Z","comments":true,"path":"2023/12/01/TMS320F280049C主控的DSP入门设计（学习笔记一）  搭建可移植的CCS工程/","permalink":"https://lilongxin178.github.io/2023/12/01/TMS320F280049C%E4%B8%BB%E6%8E%A7%E7%9A%84DSP%E5%85%A5%E9%97%A8%E8%AE%BE%E8%AE%A1%EF%BC%88%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%B8%80%EF%BC%89%20%20%E6%90%AD%E5%BB%BA%E5%8F%AF%E7%A7%BB%E6%A4%8D%E7%9A%84CCS%E5%B7%A5%E7%A8%8B/","excerpt":"","text":"TMS320F280049C主控的DSP入门设计（学习笔记一） 搭建可移植的CCS工程 前言​ 本篇笔记将介绍如何搭建可移植的CCS工程，以便于开发TMS320F280049C主控的DSP入门设计。本篇笔记将详细介绍如何创建CCS工程、添加源文件和库文件、配置编译选项等步骤。 一、工程文件的复制CCS新建空白工程​ 首先打开CCS软件，点击project-&gt;New CCS Project，并按照所需功能自行配置工程名、芯片等信息。 ​ 除此之外，在Project type and tool-chain中配置Output foemat为eabi（ELF） ​ 点击Finish后弹出代码编辑器如下： ​ 此时，我们所选择的工作文件夹目录下应有下列文件： 拷贝支持文件进入工程文件夹​ 首先，进入C2000Ware的默认下载文件夹，如：D:\\ti\\c2000\\C2000Ware_5_01_00_00（笔者为5.01版本，同时，本文出现的所有文件地址均为笔者自己工作环境下的地址）。并找到： ​ D:\\ti\\c2000\\C2000Ware_5_01_00_00\\device_support\\f28004x\\common ​ 此文件夹下为F280049的DSP支持文件，接下来对该文件夹内文件进行复制，并粘贴到工作文件夹中。 首先，将source整个文件夹复制到工作文件夹中。 再将D:\\ti\\c2000\\C2000Ware_5_01_00_00\\device_support\\f28004x\\headers\\source文件夹下的文件复制到现在工程文件夹下的source中 将D:\\ti\\c2000\\C2000Ware_5_01_00_00\\device_support\\f28004x\\common中的include文件夹全部复制到工程文件夹中。 再将D:\\ti\\c2000\\C2000Ware_5_01_00_00\\device_support\\f28004x\\headers\\include中的所有文件复制到工作文件夹的include文件夹下 将D:\\ti\\c2000\\C2000Ware_5_01_00_00\\device_support\\f28004x\\common\\cmd中的四个cmd文件复制到工程文件夹。 接下来对库函数进行复制，首先找到路径地址为D:\\ti\\c2000\\C2000Ware_5_01_00_00\\driverlib\\f28004x\\driverlib的文件夹，该文件夹中含有两个文件夹和.c、.h文件（库函数文件） 首先，对该文件夹下.h文件进行复制，并粘贴到include文件夹中。 再对.c文件进行复制，此时可以先在工作文件夹中创建文件夹“C_library”，然后将.c文件全部粘贴到该文件夹下。 最后将剩余的两个文件夹复制到工程文件夹中，到此，库文件复制完毕。 添加数学运算库及f28004x_headers_nonbios.cmd文件 找到D:\\ti\\c2000\\C2000Ware_5_01_00_00\\libraries\\math\\FPUfastRTS\\c28\\lib和D:\\ti\\ccs1250\\ccs\\tools\\compiler\\ti-cgt-c2000_22.6.1.LTS\\lib（该文件夹为下载CCS后的文件夹），将该文件夹下复制数学运算库到工程文件夹中 再对f28004x_headers_nonbios.cmd文件进行添加找到D:\\ti\\c2000\\C2000Ware_5_01_00_00\\device_support\\f28004x\\headers\\cmd文件夹，对该文件进行复制粘贴。 删除多余文件，整理库文件由于使用eabi输出，所以可将ccs中与COFF输出相关的文件都删除掉。 二 、对文件进行编辑修改​ 1.删除source文件夹f28004x_usdelay.asm文件中函数声明的下划线。这步主要是为了适应eabi输出的需要，也即函数名前不加下划线。​ 修改前： 12345678 .def _F28x_usDelay .sect &quot;.TI.ramfunc&quot; .global __F28x_usDelay_F28x_usDelay: SUB ACC,#1 BF _F28x_usDelay,GEQ ;; Loop if ACC &gt;= 0 LRETR ​ 修改后： 12345678 .def F28x_usDelay .sect &quot;.TI.ramfunc&quot; .global __F28x_usDelayF28x_usDelay: SUB ACC,#1 BF F28x_usDelay,GEQ ;; Loop if ACC &gt;= 0 LRETR ​ 2.include文件夹下的f28004x_lin.h文件需要修改一个变量名，该变量名可以任意修改，修改原因是命名重复。​ 修改前： 1bp_16 IDLE:1; ​ 修改后： 1bp_16 LIN_IDLE:1; ​ 3.include文件夹下的f28004x_globalprototypes.h和source文件夹的f28004x_sysctrl.c均需要修改IDLE函数名，该变量名可以任意修改，修改原因也是命名重复。​ 修改前： 123void IDLE(void); //（f28004x_globalprototypes.h）IDLE() //（f28004x_sysctrl.c） ​ 修改后： 123void IIDLE(void); //（f28004x_globalprototypes.h）IIDLE() //（f28004x_sysctrl.c） 三、从RAM执行程序时的软件配置​ 此时已经形成了完整的CCS工程文件夹，下面将对工程文件进行索引，而一般debug时希望工程从RAM中进行运行，所以在这里进行RAM中运行的配置。​ 首先，右键项目浏览器的项目名，打开Properties（属性栏），设置成Debug，这里名字可以任意修改。 ​ 后续添加文件路径的时候会涉及到一些缩写，这些缩写在如下位置做了定义： 添加索引路径​ 右键点击项目浏览器中的项目名，打开Properties（属性）。找到Include Options。按照下图中操作，创建相对路径。直接在对话框中输入 ${PROJECT_ROOT}&#x2F;include，表示工程文件夹中的include文件夹（绝对路径）。 添加数学库文件路径同样右键点击项目浏览器中的项目名，打开Properties（属性）进行设置。加入下列路径。${PROJECT_ROOT}&#x2F;rts2800_fpu32_eabi.lib ${PROJECT_ROOT}&#x2F;rts2800_fpu32_fast_supplement_eabi.lib 其中默认的库文件是libc.a，根据本文开头提到的官网文档，可以直接删除。 ​ 快速运行库rts2800_fpu32_fast_supplement.lib是rts2800_fpu32.lib的一个函数子集，它是对rts2800_fpu32.lib中一些函数进行重写，提高运算速度，所以添加是有次序要求，需要进行设置如下：​ Link order中添加这两个库，排序rts2800_fpu32_fast_supplement.lib在前rts2800_fpu32.lib在后 启用FPU和TMU同样右键点击项目浏览器中的项目名，打开Properties（属性）进行设置。 关于编译器–fp_mode的设置等信息可以参考文献[4]的2.3节。目前不推荐启用–idiv_support，在本工程中启用该选项会导致程序无法正确运行。 四、总结 ​ 到此，CCS的TMS320F280049C主控模板文件创建完毕。​ 下节将进行仿真器的配置以及程序下载流程。","categories":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/categories/DSP%E8%AE%BE%E8%AE%A1/"}],"tags":[{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/tags/DSP%E8%AE%BE%E8%AE%A1/"},{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"}],"author":"工程小李"},{"title":"关于负电阻的原理及应用的探究","slug":"关于负电阻的原理及应用的探究","date":"2023-11-30T02:00:00.000Z","updated":"2024-01-12T12:40:23.861Z","comments":true,"path":"2023/11/30/关于负电阻的原理及应用的探究/","permalink":"https://lilongxin178.github.io/2023/11/30/%E5%85%B3%E4%BA%8E%E8%B4%9F%E7%94%B5%E9%98%BB%E7%9A%84%E5%8E%9F%E7%90%86%E5%8F%8A%E5%BA%94%E7%94%A8%E7%9A%84%E6%8E%A2%E7%A9%B6/","excerpt":"","text":"关于负电阻的原理及应用的探究一、负电阻是什么 一般来说，电压随电流变化的情形在纯电阻电路中可使用微分电阻R进行表示：$$R&#x3D;{dV\\over dI}$$ ​ 由该图可看出，隧道二极管在A-B的阶段是符合前文所说的负微分效应的，但由于隧道二极管的该区域伏安特性并非线性所以该区域并不能称之为负电阻。 ​ 接下来，我们再对负电阻做更加细致的定义： ​ 根据欧姆定律可知电阻二端的电压和电流成正比，其电流-电压关系的图形斜率为正，且会通过原点。 ​ 那么就可推导理想负电阻其电流-电压关系的图形斜率为负，且会通过原点，因此只在图中的第二和第四象限出现。 ​ 故可对该理想负电阻进行绘制伏安特性曲线： ​ 由以上推论及实际现象定义负电阻，即可简单定义为理想的负电阻应该为伏安特性曲线为线性且为斜率为负并经过原点的一种元件。 ​ 历史以往研究时有注意到气体放电元件及一些真空管（例如负耗阻性管）会有负阻效应。不过实用且有经济效益的元件一直到固态电子技术普及后才出现。典型的负阻抗电路—负阻抗变换器—是由约翰·林维尔在1953年发明。而典型差动电阻为负值的元件—隧道二极管—则是由江崎玲于奈在1958年发明。 二、实际负电阻元件构建 ​ 集成电路兴起后，运算放大器由于其”虚短“”虚断“的特性，为构建一些理论中的器提供了巨大帮助，负电阻也在此应运而生。 负电阻实际元件 ​ 该图像为较为典型的负阻抗电路，其阻抗为：$$Z_i &#x3D; {V\\over A} &#x3D;-Z$$​ 现在规定图中电流电压方向为正，由于运算放大器“虚断“的性质，我们可知该电路输入阻抗的绝对值为： $$|Z|&#x3D;R_3$$​ 那再由运放的”虚短“性质可知，可以看出该电路形成了一个放大倍数为两倍的同向放大器，所以当输入端设置电压为V时，输出端电压为2V所以此时R3上的电流在我们设定的状态下应该为-A。所以此时有：$$-A&#x3D;{V\\over R}$$​ 该公式可直接推出该电路阻抗为$$Z_i &#x3D; {V\\over A} &#x3D;-Z$$​ 从本质上来看，我们会发现这里是通过改变电流方向实现的一种模拟负电阻的电路。那我们该如何验证其是否是负电阻呢？接下来进行仿真。 三、仿真验证 ​ 使用 LTspice的直流扫描分析，设置V2从0V开始到2.5V步进0.1V，并给负电阻并联一个正电阻，那么由叠加定理可知，在理想电流源的情况下，正电阻与负电阻上所经过的电流应当相反。那么，开始仿真，测量两个电阻上所经过的电流。 ​ 由测试直流分析可以看出，正电阻与负电阻的电流相反，且电流绝对值都为线性上升，所以，在该理想状态下，负电阻能够完美符合我们在前文中的标准。 四、负电阻应用场景4.1 负阻抗缓冲器​ 实际使用运算放大器时，我们往往会遇到运放驱动能力不足的情况，这种情况下，我们总是达不到我们所期望的电路效果。通常，当我们遇到这种情况时，我们通常使用一级跟随器（单位增益缓冲）。在这里我们可以尝试使用另外一种方式，即负阻抗缓冲器。当负载阻抗较小时，我们可以通过计算在输出端并联一负阻抗，此时输出阻抗趋于∞，且电路输出信号不会出现衰减的情况。​ 与传统跟随器方案相比，该方案具有一重要优点，其使负载阻抗变得很大，几乎消除了负载电阻对电路的影响。 4.2 高输入阻抗放大电路​ 在进行运放电路的使用时，我们知道同相放大器具有输入阻抗高的特点，而反相放大器具有运放输入端虚地，电路工作稳定的特定。所以，我们是否能通过负阻抗缓冲器的原理类比出高阻抗的反向放大电路呢？答案是可以实现的，通过反向在输入端并联负阻抗电路，即可有效提高输入阻抗。设计方案如下： 4.3 负电阻在LC振荡电路中的应用​ RLC二阶电路的响应具有振荡的特性,特别地,当R &#x3D; 0 时,电路的响应为无阻尼振荡。为了得到无阻尼振荡特性,可用负电阻来“中和”电路中的正电阻。 ​ 通过修改R4，可观察输出端波形幅值的衰减、稳定、增长的现象。 ​ 仿真文件地址：img&#x2F;负阻抗LC振荡仿真.ms14 at master · LILONGXIN178&#x2F;img (github.com)","categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"}],"tags":[{"name":"运放的运用","slug":"运放的运用","permalink":"https://lilongxin178.github.io/tags/%E8%BF%90%E6%94%BE%E7%9A%84%E8%BF%90%E7%94%A8/"}],"author":"工程小李"},{"title":"基于Typora的Markdown使用","slug":"基于Typora的Markdown使用","date":"2023-11-26T04:00:00.000Z","updated":"2024-01-12T12:40:40.399Z","comments":true,"path":"2023/11/26/基于Typora的Markdown使用/","permalink":"https://lilongxin178.github.io/2023/11/26/%E5%9F%BA%E4%BA%8ETypora%E7%9A%84Markdown%E4%BD%BF%E7%94%A8/","excerpt":"","text":"基于Typora的Markdown使用 一、简介 ​ Word文件是目前我们日常生活中较为常用的文字文件，但我们会发现我们在使用中经常出现排版变化的问题。那为了将排版进行统一规范，我们可能需要一种统一的软件或者文件格式来进行规范。 ​ 那我们会发现，有这样的一种标记语言——Markdown。 ​ 那么既然我们想要去使用Markdown进行文件的书写，我们自然需要一个编辑器工具对其进行编辑使用。学习之初，有我的学长向我推荐了Typora这款编辑器，而我本人也对这款编辑器较为熟悉，所以，本篇博文将基于Typora对Markdown的使用进行探讨。 二、Typora的快捷键设置 2.1 常用快捷键 加粗： Ctrl + B 撤销： Ctrl + Z 字体倾斜 ：Ctrl+I 下划线：Ctrl+U 多级标题： Ctrl + 1~6 有序列表：Ctrl + Shift + [ 无序列表：Ctrl + Shift + ] 降级快捷键 ：Tab 升级快捷键：Shift + Tab 插入链接： Ctrl + K 插入公式： Ctrl + Shift + M 行内代码： Ctrl + Shift + K 插入图片： Ctrl + Shift + I 返回Typora顶部：Ctrl+Home 返回Typora底部 ：Ctrl+End 创建表格 ：Ctrl+T 选中某句话 ：Ctrl+L 选中某个单词 ：Ctrl+D 选中相同格式的文字 ：Ctrl+E 搜索: Ctrl+F 搜索并替换 ：Ctrl+H 删除线 ：Alt+Shift+5 引用 ：Ctrl+Shift+Q 生成目录：[TOC]+Enter 2.2 部分功能演示&#x2F;介绍2.2.1 目录​ 输入[TOC]加Enter生成目录。该目录可随用户使用时自动更新，并且具有跳转功能，使用较为简单。 2.2.2 段落​ 使用换行键[Enter]可以建立新的一行,而使用Shift+Enter可以创建一个比段落间距更小的行间距。 2.2.3 代码块​ 使用快捷键Ctrl + Shift + K，创建代码块。示例如下： 1print(&quot;hello,python!&quot;&quot;) 2.2.4 数学公式打开Typora选择数学模块 点击“段落”—&gt;“公式块”（不推荐） 快捷键Ctrl+Shift+m (快捷方式) “$$”+回车 （Markdown语法） 以上三种方式都能打开数学公式的编辑栏。 示例： 2.2.5 上下标及高亮使用​ 进入偏好设置： ​ 勾选以上的拓展语法，并进行使用。 三、Typora图床设置 ​ 使用Typora时如果不使用图床，我们插入的图片将会保存至本地，那么当我们发往博客或CSDN时就无法直接显示图片。因此我们需要设置一个图床，将图片上传至图床。这里我们可以使用PicGo+Gitee的方式，无需任何费用且上传速度也不错，唯一缺点就是上传再Gitee上私密性不强。 3.1 Gitee使用及配置​ Gitee和GitHub都是较为常用的代码托管平台，和GitHub相比最大的都是就是其访问速度在国内环境下相对较快。所以我们将我们的图床远程仓库设置在Gitee上。​ Gitee地址：*https://gitee.com/* 新建仓库： ​ 此处仓库名自己可任意填写。下面两个标出的红色框中的信息直接按照图中所示配置。 创建私人令牌： ​ 回到主页，然后点击自己的头像，选择账号设置。 ​ 打开后，找到私人令牌 ​ 进入后点击生成新令牌 ​ 简单对项目进行简述，并勾选图中所勾选选项。并输入密码进行验证。 ​ 将私人令牌的token进行复制保存。 3.2 Picgo安装下载及使用​ PicGo是一款开源免费且支持多平台。 ​ 下载并打开Picgo进行安装。安装完成后进入主界面。 ​ 此处可以选择链接格式（markdown、HTML、URL、UBB、Custom等），另外也需要对图床进行设置，为了使用Gitee作为图床，我们应当先进入插件设置来添加Gitee。 下面在图床设置中对Gitee进行配置。 3.3 Typora设置​ 进入Typora，打开“文件”进入“偏好设置” ​ 在该设置中选择其用以下几种功能，并将上传服务选择为Picgo（app），并将应用程序地址填入绝对路径。 ​ 现在只要我们在typora中粘贴任意一张图片，Gicgo就会自动将图片上传到我们的gitee仓库中，肥肠的方便好用。","categories":[{"name":"工具使用","slug":"工具使用","permalink":"https://lilongxin178.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"}],"tags":[{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"Markdown","slug":"Markdown","permalink":"https://lilongxin178.github.io/tags/Markdown/"},{"name":"Typora","slug":"Typora","permalink":"https://lilongxin178.github.io/tags/Typora/"}],"author":"工程小李"}],"categories":[{"name":"硬件探讨","slug":"硬件探讨","permalink":"https://lilongxin178.github.io/categories/%E7%A1%AC%E4%BB%B6%E6%8E%A2%E8%AE%A8/"},{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/categories/DSP%E8%AE%BE%E8%AE%A1/"},{"name":"MATLAB学习","slug":"MATLAB学习","permalink":"https://lilongxin178.github.io/categories/MATLAB%E5%AD%A6%E4%B9%A0/"},{"name":"工具使用","slug":"工具使用","permalink":"https://lilongxin178.github.io/categories/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"}],"tags":[{"name":"小知识","slug":"小知识","permalink":"https://lilongxin178.github.io/tags/%E5%B0%8F%E7%9F%A5%E8%AF%86/"},{"name":"信号完整性","slug":"信号完整性","permalink":"https://lilongxin178.github.io/tags/%E4%BF%A1%E5%8F%B7%E5%AE%8C%E6%95%B4%E6%80%A7/"},{"name":"器件类","slug":"器件类","permalink":"https://lilongxin178.github.io/tags/%E5%99%A8%E4%BB%B6%E7%B1%BB/"},{"name":"DSP设计","slug":"DSP设计","permalink":"https://lilongxin178.github.io/tags/DSP%E8%AE%BE%E8%AE%A1/"},{"name":"工具","slug":"工具","permalink":"https://lilongxin178.github.io/tags/%E5%B7%A5%E5%85%B7/"},{"name":"MATLAB学习","slug":"MATLAB学习","permalink":"https://lilongxin178.github.io/tags/MATLAB%E5%AD%A6%E4%B9%A0/"},{"name":"运放的运用","slug":"运放的运用","permalink":"https://lilongxin178.github.io/tags/%E8%BF%90%E6%94%BE%E7%9A%84%E8%BF%90%E7%94%A8/"},{"name":"Markdown","slug":"Markdown","permalink":"https://lilongxin178.github.io/tags/Markdown/"},{"name":"Typora","slug":"Typora","permalink":"https://lilongxin178.github.io/tags/Typora/"}]}